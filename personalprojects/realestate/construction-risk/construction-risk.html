<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Construction Risk Intelligence | AI-Powered Project Risk Analytics</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
<style>
/* ========================================
   CSS VARIABLES & RESET
   ======================================== */
:root {
    --primary: #1e3a5f;
    --primary-dark: #0d2137;
    --accent: #f59e0b;
    --accent-light: #fbbf24;
    --success: #10b981;
    --danger: #ef4444;
    --azure: #0078d4;
    --aws: #ff9900;
    --gcp: #4285f4;
    --bg-light: #f8fafc;
    --bg-dark: #0f172a;
    --text-primary: #1e293b;
    --text-secondary: #64748b;
    --text-muted: #94a3b8;
    --border: #e2e8f0;
    --card-shadow: 0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -2px rgba(0,0,0,0.1);
    --card-shadow-lg: 0 20px 25px -5px rgba(0,0,0,0.1), 0 8px 10px -6px rgba(0,0,0,0.1);
}

*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

body {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    background: var(--bg-light);
    color: var(--text-primary);
    line-height: 1.6;
    -webkit-font-smoothing: antialiased;
}

/* ========================================
   HERO SECTION
   ======================================== */
.hero {
    background: linear-gradient(135deg, var(--primary-dark) 0%, var(--primary) 50%, #2d5a87 100%);
    padding: 4rem 2rem;
    position: relative;
    overflow: hidden;
}

.hero::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.03'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
    opacity: 0.5;
}

.hero-content {
    width: 100%;
    padding: 0 5%;
    position: relative;
    z-index: 1;
}

.industry-tag {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    background: rgba(245, 158, 11, 0.2);
    border: 1px solid rgba(245, 158, 11, 0.4);
    color: var(--accent-light);
    padding: 0.5rem 1rem;
    border-radius: 50px;
    font-size: 0.875rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    margin-bottom: 1.5rem;
}

.hero h1 {
    font-size: clamp(2.5rem, 5vw, 4rem);
    font-weight: 800;
    color: white;
    line-height: 1.1;
    margin-bottom: 1rem;
}

.hero h1 span {
    background: linear-gradient(135deg, var(--accent) 0%, var(--accent-light) 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.hero-subtitle {
    font-size: 1.25rem;
    color: rgba(255,255,255,0.8);
    max-width: 60%;
    margin-bottom: 2.5rem;
}

/* Metrics Cards */
.metrics-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    gap: 1.5rem;
    margin-top: 2rem;
}

.metric-card {
    background: rgba(255,255,255,0.1);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255,255,255,0.15);
    border-radius: 16px;
    padding: 1.5rem;
    transition: transform 0.3s, box-shadow 0.3s;
}

.metric-card:hover {
    transform: translateY(-4px);
    box-shadow: 0 20px 40px rgba(0,0,0,0.3);
}

.metric-value {
    font-size: 2.5rem;
    font-weight: 800;
    color: var(--accent);
    line-height: 1;
    margin-bottom: 0.25rem;
}

.metric-label {
    color: rgba(255,255,255,0.9);
    font-weight: 600;
    font-size: 0.9rem;
    margin-bottom: 0.25rem;
}

.metric-detail {
    color: rgba(255,255,255,0.6);
    font-size: 0.8rem;
}

/* ========================================
   MAIN CONTENT CONTAINER
   ======================================== */
.container {
    width: 100%;
    padding: 0 5%;
}

/* ========================================
   SECTION STYLING
   ======================================== */
.section {
    padding: 5rem 0;
}

.section-header {
    text-align: center;
    margin-bottom: 3rem;
}

.section-tag {
    display: inline-block;
    background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
    color: white;
    padding: 0.35rem 1rem;
    border-radius: 50px;
    font-size: 0.75rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    margin-bottom: 1rem;
}

.section-title {
    font-size: 2.5rem;
    font-weight: 800;
    color: var(--text-primary);
    margin-bottom: 1rem;
}

.section-subtitle {
    font-size: 1.125rem;
    color: var(--text-secondary);
    max-width: 60%;
    margin: 0 auto;
}

/* ========================================
   PROBLEM SECTION
   ======================================== */
.problem-section {
    background: white;
}

/* Case Study Hook */
.case-study-hook {
    max-width: 900px;
    margin: 0 auto 3rem;
    text-align: center;
}

.hook-quote {
    background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
    border-radius: 16px;
    padding: 2.5rem 3rem;
    margin-bottom: 1.5rem;
    position: relative;
}

.quote-icon {
    width: 32px;
    height: 32px;
    color: #f59e0b;
    margin-bottom: 1rem;
}

.hook-quote blockquote {
    color: white;
    font-size: 1.25rem;
    font-style: italic;
    line-height: 1.7;
    margin: 0 0 1rem;
}

.hook-quote cite {
    color: #94a3b8;
    font-size: 0.9rem;
    font-style: normal;
}

.hook-context {
    color: var(--text-secondary);
    font-size: 1.1rem;
    line-height: 1.8;
}

.hook-context strong {
    color: var(--primary);
    font-weight: 700;
}

/* Why Now Section */
.why-now-section {
    background: linear-gradient(135deg, #f0fdf4 0%, #ecfdf5 100%);
    border: 1px solid #bbf7d0;
    border-radius: 16px;
    padding: 2.5rem;
    margin-bottom: 3rem;
}

.why-now-title {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    font-size: 1.25rem;
    font-weight: 700;
    color: #166534;
    margin-bottom: 0.75rem;
}

.why-now-title svg {
    width: 24px;
    height: 24px;
    stroke: #16a34a;
}

.why-now-intro {
    color: #166534;
    font-size: 1rem;
    margin-bottom: 1.5rem;
}

.convergence-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 1.25rem;
}

.convergence-item {
    display: flex;
    gap: 1rem;
    background: white;
    border-radius: 12px;
    padding: 1.25rem;
    border: 1px solid #d1fae5;
}

.convergence-icon {
    width: 44px;
    height: 44px;
    background: linear-gradient(135deg, #16a34a 0%, #15803d 100%);
    border-radius: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
}

.convergence-icon svg {
    width: 22px;
    height: 22px;
    stroke: white;
}

.convergence-content h4 {
    font-size: 1rem;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 0.35rem;
}

.convergence-content p {
    font-size: 0.9rem;
    color: var(--text-secondary);
    line-height: 1.5;
    margin: 0;
}

.problem-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 1.5rem;
}

.pain-point {
    background: linear-gradient(135deg, #fef2f2 0%, #fff7ed 100%);
    border: 1px solid #fecaca;
    border-radius: 16px;
    padding: 2rem;
    position: relative;
    overflow: hidden;
}

.pain-point::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 4px;
    height: 100%;
    background: linear-gradient(180deg, var(--danger) 0%, var(--accent) 100%);
}

.pain-icon {
    width: 48px;
    height: 48px;
    background: linear-gradient(135deg, var(--danger) 0%, #f87171 100%);
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-bottom: 1rem;
}

.pain-icon svg {
    width: 24px;
    height: 24px;
    color: white;
}

.pain-point h3 {
    font-size: 1.125rem;
    font-weight: 700;
    color: var(--text-primary);
    margin-bottom: 0.75rem;
}

.pain-point p {
    color: var(--text-secondary);
    font-size: 0.9rem;
    line-height: 1.6;
}

.pain-stat {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    background: rgba(239, 68, 68, 0.1);
    color: var(--danger);
    padding: 0.35rem 0.75rem;
    border-radius: 50px;
    font-size: 0.8rem;
    font-weight: 700;
    margin-top: 1rem;
}

/* Problem Section Fullscreen Wrapper */
.problem-section-fullscreen {
    margin-top: 2rem;
}

.problem-section-fullscreen.fullscreen-mode {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    z-index: 9999;
    margin: 0;
    padding: 1.5rem;
    background: var(--bg-light);
    display: flex;
    flex-direction: column;
    overflow: auto;
}

.problem-section-fullscreen.fullscreen-mode .problem-combined-view {
    margin-top: 0;
    flex: 1;
    min-height: 0;
}

.problem-section-fullscreen.fullscreen-mode .current-state {
    max-height: none;
}

.problem-section-fullscreen.fullscreen-mode .workflow-container {
    flex: 1;
}

.problem-section-fullscreen.fullscreen-mode .workflow-status-bar {
    margin-top: 1rem;
    flex-shrink: 0;
}

/* Combined Problem View - Side by Side Layout */
.problem-combined-view {
    display: flex;
    gap: 1.5rem;
    align-items: stretch;
}

/* Current State Box - Left Sidebar */
.current-state {
    background: white;
    border: 2px dashed var(--border);
    border-radius: 16px;
    padding: 1.75rem;
    flex: 0 0 340px;
    display: flex;
    flex-direction: column;
}

.current-state h3 {
    font-size: 1.3rem;
    font-weight: 700;
    color: var(--text-primary);
    margin-bottom: 1.25rem;
    display: flex;
    align-items: center;
    gap: 0.6rem;
}

.current-state h3 svg {
    width: 24px;
    height: 24px;
    flex-shrink: 0;
}

.state-grid {
    display: flex;
    flex-direction: column;
    gap: 1rem;
    flex: 1;
}

.state-item {
    display: flex;
    align-items: flex-start;
    gap: 0.875rem;
    padding: 1rem;
    background: var(--bg-light);
    border-radius: 10px;
}

.state-icon {
    width: 40px;
    height: 40px;
    background: var(--border);
    border-radius: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
}

.state-icon svg {
    width: 20px;
    height: 20px;
}

.state-item span {
    color: var(--text-secondary);
    font-size: 1rem;
    line-height: 1.5;
    font-weight: 500;
}

/* ========================================
   FAILURES / CASE STUDIES SECTION
   ======================================== */
.failures-section {
    background: linear-gradient(180deg, #fef2f2 0%, white 100%);
}

.failures-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
    gap: 1.5rem;
    margin-bottom: 2.5rem;
}

.failure-card {
    background: white;
    border: 1px solid #fecaca;
    border-radius: 16px;
    padding: 1.75rem;
    transition: transform 0.2s, box-shadow 0.2s;
}

.failure-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 24px rgba(220, 38, 38, 0.1);
}

.failure-header {
    display: flex;
    align-items: flex-start;
    gap: 1rem;
    margin-bottom: 1rem;
}

.failure-icon {
    width: 44px;
    height: 44px;
    border-radius: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
}

.failure-icon.catastrophic {
    background: linear-gradient(135deg, #f97316 0%, #ea580c 100%);
}

.failure-icon.severe {
    background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
}

.failure-icon.fatal {
    background: linear-gradient(135deg, #991b1b 0%, #7f1d1d 100%);
}

.failure-icon svg {
    width: 22px;
    height: 22px;
    stroke: white;
}

.failure-meta {
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
}

.failure-type {
    font-size: 0.75rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: #dc2626;
}

.failure-location {
    font-size: 0.85rem;
    color: var(--text-muted);
}

.failure-title {
    font-size: 1.25rem;
    font-weight: 700;
    color: var(--text-primary);
    margin-bottom: 0.5rem;
}

.failure-description {
    font-size: 0.95rem;
    color: var(--text-secondary);
    line-height: 1.6;
    margin-bottom: 1rem;
}

.failure-stats {
    display: flex;
    gap: 1.5rem;
    margin-bottom: 1rem;
    padding: 1rem;
    background: #fef2f2;
    border-radius: 10px;
}

.failure-stat {
    display: flex;
    flex-direction: column;
}

.failure-stat .stat-value {
    font-size: 1.5rem;
    font-weight: 800;
    color: #dc2626;
}

.failure-stat .stat-label {
    font-size: 0.75rem;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.03em;
}

.failure-insight {
    font-size: 0.9rem;
    color: var(--text-secondary);
    padding: 1rem;
    background: linear-gradient(135deg, #f0fdf4 0%, #ecfdf5 100%);
    border: 1px solid #bbf7d0;
    border-radius: 10px;
    line-height: 1.5;
}

.failure-insight strong {
    color: #16a34a;
}

.failure-source {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    margin-top: 1rem;
    padding: 0.5rem 0.75rem;
    font-size: 0.8rem;
    color: #64748b;
    background: #f1f5f9;
    border-radius: 6px;
    text-decoration: none;
    transition: all 0.2s ease;
}

.failure-source:hover {
    background: #e2e8f0;
    color: #334155;
}

.failure-source svg {
    width: 14px;
    height: 14px;
    flex-shrink: 0;
}

.failures-cta {
    text-align: center;
    padding: 2rem;
    background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
    border-radius: 16px;
}

.failures-cta p {
    color: #e2e8f0;
    font-size: 1.15rem;
    margin: 0;
}

.failures-cta em {
    color: #f59e0b;
    font-style: normal;
    font-weight: 600;
}

/* ========================================
   SOLUTION SECTION
   ======================================== */
.solution-section {
    background: linear-gradient(180deg, var(--bg-light) 0%, white 100%);
}

.solution-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 3rem;
    align-items: start;
}

@media (max-width: 900px) {
    .solution-grid { grid-template-columns: 1fr; }
}

.capabilities-list {
    display: flex;
    flex-direction: column;
    gap: 1rem;
}

.capability {
    background: white;
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 1.5rem;
    display: flex;
    gap: 1rem;
    transition: all 0.3s;
}

.capability:hover {
    border-color: var(--primary);
    box-shadow: var(--card-shadow-lg);
    transform: translateX(4px);
}

.capability-icon {
    width: 48px;
    height: 48px;
    background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
}

.capability-icon svg {
    width: 24px;
    height: 24px;
    color: white;
}

.capability h4 {
    font-size: 1rem;
    font-weight: 700;
    color: var(--text-primary);
    margin-bottom: 0.25rem;
}

.capability p {
    color: var(--text-secondary);
    font-size: 0.875rem;
}

/* Approach Card */
.approach-card {
    background: linear-gradient(135deg, var(--primary-dark) 0%, var(--primary) 100%);
    border-radius: 20px;
    padding: 2.5rem;
    color: white;
    position: sticky;
    top: 100px;
}

.approach-card h3 {
    font-size: 1.5rem;
    font-weight: 700;
    margin-bottom: 1.5rem;
    display: flex;
    align-items: center;
    gap: 0.75rem;
}

.approach-steps {
    display: flex;
    flex-direction: column;
    gap: 1.25rem;
}

.approach-step {
    display: flex;
    gap: 1rem;
    align-items: flex-start;
}

.step-number {
    width: 32px;
    height: 32px;
    background: var(--accent);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 700;
    font-size: 0.875rem;
    color: var(--primary-dark);
    flex-shrink: 0;
}

.step-content h4 {
    font-size: 1rem;
    font-weight: 600;
    margin-bottom: 0.25rem;
}

.step-content p {
    font-size: 0.875rem;
    opacity: 0.8;
}

/* Solution Workflow Diagram */
.solution-workflow-section {
    margin-top: 3rem;
    padding-top: 3rem;
    border-top: 1px solid var(--border);
}

/* Solution Section Fullscreen Wrapper */
.solution-section-fullscreen {
    position: relative;
}

.solution-section-fullscreen.fullscreen-mode {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    z-index: 9999;
    background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);
    padding: 2rem;
    overflow: auto;
    display: flex;
    flex-direction: column;
}

.solution-section-fullscreen.fullscreen-mode .solution-combined-view {
    flex: 1;
    display: flex;
    flex-direction: row;
    gap: 2rem;
}

.solution-section-fullscreen.fullscreen-mode .future-state {
    width: 320px;
    flex-shrink: 0;
}

.solution-section-fullscreen.fullscreen-mode .solution-workflow-container {
    flex: 1;
    display: flex;
    flex-direction: column;
}

.solution-section-fullscreen.fullscreen-mode .sol-wf-svg-wrapper {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    min-height: 0;
}

.solution-section-fullscreen.fullscreen-mode .sol-wf-svg {
    width: 100%;
    height: 100%;
    max-height: calc(100vh - 300px);
}

.solution-section-fullscreen.fullscreen-mode .sol-workflow-status-bar {
    margin-top: 1rem;
    flex-shrink: 0;
}

/* Solution Combined View - mirrors problem-combined-view */
.solution-combined-view {
    display: grid;
    grid-template-columns: 300px 1fr;
    gap: 2rem;
    margin-bottom: 1rem;
}

@media (max-width: 1100px) {
    .solution-combined-view {
        grid-template-columns: 1fr;
    }
}

.future-state {
    background: linear-gradient(135deg, #ecfdf5 0%, #d1fae5 100%);
    border: 2px solid #10b981;
    border-radius: 16px;
    padding: 1.5rem;
}

.future-state h3 {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    font-size: 1.1rem;
    font-weight: 700;
    color: #059669;
    margin-bottom: 1.25rem;
    padding-bottom: 0.75rem;
    border-bottom: 1px solid #a7f3d0;
}

.future-state h3 svg {
    color: #10b981;
}

.future-state-grid {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
}

.future-state-item {
    display: flex;
    align-items: flex-start;
    gap: 0.75rem;
    font-size: 0.85rem;
    color: #065f46;
    line-height: 1.4;
}

.future-state-item .state-icon {
    width: 28px;
    height: 28px;
    min-width: 28px;
    background: #10b981;
    border-radius: 6px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.future-state-item .state-icon svg {
    color: white;
}

.solution-combined-view .workflow-container {
    margin-top: 0;
    flex: 1;
    min-width: 0;
    border-color: #10b981;
}

.solution-workflow-container {
    background: white;
    border: 2px solid #10b981;
    border-radius: 20px;
    padding: 1.5rem;
    overflow: hidden;
}

.solution-workflow-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1.5rem;
    flex-wrap: wrap;
    gap: 1rem;
}

.solution-workflow-title {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    font-size: 1.25rem;
    font-weight: 700;
    color: var(--text-primary);
}

.solution-workflow-title svg {
    width: 24px;
    height: 24px;
    color: #10b981;
}

/* Solution workflow legend */
.solution-workflow-legend {
    display: flex;
    justify-content: center;
    gap: 2rem;
    margin-top: 1.5rem;
    padding-top: 1rem;
    border-top: 1px solid #e2e8f0;
}

.solution-workflow-legend .legend-item {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.8rem;
    color: #64748b;
}

.solution-workflow-legend .legend-color {
    width: 14px;
    height: 14px;
    border-radius: 4px;
}

.solution-workflow-legend .legend-color.source {
    background: #ecfdf5;
    border: 2px solid #10b981;
}

.solution-workflow-legend .legend-color.ai-core {
    background: linear-gradient(135deg, #10b981, #059669);
}

.solution-workflow-legend .legend-color.output {
    background: #059669;
}

.sol-wf-svg {
    width: 100%;
    height: auto;
    display: block;
}

/* Solution workflow node styles */
.sol-wf-node {
    fill: white;
    stroke: #e2e8f0;
    stroke-width: 2;
}

.sol-wf-node-source {
    fill: #ecfdf5;
    stroke: #10b981;
}

.sol-wf-node-ai {
    fill: linear-gradient(135deg, #10b981, #059669);
    stroke: #059669;
}

.sol-wf-node-success {
    fill: #ecfdf5;
    stroke: #10b981;
}

.sol-wf-text {
    font-family: 'Inter', sans-serif;
    font-size: 11px;
    font-weight: 600;
    fill: #334155;
    text-anchor: middle;
}

.sol-wf-text-small {
    font-family: 'Inter', sans-serif;
    font-size: 9px;
    fill: #64748b;
    text-anchor: middle;
}

.sol-wf-label {
    font-family: 'Inter', sans-serif;
    font-size: 11px;
    font-weight: 700;
    fill: #10b981;
    text-anchor: middle;
    letter-spacing: 1px;
}

.sol-wf-ai-glow {
    fill: url(#aiGlowGradient);
    opacity: 0.15;
}

.sol-wf-time-badge {
    fill: #ecfdf5;
    stroke: #10b981;
    stroke-width: 2;
}

.workflow-comparison {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 2rem;
    margin-top: 2rem;
}

.workflow-comparison-label {
    text-align: center;
    font-size: 0.9rem;
    font-weight: 600;
    padding: 0.75rem;
    border-radius: 8px;
    margin-bottom: 1rem;
}

.workflow-comparison-label.before {
    background: #fef2f2;
    color: #dc2626;
}

.workflow-comparison-label.after {
    background: #ecfdf5;
    color: #059669;
}

@media (max-width: 900px) {
    .workflow-comparison {
        grid-template-columns: 1fr;
    }
}

/* Solution workflow animation styles */
.sol-wf-source-node rect {
    transition: all 0.3s ease;
}

.sol-wf-source-node.active rect {
    fill: #d1fae5;
    stroke: #10b981;
    stroke-width: 3;
    filter: drop-shadow(0 0 8px rgba(16, 185, 129, 0.4));
}

.sol-wf-arrow {
    fill: none;
    stroke: #94a3b8;
    stroke-width: 2;
    stroke-linecap: round;
    transition: stroke 0.3s ease;
}

.sol-wf-arrow.animated {
    stroke: #10b981;
    stroke-dasharray: 8 4;
    animation: solFlowDash 0.4s linear infinite;
}

@keyframes solFlowDash {
    to { stroke-dashoffset: -24; }
}

/* Pause all animations when SVG has paused class */
#sol-workflow-diagram.paused,
#sol-workflow-diagram.paused * {
    animation-play-state: paused !important;
}

.sol-wf-ai-core {
    transition: all 0.3s ease;
}

.sol-wf-ai-core.active {
    filter: drop-shadow(0 0 20px rgba(16, 185, 129, 0.6));
}

.sol-wf-ai-core.active rect {
    animation: aiPulse 1.5s ease-in-out infinite;
}

@keyframes aiPulse {
    0%, 100% { filter: brightness(1); }
    50% { filter: brightness(1.2); }
}

.sol-wf-output-node {
    transition: all 0.4s ease;
}

.sol-wf-output-node.active rect {
    filter: drop-shadow(0 0 10px rgba(16, 185, 129, 0.4));
    animation: outputPulse 0.5s ease-in-out;
}

@keyframes outputPulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.02); }
}

.sol-wf-outcome-node {
    transition: all 0.3s ease;
}

.sol-wf-outcome-node.active rect {
    filter: drop-shadow(0 0 12px rgba(5, 150, 105, 0.6));
    animation: successGlow 1s ease-in-out;
}

@keyframes successGlow {
    0% { filter: brightness(1); }
    50% { filter: brightness(1.3) drop-shadow(0 0 10px rgba(5, 150, 105, 0.5)); }
    100% { filter: brightness(1); }
}

.sol-wf-time-badge-group {
    transition: all 0.4s ease;
}

.sol-wf-time-badge-group.active {
    filter: drop-shadow(0 0 8px rgba(5, 150, 105, 0.5));
}

.sol-wf-glow {
    opacity: 0.1;
    transition: opacity 0.5s ease;
}

.sol-wf-glow.active {
    opacity: 0.2;
    animation: glowPulse 2s ease-in-out infinite;
}

@keyframes glowPulse {
    0%, 100% { opacity: 0.1; }
    50% { opacity: 0.2; }
}

/* Solution workflow status bar */
.sol-workflow-status-bar {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 1rem 1.5rem;
    background: #f0fdf4;
    border: 1px solid #bbf7d0;
    border-radius: 12px;
    margin-top: 1rem;
}

.sol-status-indicator {
    width: 10px;
    height: 10px;
    border-radius: 50%;
    background: #94a3b8;
}

.sol-status-indicator.running {
    background: #10b981;
    animation: pulse 1s ease-in-out infinite;
}

.sol-status-indicator.complete {
    background: #059669;
}

.sol-status-text {
    font-size: 0.9rem;
    color: #334155;
}

/* ========================================
   ARCHITECTURE DIAGRAM
   ======================================== */
.architecture-section {
    background: var(--bg-dark);
    color: white;
    overflow: hidden;
}

.architecture-section .section-title {
    color: white;
}

.architecture-section .section-subtitle {
    color: rgba(255,255,255,0.7);
}

.arch-container {
    background: rgba(255,255,255,0.03);
    border: 1px solid rgba(255,255,255,0.1);
    border-radius: 24px;
    padding: 2rem;
    margin-top: 2rem;
}

.arch-svg-wrapper {
    width: 100%;
    overflow-x: auto;
}

.arch-svg {
    min-width: 900px;
    width: 100%;
    height: auto;
}

/* SVG Styling */
.arch-layer {
    fill: rgba(255,255,255,0.05);
    stroke: rgba(255,255,255,0.2);
    stroke-width: 2;
    rx: 12;
}

.arch-component {
    fill: rgba(30, 58, 95, 0.9);
    stroke: rgba(245, 158, 11, 0.6);
    stroke-width: 2;
}

.arch-component:hover {
    fill: rgba(30, 58, 95, 1);
    stroke: var(--accent);
    stroke-width: 3;
    cursor: pointer;
}

.arch-text {
    fill: white;
    font-family: 'Inter', sans-serif;
    font-size: 11px;
    font-weight: 600;
    text-anchor: middle;
}

.arch-label {
    fill: rgba(255,255,255,0.6);
    font-family: 'Inter', sans-serif;
    font-size: 10px;
    font-weight: 500;
    text-anchor: middle;
    text-transform: uppercase;
    letter-spacing: 0.1em;
}

.arch-flow {
    stroke: var(--accent);
    stroke-width: 2;
    fill: none;
    stroke-dasharray: 8 4;
    animation: flowDash 1.5s linear infinite;
}

@keyframes flowDash {
    to { stroke-dashoffset: -24; }
}

.arch-arrow {
    fill: var(--accent);
}

/* Enterprise Architecture Styles */
.arch-zone-title {
    fill: #0078D4;
    font-family: 'Inter', sans-serif;
    font-size: 13px;
    font-weight: 700;
    text-anchor: middle;
    text-transform: uppercase;
    letter-spacing: 0.08em;
}

.arch-azure-box {
    fill: rgba(0, 120, 212, 0.08);
    stroke: #0078D4;
    stroke-width: 2;
    transition: all 0.3s ease;
}

.arch-azure-box:hover {
    fill: rgba(0, 120, 212, 0.15);
    stroke: #50E6FF;
    stroke-width: 3;
    cursor: pointer;
    filter: drop-shadow(0 4px 12px rgba(0, 120, 212, 0.4));
}

.arch-security-box {
    fill: rgba(216, 59, 1, 0.05);
    stroke: #D83B01;
    stroke-width: 2;
    transition: all 0.3s ease;
}

.arch-security-box:hover {
    fill: rgba(216, 59, 1, 0.12);
    stroke: #F78200;
    stroke-width: 3;
    cursor: pointer;
}

.arch-component-title {
    fill: #FFFFFF;
    font-family: 'Inter', sans-serif;
    font-size: 12px;
    font-weight: 700;
    text-anchor: middle;
}

.arch-component-subtitle {
    fill: rgba(255, 255, 255, 0.8);
    font-family: 'Inter', sans-serif;
    font-size: 10px;
    font-weight: 500;
    text-anchor: middle;
}

.arch-component-detail {
    fill: rgba(255, 255, 255, 0.6);
    font-family: 'Inter', sans-serif;
    font-size: 9px;
    font-weight: 400;
    text-anchor: middle;
    font-style: italic;
}

.arch-flow-main {
    stroke: #0078D4;
    stroke-width: 3;
    fill: none;
    opacity: 0.7;
}

.arch-footer-text {
    fill: rgba(255, 255, 255, 0.5);
    font-family: 'Inter', sans-serif;
    font-size: 10px;
    font-weight: 400;
    text-anchor: middle;
}

/* ========================================
   ARCHITECTURE DETAILS ACCORDION
   ======================================== */
.arch-details {
    max-width: 95%;
    margin: 1rem auto;
    padding: 0 0.5rem;
}

.arch-accordion {
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
}

.arch-detail-section {
    background: rgba(255, 255, 255, 0.03);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 4px;
    overflow: hidden;
    transition: all 0.3s ease;
}

.arch-detail-section[open] {
    background: rgba(255, 255, 255, 0.05);
    border-color: rgba(96, 165, 250, 0.3);
}

.arch-detail-header {
    padding: 0.5rem 0.75rem;
    cursor: pointer;
    user-select: none;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-weight: 600;
    font-size: 0.95rem;
    color: #e2e8f0;
    background: rgba(0, 0, 0, 0.2);
    transition: all 0.2s ease;
    list-style: none;
}

.arch-detail-header::-webkit-details-marker {
    display: none;
}

.arch-detail-header::before {
    content: 'â–¶';
    font-size: 0.7rem;
    color: #60a5fa;
    transition: transform 0.3s ease;
    flex-shrink: 0;
}

.arch-detail-section[open] .arch-detail-header::before {
    transform: rotate(90deg);
}

.arch-detail-header:hover {
    background: rgba(96, 165, 250, 0.1);
    color: #60a5fa;
}

.arch-detail-icon {
    font-size: 1.1rem;
    flex-shrink: 0;
}

.arch-detail-title {
    flex: 1;
}

.arch-detail-content {
    padding: 0.75rem 1.5rem 0.75rem 1rem;
    color: #1e293b;
    line-height: 1.5;
    font-size: 0.95rem;
}

.arch-detail-content h4 {
    color: #60a5fa;
    font-size: 0.95rem;
    margin: 0.75rem 0 0.35rem 0;
    font-weight: 600;
}

.arch-detail-content h4:first-child {
    margin-top: 0;
}

.arch-detail-content p {
    margin: 0.35rem 0;
}

.arch-detail-content ul, .arch-detail-content ol {
    margin: 0.35rem 0;
    padding-left: 1rem;
}

.arch-detail-content li {
    margin: 0.25rem 0;
    break-inside: avoid;
}

.arch-detail-content strong {
    color: #0f172a;
    font-weight: 600;
}

.arch-detail-content code {
    background: rgba(0, 0, 0, 0.3);
    padding: 2px 6px;
    border-radius: 4px;
    color: #fbbf24;
    font-family: 'Courier New', monospace;
    font-size: 0.9em;
}

/* ========================================
   CLOUD PROVIDER TABS
   ======================================== */
.cloud-section {
    background: white;
}

.cloud-tabs {
    display: flex;
    gap: 0.5rem;
    justify-content: center;
    margin-bottom: 2rem;
    flex-wrap: wrap;
}

.cloud-tab {
    padding: 1rem 2rem;
    border: 2px solid var(--border);
    border-radius: 12px;
    background: white;
    cursor: pointer;
    transition: all 0.3s;
    display: flex;
    align-items: center;
    gap: 0.75rem;
    font-weight: 600;
    font-size: 0.95rem;
    color: var(--text-secondary);
}

.cloud-tab:hover {
    border-color: var(--text-muted);
}

.cloud-tab.active[data-cloud="azure"] {
    border-color: var(--azure);
    background: linear-gradient(135deg, rgba(0, 120, 212, 0.1) 0%, rgba(0, 120, 212, 0.05) 100%);
    color: var(--azure);
}

.cloud-tab.active[data-cloud="aws"] {
    border-color: var(--aws);
    background: linear-gradient(135deg, rgba(255, 153, 0, 0.1) 0%, rgba(255, 153, 0, 0.05) 100%);
    color: #c27400;
}

.cloud-tab.active[data-cloud="gcp"] {
    border-color: var(--gcp);
    background: linear-gradient(135deg, rgba(66, 133, 244, 0.1) 0%, rgba(66, 133, 244, 0.05) 100%);
    color: var(--gcp);
}

.cloud-tab svg {
    width: 28px;
    height: 28px;
}

.cloud-content {
    display: none;
}

.cloud-content.active {
    display: block;
    animation: fadeIn 0.4s ease;
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
}

.cloud-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 1.5rem;
}

.cloud-card {
    background: var(--bg-light);
    border-radius: 16px;
    padding: 1.5rem;
    border: 1px solid var(--border);
}

.cloud-card h4 {
    font-size: 0.75rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    color: var(--text-muted);
    margin-bottom: 1rem;
}

.service-list {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
}

.service-item {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 0.75rem;
    background: white;
    border-radius: 8px;
    border: 1px solid var(--border);
}

.service-icon {
    width: 36px;
    height: 36px;
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.25rem;
}

.azure .service-icon { background: rgba(0, 120, 212, 0.1); }
.aws .service-icon { background: rgba(255, 153, 0, 0.1); }
.gcp .service-icon { background: rgba(66, 133, 244, 0.1); }

.service-info h5 {
    font-size: 0.9rem;
    font-weight: 600;
    color: var(--text-primary);
}

.service-info p {
    font-size: 0.8rem;
    color: var(--text-secondary);
}

/* ========================================
   TECH STACK
   ======================================== */
.tech-section {
    background: linear-gradient(180deg, var(--bg-light) 0%, white 100%);
}

.tech-categories {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 1.5rem;
}

.tech-category {
    background: white;
    border: 1px solid var(--border);
    border-radius: 16px;
    padding: 1.5rem;
    transition: all 0.3s;
}

.tech-category:hover {
    box-shadow: var(--card-shadow-lg);
    transform: translateY(-4px);
}

.tech-category h4 {
    font-size: 1rem;
    font-weight: 700;
    color: var(--text-primary);
    margin-bottom: 1rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.tech-category h4 span {
    font-size: 1.25rem;
}

.tech-tags {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
}

.tech-tag {
    background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
    color: white;
    padding: 0.4rem 0.85rem;
    border-radius: 50px;
    font-size: 0.8rem;
    font-weight: 500;
}

.tech-tag.highlight {
    background: linear-gradient(135deg, var(--accent) 0%, var(--accent-light) 100%);
    color: var(--primary-dark);
}

/* ========================================
   ROI MODEL
   ======================================== */
.roi-section {
    background: white;
}

.roi-grid {
    display: grid;
    grid-template-columns: 1fr 1fr 1fr;
    gap: 2rem;
}

@media (max-width: 1200px) {
    .roi-grid { grid-template-columns: 1fr; }
}

.roi-card {
    border-radius: 20px;
    padding: 2rem;
}

.roi-status-quo {
    background: linear-gradient(135deg, #fffbeb 0%, #fef3c7 100%);
    border: 2px solid #fbbf24;
}

.roi-costs {
    background: linear-gradient(135deg, #fef2f2 0%, #fff1f2 100%);
    border: 1px solid #fecaca;
}

.roi-benefits {
    background: linear-gradient(135deg, #ecfdf5 0%, #f0fdf4 100%);
    border: 1px solid #a7f3d0;
}

.roi-card h3 {
    font-size: 1.25rem;
    font-weight: 700;
    margin-bottom: 1.5rem;
    display: flex;
    align-items: center;
    gap: 0.75rem;
}

.roi-status-quo h3 { color: var(--accent); }
.roi-costs h3 { color: var(--danger); }
.roi-benefits h3 { color: var(--success); }

.roi-items {
    display: flex;
    flex-direction: column;
    gap: 1rem;
}

.roi-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1rem;
    background: white;
    border-radius: 10px;
    box-shadow: 0 1px 3px rgba(0,0,0,0.1);
}

.roi-item-label {
    font-weight: 500;
    color: var(--text-primary);
}

.roi-item-value {
    font-weight: 700;
    font-size: 1.1rem;
}

.roi-status-quo .roi-item-value { color: var(--accent); }
.roi-costs .roi-item-value { color: var(--danger); }
.roi-benefits .roi-item-value { color: var(--success); }

.roi-total {
    margin-top: 1.5rem;
    padding-top: 1.5rem;
    border-top: 2px dashed;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.roi-status-quo .roi-total { border-color: #fbbf24; }
.roi-costs .roi-total { border-color: #fecaca; }
.roi-benefits .roi-total { border-color: #a7f3d0; }

.roi-total-label {
    font-weight: 700;
    font-size: 1.1rem;
    color: var(--text-primary);
}

.roi-total-value {
    font-weight: 800;
    font-size: 1.5rem;
}

.roi-total-sublabel {
    display: block;
    font-size: 0.75rem;
    color: #64748b;
    margin-top: 0.25rem;
}

.roi-total-cumulative {
    margin-top: 1rem;
    padding-top: 1rem;
    border-top: 2px dashed rgba(34, 197, 94, 0.3);
}

.roi-total-cumulative .roi-total-label {
    color: var(--success);
    font-weight: 700;
}

.roi-total-cumulative .roi-total-value {
    font-size: 1.75rem;
}

.roi-status-quo .roi-total-value { color: var(--accent); }
.roi-costs .roi-total-value { color: var(--danger); }
.roi-benefits .roi-total-value { color: var(--success); }

/* ROI Summary */
.roi-summary {
    margin-top: 3rem;
    background: linear-gradient(135deg, var(--primary-dark) 0%, var(--primary) 100%);
    border-radius: 20px;
    padding: 2.5rem;
    color: white;
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 2rem;
    text-align: center;
    justify-items: center;
}

@media (max-width: 900px) {
    .roi-summary {
        grid-template-columns: repeat(2, 1fr);
    }
}

@media (max-width: 500px) {
    .roi-summary {
        grid-template-columns: 1fr;
    }
}

.roi-metric {
    padding: 1rem;
}

.roi-metric-value {
    font-size: 3rem;
    font-weight: 800;
    color: var(--accent);
    line-height: 1;
    margin-bottom: 0.5rem;
}

.roi-metric-label {
    font-size: 0.95rem;
    font-weight: 600;
    opacity: 0.9;
}

/* Calculation Breakdown Styles */
.calculation-breakdown {
    margin-top: 1.5rem;
    background: rgba(255, 255, 255, 0.05);
    border-radius: 12px;
    border: 1px solid rgba(255, 255, 255, 0.1);
    overflow: hidden;
    width: 100%;
    box-sizing: border-box;
}

.calculation-breakdown-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0.85rem 1rem;
    cursor: pointer;
    transition: background 0.2s;
}

.calculation-breakdown-header:hover {
    background: rgba(255, 255, 255, 0.05);
}

.calculation-breakdown-header h4 {
    font-size: 0.85rem;
    font-weight: 600;
    color: white;
    margin: 0;
    display: flex;
    align-items: center;
    gap: 0.4rem;
}

.calculation-breakdown-header svg {
    width: 16px;
    height: 16px;
    transition: transform 0.3s;
}

.calculation-breakdown.expanded .calculation-breakdown-header svg {
    transform: rotate(180deg);
}

.calculation-breakdown-content {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.3s ease;
}

.calculation-breakdown.expanded .calculation-breakdown-content {
    max-height: 800px;
}

.calculation-formulas {
    padding: 0.75rem;
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 0.75rem;
    width: 100%;
    box-sizing: border-box;
}

@media (max-width: 900px) {
    .calculation-formulas {
        grid-template-columns: 1fr;
        padding: 0.5rem;
    }
}

.formula-card {
    background: rgba(255, 255, 255, 0.08);
    border-radius: 8px;
    padding: 0.85rem 1rem;
    border: 1px solid rgba(255, 255, 255, 0.1);
    width: 100%;
    box-sizing: border-box;
}

.formula-card h5 {
    font-size: 0.8rem;
    font-weight: 700;
    color: var(--accent);
    margin: 0 0 0.4rem 0;
}

.formula-equation {
    font-family: 'Monaco', 'Consolas', monospace;
    font-size: 0.7rem;
    color: rgba(255, 255, 255, 0.95);
    background: rgba(0, 0, 0, 0.2);
    padding: 0.45rem 0.65rem;
    border-radius: 6px;
    margin-bottom: 0.4rem;
    line-height: 1.45;
}

.formula-values {
    font-size: 0.7rem;
    color: rgba(255, 255, 255, 0.8);
    line-height: 1.35;
}

.formula-values strong {
    color: var(--accent);
}

.formula-result {
    margin-top: 0.4rem;
    padding-top: 0.4rem;
    border-top: 1px solid rgba(255, 255, 255, 0.1);
    font-size: 0.75rem;
    font-weight: 600;
    color: white;
}

/* ROI Year-on-Year Chart */
.roi-chart-container {
    margin-top: 1.5rem;
    background: rgba(255, 255, 255, 0.05);
    border-radius: 12px;
    border: 1px solid rgba(255, 255, 255, 0.1);
    padding: 1rem;
    grid-column: 1 / -1;
    width: 100%;
    box-sizing: border-box;
}

.roi-chart-header {
    display: flex;
    align-items: flex-start;
    justify-content: space-between;
    margin-bottom: 1.25rem;
    flex-wrap: wrap;
    gap: 0.75rem;
    min-height: 40px;
}

.roi-chart-header h4 {
    font-size: 0.9rem;
    font-weight: 600;
    color: white;
    margin: 0;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.roi-chart-header h4 svg {
    width: 18px;
    height: 18px;
    color: var(--accent);
}

.roi-chart-legend {
    display: flex;
    gap: 0.75rem;
    font-size: 0.75rem;
    flex-shrink: 0;
}

.roi-chart-legend-item {
    display: flex;
    align-items: center;
    gap: 0.35rem;
    color: rgba(255, 255, 255, 0.8);
    white-space: nowrap;
}

.roi-chart-legend-color {
    width: 10px;
    height: 10px;
    border-radius: 2px;
}

.roi-chart-legend-color.cost { background: var(--danger); }
.roi-chart-legend-color.benefit { background: var(--success); }
.roi-chart-legend-color.cumulative { background: var(--accent); }
.roi-chart-legend-color.net { background: #3b82f6; }

.roi-chart {
    position: relative;
    height: 320px;
    width: 100%;
    display: flex;
    align-items: flex-end;
    gap: 0;
    padding: 30px 5px 30px 50px;
    box-sizing: border-box;
}

.roi-chart-y-axis {
    position: absolute;
    left: 0;
    top: 30px;
    bottom: 30px;
    width: 50px;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    align-items: flex-end;
    padding-right: 6px;
    font-size: 0.65rem;
    color: rgba(255, 255, 255, 0.6);
}

.roi-chart-gridlines {
    position: absolute;
    left: 50px;
    right: 5px;
    top: 30px;
    bottom: 30px;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    pointer-events: none;
}

.roi-chart-gridline {
    border-top: 1px dashed rgba(255, 255, 255, 0.1);
    width: 100%;
}

.roi-chart-bars {
    display: flex;
    flex: 1;
    align-items: flex-end;
    justify-content: space-evenly;
    height: 100%;
    padding-bottom: 0;
    width: 100%;
}

.roi-chart-bar-group {
    display: flex;
    flex-direction: column;
    align-items: center;
    flex: 1;
    height: 100%;
    position: relative;
    max-width: 250px;
}

.roi-chart-bar-stack {
    position: relative;
    height: 100%;
    width: 100%;
    display: flex;
    justify-content: center;
    padding: 0 1%;
}

.roi-chart-bar {
    position: absolute;
    width: 70px;
    max-width: 70px;
    min-width: 35px;
    border-radius: 4px 4px 0 0;
    transition: height 0.4s ease, bottom 0.4s ease;
    left: 50%;
    transform: translateX(-50%);
}

.roi-chart-bar.cost {
    background: linear-gradient(180deg, var(--danger) 0%, #b91c1c 100%);
}

.roi-chart-bar.benefit {
    background: linear-gradient(180deg, var(--success) 0%, #15803d 100%);
}

.roi-chart-bar.cumulative {
    background: linear-gradient(180deg, var(--accent) 0%, #d97706 100%);
}

.roi-chart-bar.net {
    background: linear-gradient(180deg, #3b82f6 0%, #2563eb 100%);
}

.roi-chart-bar.net.negative {
    background: linear-gradient(0deg, #ef4444 0%, #dc2626 100%);
    border-radius: 0 0 4px 4px;
}

.roi-chart-bar-value {
    position: absolute;
    top: -18px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 0.6rem;
    font-weight: 600;
    color: white;
    white-space: nowrap;
    background: rgba(30, 58, 95, 0.8);
    padding: 1px 4px;
    border-radius: 3px;
}

.roi-chart-bar.negative .roi-chart-bar-value {
    top: auto;
    bottom: -18px;
}

.roi-chart-bar-label {
    position: absolute;
    bottom: -22px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 0.7rem;
    color: rgba(255, 255, 255, 0.8);
    font-weight: 500;
}

/* Line chart overlay */
.roi-chart-lines {
    position: absolute;
    left: 50px;
    right: 5px;
    top: 30px;
    bottom: 30px;
    pointer-events: none;
    z-index: 10;
}

.roi-chart-line {
    position: absolute;
    width: 100%;
    height: 100%;
}

.roi-chart-line svg {
    width: 100%;
    height: 100%;
}

.roi-chart-line path {
    fill: none;
    stroke-width: 2.5;
}

.roi-chart-line.status-quo path {
    stroke: #94a3b8;
    stroke-dasharray: 5, 5;
}

.roi-chart-line.costs path {
    stroke: var(--danger);
}

.roi-chart-line.benefits path {
    stroke: var(--success);
}

.roi-chart-dot {
    fill: white;
    stroke-width: 2;
}

.roi-chart-dot.status-quo { stroke: #94a3b8; }
.roi-chart-dot.costs { stroke: var(--danger); }
.roi-chart-dot.benefits { stroke: var(--success); }

/* Chart Tooltip */
.roi-chart-tooltip {
    position: absolute;
    background: rgba(30, 41, 59, 0.98);
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 8px;
    padding: 0.75rem;
    pointer-events: none;
    opacity: 0;
    transition: opacity 0.2s;
    z-index: 100;
    min-width: 200px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
}

.roi-chart-tooltip.active {
    opacity: 1;
}

.roi-chart-tooltip-title {
    font-size: 0.85rem;
    font-weight: 700;
    color: var(--accent);
    margin-bottom: 0.5rem;
    padding-bottom: 0.4rem;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.roi-chart-tooltip-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 0.75rem;
    margin: 0.35rem 0;
    gap: 1rem;
}

.roi-chart-tooltip-label {
    display: flex;
    align-items: center;
    gap: 0.4rem;
    color: rgba(255, 255, 255, 0.8);
}

.roi-chart-tooltip-dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
}

.roi-chart-tooltip-dot.status-quo { background: #94a3b8; }
.roi-chart-tooltip-dot.cost { background: var(--danger); }
.roi-chart-tooltip-dot.benefit { background: var(--success); }
.roi-chart-tooltip-dot.profit { background: #3b82f6; }

.roi-chart-tooltip-value {
    font-weight: 700;
    color: white;
}

.roi-chart-bar-group {
    cursor: pointer;
    transition: opacity 0.2s;
}

.roi-chart-bar-group:hover {
    opacity: 0.8;
}

.roi-chart-breakeven {
    position: absolute;
    left: 50px;
    right: 5px;
    border-top: 2px dashed var(--accent);
    z-index: 10;
}

.roi-chart-breakeven-label {
    position: absolute;
    right: 0;
    top: -20px;
    font-size: 0.7rem;
    color: var(--accent);
    font-weight: 600;
    background: rgba(30, 58, 95, 0.9);
    padding: 2px 8px;
    border-radius: 4px;
}

/* Interactive ROI Calculator Styles */
.roi-calculator-header {
    background: linear-gradient(135deg, #1e3a5f 0%, #2d5a87 100%);
    border-radius: 20px;
    padding: 2rem;
    margin-bottom: 2rem;
    color: white;
}

.roi-calculator-header h3 {
    font-size: 1.1rem;
    font-weight: 600;
    margin-bottom: 1.5rem;
    display: flex;
    align-items: center;
    gap: 0.75rem;
}

.roi-calculator-header h3 svg {
    color: var(--accent);
}

.portfolio-input-group {
    display: grid;
    grid-template-columns: 1fr auto;
    gap: 1.5rem;
    align-items: end;
}

@media (max-width: 768px) {
    .portfolio-input-group {
        grid-template-columns: 1fr;
    }
}

.portfolio-slider-container {
    flex: 1;
}

.portfolio-slider-container label {
    display: block;
    font-size: 0.85rem;
    margin-bottom: 0.75rem;
    opacity: 0.9;
}

.portfolio-slider {
    width: 100%;
    height: 8px;
    border-radius: 4px;
    background: rgba(255,255,255,0.2);
    outline: none;
    -webkit-appearance: none;
    margin-bottom: 0.5rem;
}

.portfolio-slider::-webkit-slider-thumb {
    -webkit-appearance: none;
    width: 24px;
    height: 24px;
    border-radius: 50%;
    background: var(--accent);
    cursor: pointer;
    box-shadow: 0 2px 8px rgba(0,0,0,0.3);
    transition: transform 0.2s;
}

.portfolio-slider::-webkit-slider-thumb:hover {
    transform: scale(1.1);
}

.portfolio-slider::-moz-range-thumb {
    width: 24px;
    height: 24px;
    border-radius: 50%;
    background: var(--accent);
    cursor: pointer;
    border: none;
}

.slider-labels {
    display: flex;
    justify-content: space-between;
    font-size: 0.75rem;
    opacity: 0.7;
}

.slider-ticks {
    position: relative;
    height: 30px;
    margin-top: 8px;
}

.tick {
    position: absolute;
    transform: translateX(-50%);
    display: flex;
    flex-direction: column;
    align-items: center;
}

.tick:first-child {
    transform: translateX(0);
}

.tick:last-child {
    transform: translateX(-100%);
}

.tick-mark {
    width: 2px;
    height: 8px;
    background: rgba(255,255,255,0.5);
    margin-bottom: 4px;
}

.tick-label {
    font-size: 0.7rem;
    opacity: 0.8;
    white-space: nowrap;
}

.portfolio-value-display {
    background: rgba(255,255,255,0.1);
    border: 2px solid var(--accent);
    border-radius: 12px;
    padding: 1rem 1.5rem;
    text-align: center;
    min-width: 180px;
}

.portfolio-value-display .value-label {
    font-size: 0.75rem;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    opacity: 0.8;
    margin-bottom: 0.25rem;
}

.portfolio-value-display .value-amount {
    font-size: 2rem;
    font-weight: 800;
    color: var(--accent);
}

/* ROI Config Grid */
.roi-config-grid {
    display: grid;
    grid-template-columns: 1fr auto auto;
    gap: 2rem;
    align-items: end;
}

@media (max-width: 1100px) {
    .roi-config-grid {
        grid-template-columns: 1fr;
        gap: 1.5rem;
    }
}

.roi-config-item {
    min-width: 0;
}

.roi-config-item label {
    display: block;
    font-size: 0.85rem;
    margin-bottom: 0.75rem;
    opacity: 0.9;
}

.duration-config {
    min-width: 280px;
}

.duration-buttons {
    display: flex;
    gap: 0.5rem;
}

.duration-btn {
    flex: 1;
    padding: 0.6rem 0.8rem;
    background: rgba(255,255,255,0.1);
    border: 2px solid rgba(255,255,255,0.2);
    border-radius: 8px;
    color: white;
    font-size: 0.85rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s;
}

.duration-btn:hover {
    background: rgba(255,255,255,0.2);
    border-color: rgba(255,255,255,0.4);
}

.duration-btn.active {
    background: var(--accent);
    border-color: var(--accent);
    color: #1e3a5f;
}

.roi-config-summary {
    min-width: 200px;
}

.config-display {
    background: rgba(255,255,255,0.1);
    border: 2px solid var(--accent);
    border-radius: 12px;
    padding: 1rem;
    display: flex;
    gap: 1.5rem;
}

.config-display-item {
    text-align: center;
}

.config-label {
    display: block;
    font-size: 0.7rem;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    opacity: 0.8;
    margin-bottom: 0.25rem;
}

.config-value {
    font-size: 1.25rem;
    font-weight: 800;
    color: var(--accent);
}

/* Item Slider Styles */
.roi-item-slider-row {
    display: flex;
    align-items: center;
    gap: 1rem;
    margin-top: 0.75rem;
    padding: 0.75rem;
    background: white;
    border-radius: 8px;
    border: 1px solid #e2e8f0;
}

.roi-item-slider-label {
    font-size: 0.8rem;
    color: #64748b;
    min-width: 70px;
}

.roi-item-slider {
    flex: 1;
    height: 6px;
    border-radius: 3px;
    background: #e2e8f0;
    -webkit-appearance: none;
    outline: none;
}

.roi-status-quo .roi-item-slider::-webkit-slider-thumb {
    -webkit-appearance: none;
    width: 18px;
    height: 18px;
    border-radius: 50%;
    background: #f59e0b;
    cursor: pointer;
    box-shadow: 0 2px 4px rgba(0,0,0,0.2);
}

.roi-costs .roi-item-slider::-webkit-slider-thumb {
    -webkit-appearance: none;
    width: 18px;
    height: 18px;
    border-radius: 50%;
    background: #ef4444;
    cursor: pointer;
    box-shadow: 0 2px 4px rgba(0,0,0,0.2);
}

.roi-benefits .roi-item-slider::-webkit-slider-thumb {
    -webkit-appearance: none;
    width: 18px;
    height: 18px;
    border-radius: 50%;
    background: #10b981;
    cursor: pointer;
    box-shadow: 0 2px 4px rgba(0,0,0,0.2);
}

.roi-item-slider-value {
    min-width: 50px;
    text-align: right;
    font-weight: 700;
    font-size: 0.9rem;
}

.roi-status-quo .roi-item-slider-value { color: #f59e0b; }
.roi-costs .roi-item-slider-value { color: #ef4444; }
.roi-benefits .roi-item-slider-value { color: #10b981; }

/* Expandable ROI Items */
.roi-item-expandable {
    background: white;
    border-radius: 12px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.08);
    overflow: hidden;
    transition: all 0.3s ease;
}

.roi-item-expandable:hover {
    box-shadow: 0 4px 16px rgba(0,0,0,0.12);
}

.roi-item-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1rem 1.25rem;
    cursor: pointer;
    transition: background 0.2s;
}

.roi-item-header:hover {
    background: rgba(0,0,0,0.02);
}

.roi-item-header-left {
    display: flex;
    align-items: center;
    gap: 0.75rem;
}

.roi-item-toggle {
    width: 24px;
    height: 24px;
    border-radius: 6px;
    background: #f1f5f9;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s ease;
}

.roi-item-toggle svg {
    width: 14px;
    height: 14px;
    color: #64748b;
    transition: transform 0.3s ease;
}

.roi-item-expandable.expanded .roi-item-toggle {
    background: var(--primary);
}

.roi-item-expandable.expanded .roi-item-toggle svg {
    color: white;
    transform: rotate(180deg);
}

.roi-item-name {
    font-weight: 600;
    color: var(--text-primary);
}

.roi-item-header-right {
    display: flex;
    align-items: center;
    gap: 1rem;
}

.roi-item-amount {
    font-weight: 700;
    font-size: 1.1rem;
}

.roi-status-quo .roi-item-amount { color: var(--accent); }
.roi-costs .roi-item-amount { color: var(--danger); }
.roi-benefits .roi-item-amount { color: var(--success); }

.roi-item-percent {
    font-size: 0.8rem;
    padding: 0.25rem 0.5rem;
    border-radius: 4px;
    font-weight: 600;
}

.roi-status-quo .roi-item-percent {
    background: #fffbeb;
    color: var(--accent);
}

.roi-costs .roi-item-percent {
    background: #fef2f2;
    color: var(--danger);
}

.roi-benefits .roi-item-percent {
    background: #ecfdf5;
    color: var(--success);
}

/* Drill-down Details */
.roi-item-details {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.4s ease, padding 0.3s ease;
    background: #f8fafc;
    border-top: 1px solid #e2e8f0;
}

.roi-item-expandable.expanded .roi-item-details {
    max-height: 500px;
    padding: 1rem 1.25rem;
}

.roi-detail-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0.5rem 0;
    font-size: 0.9rem;
    border-bottom: 1px dashed #e2e8f0;
}

.roi-detail-row:last-child {
    border-bottom: none;
}

.roi-detail-label {
    color: #64748b;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.roi-detail-label svg {
    width: 14px;
    height: 14px;
}

.roi-detail-value {
    font-weight: 600;
    color: var(--text-primary);
}

.roi-detail-formula {
    margin-top: 0.75rem;
    padding: 0.75rem;
    background: white;
    border-radius: 8px;
    font-size: 0.85rem;
    color: #64748b;
    border-left: 3px solid var(--primary);
}

.roi-detail-formula code {
    background: #e2e8f0;
    padding: 0.15rem 0.4rem;
    border-radius: 4px;
    font-family: 'Monaco', 'Consolas', monospace;
    font-size: 0.8rem;
}

/* Adjustable Input within Items */
.roi-adjust-row {
    display: flex;
    align-items: center;
    gap: 1rem;
    margin-top: 0.75rem;
    padding-top: 0.75rem;
    border-top: 1px solid #e2e8f0;
}

.roi-adjust-label {
    font-size: 0.85rem;
    color: #64748b;
    min-width: 80px;
}

.roi-adjust-slider {
    flex: 1;
    height: 6px;
    border-radius: 3px;
    background: #e2e8f0;
    -webkit-appearance: none;
    outline: none;
}

.roi-adjust-slider::-webkit-slider-thumb {
    -webkit-appearance: none;
    width: 18px;
    height: 18px;
    border-radius: 50%;
    background: var(--primary);
    cursor: pointer;
}

.roi-adjust-value {
    min-width: 60px;
    text-align: right;
    font-weight: 600;
    color: var(--primary);
}

/* Summary Metrics Animation */
.roi-metric-value {
    transition: all 0.3s ease;
}

.roi-metric-value.updating {
    transform: scale(1.05);
}

/* Reset Button */
.roi-reset-btn {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.5rem 1rem;
    background: rgba(255,255,255,0.1);
    border: 1px solid rgba(255,255,255,0.3);
    border-radius: 8px;
    color: white;
    font-size: 0.85rem;
    cursor: pointer;
    transition: all 0.2s;
    margin-left: auto;
}

.roi-reset-btn:hover {
    background: rgba(255,255,255,0.2);
}

.roi-reset-btn svg {
    width: 16px;
    height: 16px;
}

/* ========================================
   STRATEGIC CONSIDERATIONS
   ======================================== */
.strategy-section {
    background: var(--bg-light);
}

.strategy-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
    gap: 2rem;
}

.strategy-card {
    background: white;
    border: 1px solid var(--border);
    border-radius: 20px;
    padding: 2rem;
    transition: all 0.3s;
}

.strategy-card:hover {
    box-shadow: var(--card-shadow-lg);
}

.strategy-card h3 {
    font-size: 1.25rem;
    font-weight: 700;
    color: var(--text-primary);
    margin-bottom: 1.5rem;
    display: flex;
    align-items: center;
    gap: 0.75rem;
}

/* Build vs Buy */
.comparison-table {
    width: 100%;
    border-collapse: collapse;
}

.comparison-table th,
.comparison-table td {
    padding: 0.75rem;
    text-align: left;
    border-bottom: 1px solid var(--border);
    font-size: 0.875rem;
}

.comparison-table th {
    font-weight: 700;
    color: var(--text-primary);
    background: var(--bg-light);
}

.comparison-table td:nth-child(2) { color: var(--primary); }
.comparison-table td:nth-child(3) { color: var(--text-secondary); }

.verdict {
    margin-top: 1.5rem;
    padding: 1rem;
    background: linear-gradient(135deg, rgba(16, 185, 129, 0.1) 0%, rgba(16, 185, 129, 0.05) 100%);
    border: 1px solid rgba(16, 185, 129, 0.3);
    border-radius: 10px;
    display: flex;
    align-items: center;
    gap: 0.75rem;
}

.verdict-icon {
    width: 32px;
    height: 32px;
    background: var(--success);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
}

.verdict-text {
    font-weight: 600;
    color: var(--success);
}

/* Risk Matrix */
.risk-list {
    display: flex;
    flex-direction: column;
    gap: 1rem;
}

.risk-item {
    display: flex;
    gap: 1rem;
    padding: 1rem;
    background: var(--bg-light);
    border-radius: 10px;
    border-left: 4px solid;
}

.risk-item.high { border-color: var(--danger); }
.risk-item.medium { border-color: var(--accent); }
.risk-item.low { border-color: var(--success); }

.risk-level {
    font-size: 0.7rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    padding: 0.25rem 0.5rem;
    border-radius: 4px;
    align-self: flex-start;
}

.risk-item.high .risk-level { background: rgba(239, 68, 68, 0.1); color: var(--danger); }
.risk-item.medium .risk-level { background: rgba(245, 158, 11, 0.1); color: var(--accent); }
.risk-item.low .risk-level { background: rgba(16, 185, 129, 0.1); color: var(--success); }

.risk-content h4 {
    font-size: 0.95rem;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 0.25rem;
}

.risk-content p {
    font-size: 0.85rem;
    color: var(--text-secondary);
}

/* Roadmap */
.roadmap {
    position: relative;
    padding-left: 2rem;
}

.roadmap::before {
    content: '';
    position: absolute;
    left: 7px;
    top: 0;
    bottom: 0;
    width: 2px;
    background: linear-gradient(180deg, var(--primary) 0%, var(--accent) 100%);
}

.roadmap-item {
    position: relative;
    padding-bottom: 2rem;
}

.roadmap-item:last-child { padding-bottom: 0; }

.roadmap-dot {
    position: absolute;
    left: -2rem;
    top: 0;
    width: 16px;
    height: 16px;
    background: var(--primary);
    border: 3px solid white;
    border-radius: 50%;
    box-shadow: 0 0 0 3px var(--primary);
}

.roadmap-phase {
    font-size: 0.7rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    color: var(--accent);
    margin-bottom: 0.25rem;
}

.roadmap-title {
    font-size: 1rem;
    font-weight: 700;
    color: var(--text-primary);
    margin-bottom: 0.25rem;
}

.roadmap-desc {
    font-size: 0.85rem;
    color: var(--text-secondary);
}

/* ========================================
   FOOTER
   ======================================== */
.site-footer {
    background: #f8fafc;
    border-top: 1px solid #e2e8f0;
    padding: 1.5rem;
    text-align: center;
}

.site-footer p {
    color: #64748b;
    font-size: 0.875rem;
    margin: 0;
}

/* ========================================
   RESPONSIVE
   ======================================== */
@media (max-width: 1024px) {
    .problem-combined-view {
        flex-direction: column;
    }
    .current-state {
        flex: none;
        width: 100%;
    }
    .state-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        flex-direction: row;
    }
}

@media (max-width: 768px) {
    .hero { padding: 3rem 4%; }
    .hero-content { padding: 0 2%; }
    .hero-subtitle { max-width: 100%; }
    .hero h1 { font-size: 2rem; }
    .section { padding: 3rem 0; }
    .section-title { font-size: 1.75rem; }
    .section-subtitle { max-width: 100%; }
    .container { padding: 0 4%; }
    .strategy-grid { grid-template-columns: 1fr; }
    .section-tabs { padding: 0.75rem 2%; }
    .section-tab { padding: 0.6rem 0.8rem; font-size: 0.75rem; }
    .problem-combined-view { gap: 1rem; }
    .current-state { padding: 1rem; }
    .state-grid { grid-template-columns: 1fr 1fr; }
    .workflow-status-bar { padding: 0.75rem 1rem; font-size: 0.85rem; }
}

/* ========================================
   SECTION TABS NAVIGATION
   ======================================== */
.section-tabs {
    position: sticky;
    top: 0;
    z-index: 100;
    background: linear-gradient(135deg, var(--primary-dark) 0%, var(--primary) 100%);
    padding: 1rem 5%;
    display: flex;
    gap: 0.5rem;
    justify-content: center;
    flex-wrap: wrap;
    box-shadow: 0 4px 20px rgba(0,0,0,0.3);
    border-bottom: 1px solid rgba(255,255,255,0.1);
}

.section-tab {
    padding: 0.75rem 1.25rem;
    border: 1px solid rgba(255,255,255,0.2);
    border-radius: 8px;
    background: rgba(255,255,255,0.05);
    cursor: pointer;
    transition: all 0.3s;
    font-weight: 600;
    font-size: 0.85rem;
    color: rgba(255,255,255,0.7);
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.section-tab:hover {
    background: rgba(255,255,255,0.1);
    border-color: rgba(255,255,255,0.3);
    color: white;
}

.section-tab.active {
    background: var(--accent);
    border-color: var(--accent);
    color: var(--primary-dark);
}

.section-tab svg {
    width: 16px;
    height: 16px;
}

/* Tab Content Visibility */
.tab-content {
    display: none;
}

.tab-content.active {
    display: block;
    animation: fadeInTab 0.4s ease;
}

@keyframes fadeInTab {
    from { opacity: 0; transform: translateY(15px); }
    to { opacity: 1; transform: translateY(0); }
}

/* ========================================
   WORKFLOW DIAGRAM
   ======================================== */
/* Workflow Container - Right Side */
.problem-combined-view .workflow-container {
    margin-top: 0;
    flex: 1;
    min-width: 0;
}

.workflow-container {
    background: white;
    border: 1px solid var(--border);
    border-radius: 20px;
    padding: 1.5rem;
    overflow: hidden;
}

.workflow-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 2rem;
    flex-wrap: wrap;
    gap: 1rem;
}

.workflow-title {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    font-size: 1.25rem;
    font-weight: 700;
    color: var(--text-primary);
}

.workflow-title svg {
    width: 24px;
    height: 24px;
    color: var(--danger);
}

.workflow-controls {
    display: flex;
    gap: 0.5rem;
}

.workflow-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    padding: 0.6rem 1.25rem;
    border: 2px solid var(--border);
    border-radius: 8px;
    background: white;
    font-weight: 600;
    font-size: 0.85rem;
    cursor: pointer;
    transition: all 0.2s;
}

.workflow-btn svg {
    width: 16px;
    height: 16px;
}

.workflow-btn.play {
    background: var(--success);
    border-color: var(--success);
    color: white;
}

.workflow-btn.play:hover {
    background: #0d9668;
}

.workflow-btn.pause {
    background: var(--accent);
    border-color: var(--accent);
    color: var(--primary-dark);
}

.workflow-btn.pause:hover {
    background: #e08e00;
}

.workflow-btn.stop {
    background: var(--danger);
    border-color: var(--danger);
    color: white;
}

.workflow-btn.stop:hover {
    background: #dc2626;
}

.workflow-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

.workflow-btn.fullscreen {
    background: var(--primary);
    border-color: var(--primary);
    color: white;
    margin-left: auto;
}

.workflow-btn.fullscreen:hover {
    background: var(--primary-dark);
}

/* Fullscreen mode styles - applied to children when parent wrapper is fullscreen */
.problem-section-fullscreen.fullscreen-mode .workflow-svg-wrapper {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 1rem;
    overflow: auto;
}

.problem-section-fullscreen.fullscreen-mode .workflow-svg {
    max-height: 60vh;
    min-width: auto;
    width: auto;
    max-width: 100%;
}

.problem-section-fullscreen.fullscreen-mode .workflow-legend {
    padding: 0.5rem 1rem;
}

.workflow-svg-wrapper {
    width: 100%;
    overflow-x: auto;
    padding: 1rem 0;
    -webkit-overflow-scrolling: touch;
    background: linear-gradient(180deg, #fafbfc 0%, white 100%);
    border-radius: 12px;
}

.workflow-svg {
    display: block;
    width: 100%;
    height: auto;
    min-height: 350px;
    max-height: 550px;
}

/* Paused state - stops all CSS animations */
.workflow-svg.paused * {
    animation-play-state: paused !important;
}

/* Workflow Node Styles */
.wf-node {
    fill: white;
    stroke: var(--border);
    stroke-width: 2;
    transition: all 0.3s ease;
    filter: drop-shadow(0 2px 4px rgba(0,0,0,0.05));
}

.wf-node.active {
    stroke-width: 3;
    filter: drop-shadow(0 4px 12px rgba(0, 0, 0, 0.15));
}

.wf-node-problem {
    fill: #fef2f2;
    stroke: #ef4444;
    stroke-width: 2;
}

.wf-node-problem.active {
    stroke: #dc2626;
    filter: drop-shadow(0 4px 12px rgba(239, 68, 68, 0.3));
}

.wf-node-delay {
    fill: #fffbeb;
    stroke: #f59e0b;
    stroke-width: 2;
}

.wf-node-delay.active {
    stroke: #d97706;
    filter: drop-shadow(0 4px 12px rgba(245, 158, 11, 0.3));
}

.wf-node-silo {
    fill: #f0f9ff;
    stroke: #0ea5e9;
    stroke-width: 2;
}

.wf-node-silo.active {
    stroke: #0284c7;
    filter: drop-shadow(0 4px 12px rgba(14, 165, 233, 0.3));
}

.wf-text {
    font-family: 'Inter', sans-serif;
    font-size: 12px;
    font-weight: 600;
    fill: #1e293b;
    text-anchor: middle;
    pointer-events: none;
}

.wf-text-small {
    font-family: 'Inter', sans-serif;
    font-size: 10px;
    font-weight: 500;
    fill: #64748b;
    text-anchor: middle;
}

.wf-label {
    font-family: 'Inter', sans-serif;
    font-size: 11px;
    font-weight: 700;
    fill: #94a3b8;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    text-anchor: middle;
}

/* Workflow Arrows */
.wf-arrow {
    stroke: #94a3b8;
    stroke-width: 2;
    fill: none;
    transition: stroke 0.3s ease;
}

.wf-arrow.animated {
    stroke: #ef4444;
    stroke-dasharray: 8 4;
    animation: wfFlowDash 0.6s linear infinite;
}

.wf-arrow.slow {
    stroke: #f59e0b;
    stroke-dasharray: 10 6;
    animation: wfFlowDash 1.5s linear infinite;
}

@keyframes wfFlowDash {
    to { stroke-dashoffset: -24; }
}

/* Data Packet Animation */
.wf-packet {
    opacity: 0;
}

.wf-packet.moving {
    opacity: 1;
}

.wf-packet circle {
    fill: var(--danger);
}

.wf-packet.delay circle {
    fill: var(--accent);
}

/* Problem Indicators */
.wf-problem-icon {
    opacity: 0;
    transition: opacity 0.3s;
}

.wf-problem-icon.visible {
    opacity: 1;
    animation: wfPulse 1.5s ease-in-out infinite;
}

@keyframes wfPulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.6; }
}

/* Delay Clock Animation - clocks positioned at top-right corner of delay boxes */
#wf-clock-1.spinning .wf-clock-hand {
    animation: wfClockSpin 2s linear infinite;
    transform-origin: 466px 174px;
}

#wf-clock-2.spinning .wf-clock-hand {
    animation: wfClockSpin 2s linear infinite;
    transform-origin: 706px 174px;
}

@keyframes wfClockSpin {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}

/* Bottleneck Animation */
.wf-bottleneck {
    opacity: 0;
}

.wf-bottleneck.visible {
    opacity: 1;
    animation: wfBottleneck 1s ease-in-out infinite;
}

@keyframes wfBottleneck {
    0%, 100% { fill: rgba(239, 68, 68, 0.2); }
    50% { fill: rgba(239, 68, 68, 0.5); }
}

/* Workflow Status - Full width bar below combined view */
.workflow-status-bar {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.75rem;
    margin-top: 1rem;
    padding: 1rem 1.5rem;
    background: white;
    border: 1px solid var(--border);
    border-radius: 12px;
}

.workflow-status {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.75rem;
    margin-top: 1.5rem;
    padding: 1rem;
    background: var(--bg-light);
    border-radius: 10px;
}

.status-indicator {
    width: 10px;
    height: 10px;
    border-radius: 50%;
    background: var(--text-muted);
}

.status-indicator.running {
    background: var(--success);
    animation: statusPulse 1s ease-in-out infinite;
}

.status-indicator.paused {
    background: var(--accent);
}

@keyframes statusPulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.5; }
}

.status-text {
    font-size: 0.9rem;
    font-weight: 600;
    color: var(--text-secondary);
}

.workflow-legend {
    display: flex;
    justify-content: center;
    gap: 2rem;
    margin-top: 1rem;
    flex-wrap: wrap;
}

.legend-item {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.8rem;
    color: var(--text-secondary);
}

.legend-color {
    width: 16px;
    height: 16px;
    border-radius: 4px;
}

.legend-color.problem { background: #fef2f2; border: 2px solid var(--danger); }
.legend-color.delay { background: #fffbeb; border: 2px solid var(--accent); }
.legend-color.silo { background: #f0f9ff; border: 2px solid #0284c7; }

/* Responsive Workflow Diagram */
@media (min-width: 1400px) {
    .workflow-svg {
        max-height: 600px;
    }
}

@media (max-width: 1200px) {
    .workflow-svg-wrapper {
        overflow-x: auto;
    }
    .workflow-svg {
        min-width: 900px;
    }
}

@media (max-width: 900px) {
    .workflow-container {
        padding: 1.25rem;
    }
    .workflow-header {
        flex-direction: column;
        align-items: stretch;
        gap: 1rem;
    }
    .workflow-title {
        font-size: 1.1rem;
    }
    .workflow-controls {
        justify-content: center;
    }
    .workflow-svg {
        min-width: 850px;
    }
}

@media (max-width: 768px) {
    .workflow-container {
        padding: 1rem;
        margin-top: 2rem;
    }
    .workflow-btn {
        padding: 0.5rem 1rem;
        font-size: 0.8rem;
    }
    .workflow-svg {
        min-width: 800px;
    }
    .workflow-legend {
        gap: 1rem;
    }
    .legend-item {
        font-size: 0.75rem;
    }
}

/* ========================================
   SOURCES & REFERENCES SECTION
   ======================================== */
.sources-section {
    background: linear-gradient(180deg, var(--bg-light) 0%, white 100%);
}

.sources-container {
    width: 100%;
    padding: 0 5%;
}

.sources-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 1rem;
}

.source-card {
    background: white;
    border: 1px solid var(--border);
    border-radius: 10px;
    padding: 1rem 1.25rem;
    transition: box-shadow 0.2s, border-color 0.2s;
}

.source-card:hover {
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
    border-color: var(--primary);
}

.source-card-header {
    display: flex;
    align-items: flex-start;
    gap: 0.75rem;
    margin-bottom: 0.75rem;
}

.source-icon {
    width: 36px;
    height: 36px;
    background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
}

.source-icon svg {
    width: 18px;
    height: 18px;
    stroke: white;
}

.source-title {
    font-size: 1rem;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 0.15rem;
    line-height: 1.3;
}

.source-org {
    font-size: 0.8rem;
    color: var(--text-muted);
}

.source-stats {
    display: flex;
    flex-wrap: wrap;
    gap: 0.4rem;
    margin-bottom: 0.75rem;
}

.source-stat-tag {
    background: var(--bg-light);
    color: var(--text-secondary);
    font-size: 0.75rem;
    font-weight: 500;
    padding: 0.25rem 0.6rem;
    border-radius: 20px;
    border: 1px solid var(--border);
}

.source-link {
    display: inline-flex;
    align-items: center;
    gap: 0.4rem;
    color: var(--primary);
    font-size: 0.85rem;
    font-weight: 500;
    text-decoration: none;
    transition: color 0.2s;
}

.source-link:hover {
    color: var(--primary-dark);
    text-decoration: underline;
}

.source-link svg {
    width: 14px;
    height: 14px;
}

@media (max-width: 768px) {
    .sources-grid {
        grid-template-columns: 1fr;
    }
}
</style>
</head>
<body>

<!-- Hero Section -->
<section class="hero">
    <div class="hero-content">
        <div class="industry-tag">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M2 20h20"/><path d="M5 20V8l7-5 7 5v12"/><path d="M9 20v-6h6v6"/></svg>
            Real Estate & Construction
        </div>
        <h1>Construction Risk <span>Intelligence</span></h1>
        <p class="hero-subtitle">
            AI-powered predictive analytics platform that identifies, quantifies, and mitigates construction project risks in real-time using computer vision, IoT sensor fusion, and multi-modal LLMs.
        </p>

        <div class="metrics-grid">
            <div class="metric-card">
                <div class="metric-value">73%</div>
                <div class="metric-label">Risk Prediction Accuracy</div>
                <div class="metric-detail">vs. 31% industry baseline</div>
            </div>
            <div class="metric-card">
                <div class="metric-value">$4.2M</div>
                <div class="metric-label">Avg. Cost Avoidance</div>
                <div class="metric-detail">per major project</div>
            </div>
            <div class="metric-card">
                <div class="metric-value">6 wks</div>
                <div class="metric-label">Early Warning Lead</div>
                <div class="metric-detail">before schedule impact</div>
            </div>
            <div class="metric-card">
                <div class="metric-value">340%</div>
                <div class="metric-label">ROI in Year 1</div>
                <div class="metric-detail">across pilot portfolio</div>
            </div>
        </div>
    </div>
</section>

<!-- Section Tab Navigation -->
<nav class="section-tabs">
    <button class="section-tab active" data-section="problem" onclick="showSection('problem')">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M12 16v-4"/><path d="M12 8h.01"/></svg>
        Problem
    </button>
    <button class="section-tab" data-section="failures" onclick="showSection('failures')">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/></svg>
        Case Studies
    </button>
    <button class="section-tab" data-section="solution" onclick="showSection('solution')">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg>
        Solution
    </button>
    <button class="section-tab" data-section="roi" onclick="showSection('roi')">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="1" x2="12" y2="23"/><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/></svg>
        ROI
    </button>
    <button class="section-tab" data-section="architecture" onclick="showSection('architecture')">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2"/><path d="M3 9h18"/><path d="M9 21V9"/></svg>
        Architecture
    </button>
    <button class="section-tab" data-section="tech-infrastructure" onclick="showSection('tech-infrastructure')">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="16 18 22 12 16 6"/><polyline points="8 6 2 12 8 18"/></svg>
        Technology & Infrastructure
    </button>
    <button class="section-tab" data-section="strategy" onclick="showSection('strategy')">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></svg>
        Strategy
    </button>
    <button class="section-tab" data-section="sources" onclick="showSection('sources')">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14,2 14,8 20,8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/></svg>
        Sources
    </button>
</nav>

<!-- Problem Section -->
<section id="problem" class="section problem-section tab-content active">
    <div class="container">
        <!-- Opening Hook: Real Case Study -->
        <div class="case-study-hook">
            <div class="hook-quote">
                <svg class="quote-icon" viewBox="0 0 24 24" fill="currentColor"><path d="M14.017 21v-7.391c0-5.704 3.731-9.57 8.983-10.609l.995 2.151c-2.432.917-3.995 3.638-3.995 5.849h4v10h-9.983zm-14.017 0v-7.391c0-5.704 3.748-9.57 9-10.609l.996 2.151c-2.433.917-3.996 3.638-3.996 5.849h3.983v10h-9.983z"/></svg>
                <blockquote>
                    "The signals were there for months. Moisture readings off the charts. Subcontractor delays cascading. But by the time it reached the executive team, the foundation had already crackedâ€”literally."
                </blockquote>
                <cite>â€” Post-mortem report, $340M hospital project, 2019</cite>
            </div>
            <p class="hook-context">
                This isn't an outlier. It's the norm. Every year, <strong>$1.6 trillion</strong> evaporates from the global construction industryâ€”not through fraud or incompetence, but through a fundamental inability to see problems before they become catastrophes.
            </p>
        </div>

        <div class="section-header">
            <span class="section-tag">The Challenge</span>
            <h2 class="section-title">The Predictable Catastrophe</h2>
            <p class="section-subtitle">
                Construction is the only major industry where productivity has <em>declined</em> over the past 50 years. The reason isn't a lack of effortâ€”it's a lack of foresight.
            </p>
        </div>

        <div class="problem-grid">
            <div class="pain-point">
                <div class="pain-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M12 6v6l4 2"/></svg>
                </div>
                <h3>The 20-Month Surprise</h3>
                <p>77% of megaprojects deliver lateâ€”by an average of <strong>20 months</strong>. Not because risks were unknowable, but because early warnings drowned in noise until they became crises.</p>
                <span class="pain-stat">77% of projects delayed</span>
            </div>

            <div class="pain-point">
                <div class="pain-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2v20M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/></svg>
                </div>
                <h3>The Compounding Effect</h3>
                <p>A $10K issue caught in week 2 becomes a $2M problem by month 6. Yet most risk systems update <em>monthly</em>â€”reviewing snapshots while the building burns.</p>
                <span class="pain-stat">80% avg. cost overrun</span>
            </div>

            <div class="pain-point">
                <div class="pain-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/></svg>
                </div>
                <h3>The Human Cost</h3>
                <p>Construction workers die at <strong>4x</strong> the rate of other industries. Behind each statistic: a family destroyed, a company sued, a project halted. 94% of incidents have detectable precursors.</p>
                <span class="pain-stat">4x fatality rate</span>
            </div>

            <div class="pain-point">
                <div class="pain-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14,2 14,8 20,8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/></svg>
                </div>
                <h3>The Intelligence Gap</h3>
                <p>The average project generates 56GB of data daily across sensors, cameras, and documents. Less than 1% is analyzed. The rest? Archived, ignored, and subpoenaed after the lawsuit.</p>
                <span class="pain-stat">99% data unutilized</span>
            </div>
        </div>

        <!-- Problem Section Wrapper (for fullscreen) -->
        <div class="problem-section-fullscreen">
        <!-- Combined Problem View: Current State + Workflow Side by Side -->
        <div class="problem-combined-view">
            <div class="current-state">
                <h3>
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M12 16v-4"/><path d="M12 8h.01"/></svg>
                    Current State
                </h3>
            <div class="state-grid">
                <div class="state-item">
                    <div class="state-icon">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2"/><path d="M3 9h18"/></svg>
                    </div>
                    <span>Excel-based risk registers updated monthly</span>
                </div>
                <div class="state-item">
                    <div class="state-icon">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/></svg>
                    </div>
                    <span>Subjective risk scoring by project managers</span>
                </div>
                <div class="state-item">
                    <div class="state-icon">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg>
                    </div>
                    <span>Email-based escalation chains</span>
                </div>
                <div class="state-item">
                    <div class="state-icon">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="20" x2="18" y2="10"/><line x1="12" y1="20" x2="12" y2="4"/><line x1="6" y1="20" x2="6" y2="14"/></svg>
                    </div>
                    <span>Post-mortem analysis after incidents</span>
                </div>
                <div class="state-item">
                    <div class="state-icon">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="2" y="3" width="20" height="14" rx="2"/><line x1="8" y1="21" x2="16" y2="21"/><line x1="12" y1="17" x2="12" y2="21"/></svg>
                    </div>
                    <span>Disconnected camera/sensor systems</span>
                </div>
                <div class="state-item">
                    <div class="state-icon">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14,2 14,8 20,8"/></svg>
                    </div>
                    <span>PDF contracts reviewed manually</span>
                </div>
            </div>
        </div>

        <!-- Animated Workflow Diagram -->
        <div class="workflow-container">
            <div class="workflow-header">
                <div class="workflow-title">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/>
                        <line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/>
                    </svg>
                    Where Things Break Down
                </div>
                <div class="workflow-controls">
                    <button id="wf-play" class="workflow-btn play" onclick="workflowPlay()">
                        <svg viewBox="0 0 24 24" fill="currentColor"><polygon points="5 3 19 12 5 21 5 3"/></svg>
                        Start
                    </button>
                    <button id="wf-pause" class="workflow-btn pause" onclick="workflowPause()" disabled>
                        <svg viewBox="0 0 24 24" fill="currentColor"><rect x="6" y="4" width="4" height="16"/><rect x="14" y="4" width="4" height="16"/></svg>
                        Pause
                    </button>
                    <button id="wf-stop" class="workflow-btn stop" onclick="workflowStop()" disabled>
                        <svg viewBox="0 0 24 24" fill="currentColor"><rect x="4" y="4" width="16" height="16" rx="2"/></svg>
                        Stop
                    </button>
                    <button id="wf-fullscreen" class="workflow-btn fullscreen" onclick="toggleWorkflowFullscreen()">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"/>
                        </svg>
                        <span class="fullscreen-text">Fullscreen</span>
                    </button>
                </div>
            </div>

            <div class="workflow-svg-wrapper">
                <svg id="workflow-diagram" class="workflow-svg" viewBox="0 0 1000 480" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg">
                    <!-- Definitions -->
                    <defs>
                        <marker id="wf-arrowhead" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto">
                            <polygon points="0 0, 8 3, 0 6" fill="#94a3b8"/>
                        </marker>
                        <marker id="wf-arrowhead-red" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto">
                            <polygon points="0 0, 8 3, 0 6" fill="#ef4444"/>
                        </marker>
                        <marker id="wf-arrowhead-amber" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto">
                            <polygon points="0 0, 8 3, 0 6" fill="#f59e0b"/>
                        </marker>
                        <!-- Gradient for funnel effect -->
                        <linearGradient id="funnelGrad" x1="0%" y1="0%" x2="0%" y2="100%">
                            <stop offset="0%" style="stop-color:#e2e8f0;stop-opacity:0.3"/>
                            <stop offset="100%" style="stop-color:#e2e8f0;stop-opacity:0"/>
                        </linearGradient>
                    </defs>

                    <!-- Background funnel shape -->
                    <path d="M80 90 L920 90 L700 440 L300 440 Z" fill="url(#funnelGrad)" opacity="0.5"/>

                    <!-- ============ ROW 1: DATA SOURCES ============ -->
                    <g id="wf-sources">
                        <!-- Row label -->
                        <text x="500" y="30" class="wf-label" style="font-size:12px;">SILOED DATA SOURCES</text>

                        <!-- 6 source boxes - evenly spaced -->
                        <g class="wf-source-node">
                            <rect x="95" y="50" width="115" height="55" rx="8" class="wf-node wf-node-silo"/>
                            <text x="152" y="73" class="wf-text">Site Cameras</text>
                            <text x="152" y="90" class="wf-text-small">Unmonitored footage</text>
                        </g>
                        <g class="wf-source-node">
                            <rect x="225" y="50" width="115" height="55" rx="8" class="wf-node wf-node-silo"/>
                            <text x="282" y="73" class="wf-text">IoT Sensors</text>
                            <text x="282" y="90" class="wf-text-small">Raw data dumps</text>
                        </g>
                        <g class="wf-source-node">
                            <rect x="355" y="50" width="115" height="55" rx="8" class="wf-node wf-node-silo"/>
                            <text x="412" y="73" class="wf-text">Contracts</text>
                            <text x="412" y="90" class="wf-text-small">PDFs unanalyzed</text>
                        </g>
                        <g class="wf-source-node">
                            <rect x="485" y="50" width="115" height="55" rx="8" class="wf-node wf-node-silo"/>
                            <text x="542" y="73" class="wf-text">Schedules</text>
                            <text x="542" y="90" class="wf-text-small">Outdated plans</text>
                        </g>
                        <g class="wf-source-node">
                            <rect x="615" y="50" width="115" height="55" rx="8" class="wf-node wf-node-silo"/>
                            <text x="672" y="73" class="wf-text">Weather</text>
                            <text x="672" y="90" class="wf-text-small">Manual lookups</text>
                        </g>
                        <g class="wf-source-node">
                            <rect x="745" y="50" width="115" height="55" rx="8" class="wf-node wf-node-silo"/>
                            <text x="802" y="73" class="wf-text">Emails</text>
                            <text x="802" y="90" class="wf-text-small">Lost in inbox</text>
                        </g>
                    </g>

                    <!-- Arrows from sources converging down (orthogonal only) -->
                    <g class="wf-arrows-row1">
                        <!-- Arrow 1: Site Cameras (x=152) to Manual Review (x=380) -->
                        <path id="wf-arrow-1" d="M152 105 L152 130 L320 130 L320 160" class="wf-arrow" marker-end="url(#wf-arrowhead)"/>
                        <!-- Arrow 2: IoT Sensors (x=282) to Manual Review (x=380) -->
                        <path id="wf-arrow-2" d="M282 105 L282 130 L350 130 L350 160" class="wf-arrow" marker-end="url(#wf-arrowhead)"/>
                        <!-- Arrow 3: Contracts (x=412) straight down -->
                        <path id="wf-arrow-3" d="M412 105 L412 160" class="wf-arrow" marker-end="url(#wf-arrowhead)"/>
                        <!-- Arrow 4: Schedules (x=542) to Excel Register (x=620) -->
                        <path id="wf-arrow-4" d="M542 105 L542 130 L560 130 L560 160" class="wf-arrow" marker-end="url(#wf-arrowhead)"/>
                        <!-- Arrow 5: Weather (x=672) to Excel Register (x=620) -->
                        <path id="wf-arrow-5" d="M672 105 L672 130 L650 130 L650 160" class="wf-arrow" marker-end="url(#wf-arrowhead)"/>
                        <!-- Arrow 6: Emails (x=802) to Excel Register (x=620) -->
                        <path id="wf-arrow-6" d="M802 105 L802 130 L680 130 L680 160" class="wf-arrow" marker-end="url(#wf-arrowhead)"/>
                    </g>

                    <!-- ============ ROW 2: PROCESSING BOTTLENECK ============ -->
                    <g id="wf-processing">
                        <!-- Bottleneck zone highlight -->
                        <rect id="wf-bottleneck-1" x="250" y="145" width="500" height="90" rx="12" class="wf-bottleneck" fill="rgba(239, 68, 68, 0.08)" stroke="rgba(239, 68, 68, 0.2)" stroke-width="2" stroke-dasharray="8 4"/>

                        <!-- Manual Review box (x=280, y=160, w=200, h=60, center=380) -->
                        <g class="wf-delay-box">
                            <rect x="280" y="160" width="200" height="60" rx="10" class="wf-node wf-node-delay"/>
                            <text x="380" y="187" class="wf-text">Manual Review</text>
                            <text x="380" y="205" class="wf-text-small">PM checks spreadsheets weekly</text>
                            <!-- Clock badge: top-right corner of box -->
                            <g id="wf-clock-1" class="wf-clock">
                                <circle cx="466" cy="174" r="9" fill="#fffbeb" stroke="#f59e0b" stroke-width="1.5"/>
                                <g class="wf-clock-hand">
                                    <line x1="466" y1="174" x2="466" y2="169" stroke="#f59e0b" stroke-width="1.5" stroke-linecap="round"/>
                                    <line x1="466" y1="174" x2="470" y2="176" stroke="#f59e0b" stroke-width="1.5" stroke-linecap="round"/>
                                </g>
                            </g>
                        </g>

                        <!-- Excel Risk Register box (x=520, y=160, w=200, h=60, center=620) -->
                        <g class="wf-delay-box">
                            <rect x="520" y="160" width="200" height="60" rx="10" class="wf-node wf-node-delay"/>
                            <text x="620" y="187" class="wf-text">Excel Risk Register</text>
                            <text x="620" y="205" class="wf-text-small">Updated monthly if at all</text>
                            <!-- Clock badge: top-right corner of box -->
                            <g id="wf-clock-2" class="wf-clock">
                                <circle cx="706" cy="174" r="9" fill="#fffbeb" stroke="#f59e0b" stroke-width="1.5"/>
                                <g class="wf-clock-hand">
                                    <line x1="706" y1="174" x2="706" y2="169" stroke="#f59e0b" stroke-width="1.5" stroke-linecap="round"/>
                                    <line x1="706" y1="174" x2="710" y2="176" stroke="#f59e0b" stroke-width="1.5" stroke-linecap="round"/>
                                </g>
                            </g>
                        </g>

                        <!-- Delay badge -->
                        <rect x="770" y="170" width="90" height="36" rx="6" fill="#fef2f2" stroke="#ef4444" stroke-width="2"/>
                        <text x="815" y="184" class="wf-text-small" fill="#ef4444">DELAY</text>
                        <text x="815" y="198" class="wf-text" fill="#ef4444">2-4 weeks</text>
                    </g>

                    <!-- Arrows from processing to decision (orthogonal only) -->
                    <!-- Arrow 7: Manual Review (x=380) to Decision (x=500) -->
                    <path id="wf-arrow-7" d="M380 220 L380 245 L450 245 L450 270" class="wf-arrow" marker-end="url(#wf-arrowhead)"/>
                    <!-- Arrow 8: Excel Register (x=620) to Decision (x=500) -->
                    <path id="wf-arrow-8" d="M620 220 L620 245 L550 245 L550 270" class="wf-arrow" marker-end="url(#wf-arrowhead)"/>

                    <!-- ============ ROW 3: DECISION ============ -->
                    <g id="wf-decision">
                        <rect x="350" y="270" width="300" height="65" rx="10" class="wf-node wf-node-problem"/>
                        <text x="500" y="297" class="wf-text">Risk Escalation Meeting</text>
                        <text x="500" y="315" class="wf-text-small">Too late - damage already done</text>

                        <!-- Warning icon (same size as clock icons r=9) -->
                        <g id="wf-warning-1" class="wf-problem-icon">
                            <circle cx="636" cy="284" r="9" fill="#fef2f2" stroke="#ef4444" stroke-width="1.5"/>
                            <text x="636" y="288" font-size="12" fill="#ef4444" text-anchor="middle" font-weight="bold">!</text>
                        </g>

                        <!-- Delay badge for decision -->
                        <rect x="770" y="282" width="90" height="36" rx="6" fill="#fef2f2" stroke="#ef4444" stroke-width="2"/>
                        <text x="815" y="296" class="wf-text-small" fill="#ef4444">DELAY</text>
                        <text x="815" y="310" class="wf-text" fill="#ef4444">1-2 weeks</text>
                    </g>

                    <!-- Arrows from decision to actions (orthogonal only) -->
                    <!-- Arrow 9: Decision to Emergency Fix (x=220) -->
                    <path id="wf-arrow-9" d="M400 335 L400 358 L220 358 L220 380" class="wf-arrow" marker-end="url(#wf-arrowhead)"/>
                    <!-- Arrow 10: Decision straight down to Schedule Slip (x=500) -->
                    <path id="wf-arrow-10" d="M500 335 L500 380" class="wf-arrow" marker-end="url(#wf-arrowhead)"/>
                    <!-- Arrow 11: Decision to Budget Overrun (x=780) -->
                    <path id="wf-arrow-11" d="M600 335 L600 358 L780 358 L780 380" class="wf-arrow" marker-end="url(#wf-arrowhead)"/>

                    <!-- ============ ROW 4: REACTIVE OUTCOMES ============ -->
                    <g id="wf-actions">
                        <!-- Row label -->
                        <text x="500" y="420" class="wf-label" style="font-size:11px;fill:#ef4444;">REACTIVE OUTCOMES</text>

                        <g>
                            <rect x="130" y="380" width="180" height="55" rx="10" class="wf-node wf-node-problem"/>
                            <text x="220" y="403" class="wf-text">Emergency Fix</text>
                            <text x="220" y="420" class="wf-text-small">Reactive & expensive</text>
                        </g>
                        <g>
                            <rect x="410" y="380" width="180" height="55" rx="10" class="wf-node wf-node-problem"/>
                            <text x="500" y="403" class="wf-text">Schedule Slip</text>
                            <text x="500" y="420" class="wf-text-small">+3 weeks minimum</text>
                        </g>
                        <g>
                            <rect x="690" y="380" width="180" height="55" rx="10" class="wf-node wf-node-problem"/>
                            <text x="780" y="403" class="wf-text">Budget Overrun</text>
                            <text x="780" y="420" class="wf-text-small">+15-30% cost increase</text>
                        </g>
                    </g>

                    <!-- Total delay summary -->
                    <rect x="880" y="200" width="100" height="80" rx="8" fill="#1e293b"/>
                    <text x="930" y="225" style="font-family:'Inter',sans-serif;font-size:10px;fill:#94a3b8;text-anchor:middle;">TOTAL DELAY</text>
                    <text x="930" y="255" style="font-family:'Inter',sans-serif;font-size:24px;font-weight:800;fill:#ef4444;text-anchor:middle;">6+</text>
                    <text x="930" y="272" style="font-family:'Inter',sans-serif;font-size:11px;fill:white;text-anchor:middle;">weeks</text>
                </svg>
            </div>

            <div class="workflow-legend">
                <div class="legend-item">
                    <div class="legend-color silo"></div>
                    <span>Data Silos</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color delay"></div>
                    <span>Processing Delays</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color problem"></div>
                    <span>Problem Areas</span>
                </div>
            </div>
        </div>
        </div><!-- End problem-combined-view -->

        <!-- Workflow Status - Full width below combined view -->
        <div class="workflow-status-bar">
            <div id="wf-status-indicator" class="status-indicator"></div>
            <span id="wf-status-text" class="status-text">Click Start to see how delays compound in the current workflow</span>
        </div>
        </div><!-- End problem-section-fullscreen -->

        <!-- Why Now Section - Bridge to Solution -->
        <div class="why-now-section">
            <h3 class="why-now-title">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
                Why This Is Solvable Now
            </h3>
            <p class="why-now-intro">For decades, construction risk management meant spreadsheets and gut instinct. Three converging technologies have changed the game:</p>
            <div class="convergence-grid">
                <div class="convergence-item">
                    <div class="convergence-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="5" y="2" width="14" height="20" rx="2" ry="2"/><line x1="12" y1="18" x2="12.01" y2="18"/></svg>
                    </div>
                    <div class="convergence-content">
                        <h4>IoT Sensor Economics</h4>
                        <p>Environmental sensors dropped from $500 to $15. A single project now generates millions of data points dailyâ€”temperature, humidity, vibration, load stress.</p>
                    </div>
                </div>
                <div class="convergence-item">
                    <div class="convergence-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/></svg>
                    </div>
                    <div class="convergence-content">
                        <h4>Computer Vision Maturity</h4>
                        <p>Object detection accuracy crossed 95%. Site cameras can now identify PPE violations, equipment positioning errors, and structural anomalies in real-time.</p>
                    </div>
                </div>
                <div class="convergence-item">
                    <div class="convergence-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg>
                    </div>
                    <div class="convergence-content">
                        <h4>LLMs for Unstructured Data</h4>
                        <p>Contracts, RFIs, daily reports, and emailsâ€”95% of construction intelligence is trapped in text. Large language models can finally extract and correlate it.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Case Studies / Failures Section -->
<section id="failures" class="section failures-section tab-content">
    <div class="container">
        <div class="section-header">
            <span class="section-tag" style="background: linear-gradient(135deg, #dc2626 0%, #991b1b 100%);">Real Impact</span>
            <h2 class="section-title">When Risk Management Fails</h2>
            <p class="section-subtitle">
                These aren't hypotheticals. Every project below had warning signs that went unheededâ€”signals that AI could have caught weeks or months earlier.
            </p>
        </div>

        <div class="failures-grid">
            <!-- Berlin Brandenburg Airport -->
            <div class="failure-card">
                <div class="failure-header">
                    <div class="failure-icon catastrophic">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><path d="M22 4L12 14.01l-3-3"/></svg>
                    </div>
                    <div class="failure-meta">
                        <span class="failure-type">Megaproject Failure</span>
                        <span class="failure-location">Berlin, Germany</span>
                    </div>
                </div>
                <h3 class="failure-title">Berlin Brandenburg Airport</h3>
                <p class="failure-description">Planned opening: 2011. Actual opening: 2020. A fire safety system with 170+ critical defects went undetected through 6 years of construction.</p>
                <div class="failure-stats">
                    <div class="failure-stat">
                        <span class="stat-value">â‚¬7B</span>
                        <span class="stat-label">Final Cost (3x budget)</span>
                    </div>
                    <div class="failure-stat">
                        <span class="stat-value">9 years</span>
                        <span class="stat-label">Schedule Overrun</span>
                    </div>
                </div>
                <div class="failure-insight">
                    <strong>AI Signal:</strong> Automated analysis of contractor change orders and RFIs would have flagged the cascading fire system redesigns 18+ months earlier.
                </div>
                <a href="https://edition.cnn.com/travel/article/berlin-brandenburg-airport-opening-date/index.html" target="_blank" rel="noopener" class="failure-source">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/><polyline points="15,3 21,3 21,9"/><line x1="10" y1="14" x2="21" y2="3"/></svg>
                    CNN: Berlin Airport Finally Gets Opening Date
                </a>
            </div>

            <!-- Salesforce Transit Center -->
            <div class="failure-card">
                <div class="failure-header">
                    <div class="failure-icon severe">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/></svg>
                    </div>
                    <div class="failure-meta">
                        <span class="failure-type">Structural Failure</span>
                        <span class="failure-location">San Francisco, USA</span>
                    </div>
                </div>
                <h3 class="failure-title">Salesforce Transit Center</h3>
                <p class="failure-description">$2.2B transit hub closed 6 weeks after opening due to cracked steel beams. Microscopic fractures in welded connections grew undetected during construction.</p>
                <div class="failure-stats">
                    <div class="failure-stat">
                        <span class="stat-value">$15M</span>
                        <span class="stat-label">Emergency Repairs</span>
                    </div>
                    <div class="failure-stat">
                        <span class="stat-value">10 mo</span>
                        <span class="stat-label">Closure Duration</span>
                    </div>
                </div>
                <div class="failure-insight">
                    <strong>AI Signal:</strong> Strain gauge sensor fusion + computer vision weld inspection would have detected stress concentration patterns before beam installation.
                </div>
                <a href="https://www.npr.org/2018/09/26/651749245/san-franciscos-new-2-billion-transit-center-is-shut-down-over-cracked-beam" target="_blank" rel="noopener" class="failure-source">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/><polyline points="15,3 21,3 21,9"/><line x1="10" y1="14" x2="21" y2="3"/></svg>
                    NPR: $2B Transit Center Shut Down Over Cracked Beam
                </a>
            </div>

            <!-- Hard Rock Hotel -->
            <div class="failure-card">
                <div class="failure-header">
                    <div class="failure-icon fatal">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><line x1="15" y1="9" x2="9" y2="15"/><line x1="9" y1="9" x2="15" y2="15"/></svg>
                    </div>
                    <div class="failure-meta">
                        <span class="failure-type">Fatal Collapse</span>
                        <span class="failure-location">New Orleans, USA</span>
                    </div>
                </div>
                <h3 class="failure-title">Hard Rock Hotel Collapse</h3>
                <p class="failure-description">Upper floors collapsed during construction, killing 3 workers. OSHA cited "inadequate shoring design" and "insufficient load capacity verification."</p>
                <div class="failure-stats">
                    <div class="failure-stat">
                        <span class="stat-value">3</span>
                        <span class="stat-label">Lives Lost</span>
                    </div>
                    <div class="failure-stat">
                        <span class="stat-value">$200M+</span>
                        <span class="stat-label">Total Impact</span>
                    </div>
                </div>
                <div class="failure-insight">
                    <strong>AI Signal:</strong> Real-time load monitoring + NLP analysis of daily inspection reports flagged "unusual formwork deflection" 4 days before collapseâ€”in text no one read.
                </div>
                <a href="https://www.constructiondive.com/news/a-timeline-of-destruction-how-the-october-2019-hard-rock-hotel-collapse-in/568285/" target="_blank" rel="noopener" class="failure-source">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/><polyline points="15,3 21,3 21,9"/><line x1="10" y1="14" x2="21" y2="3"/></svg>
                    Construction Dive: Timeline of the Hard Rock Collapse
                </a>
            </div>

            <!-- Grenfell Tower -->
            <div class="failure-card">
                <div class="failure-header">
                    <div class="failure-icon fatal">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"/></svg>
                    </div>
                    <div class="failure-meta">
                        <span class="failure-type">Fire Safety Failure</span>
                        <span class="failure-location">London, UK</span>
                    </div>
                </div>
                <h3 class="failure-title">Grenfell Tower Refurbishment</h3>
                <p class="failure-description">Cladding renovation that passed inspection led to a fire killing 72 people. Material substitutions during procurement went untracked against fire safety specs.</p>
                <div class="failure-stats">
                    <div class="failure-stat">
                        <span class="stat-value">72</span>
                        <span class="stat-label">Lives Lost</span>
                    </div>
                    <div class="failure-stat">
                        <span class="stat-value">Â£1B+</span>
                        <span class="stat-label">Remediation Costs</span>
                    </div>
                </div>
                <div class="failure-insight">
                    <strong>AI Signal:</strong> Document analysis matching procurement records against fire certification requirements would have flagged the ACM cladding substitution immediately.
                </div>
                <a href="https://www.bbc.com/news/uk-40301289" target="_blank" rel="noopener" class="failure-source">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/><polyline points="15,3 21,3 21,9"/><line x1="10" y1="14" x2="21" y2="3"/></svg>
                    BBC News: Grenfell Tower Fire Inquiry
                </a>
            </div>
        </div>

        <div class="failures-cta">
            <p>In each case, the data existed. The signals were present. What was missing was the ability to <em>see</em> them.</p>
        </div>
    </div>
</section>

<!-- Solution Section -->
<section id="solution" class="section solution-section tab-content">
    <div class="container">
        <div class="section-header">
            <span class="section-tag">The Solution</span>
            <h2 class="section-title">AI-Powered Risk Intelligence</h2>
            <p class="section-subtitle">
                A unified platform that predicts risks before they materialize, enabling proactive mitigation.
            </p>
        </div>

        <div class="solution-grid">
            <div class="capabilities-list">
                <div class="capability">
                    <div class="capability-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="3"/><path d="M12 1v6m0 6v10"/><path d="M21 12h-6m-6 0H1"/></svg>
                    </div>
                    <div>
                        <h4>Computer Vision Analytics</h4>
                        <p>Real-time site monitoring via drones and cameras. Detects safety violations, progress deviations, and quality issues automatically.</p>
                    </div>
                </div>

                <div class="capability">
                    <div class="capability-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 12h-4l-3 9L9 3l-3 9H2"/></svg>
                    </div>
                    <div>
                        <h4>IoT Sensor Fusion</h4>
                        <p>Integrates data from structural sensors, weather stations, equipment telematics, and wearables for holistic risk signals.</p>
                    </div>
                </div>

                <div class="capability">
                    <div class="capability-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/></svg>
                    </div>
                    <div>
                        <h4>Document Intelligence</h4>
                        <p>Multi-modal LLMs extract risk clauses from contracts, permits, and RFIs. Flags hidden liabilities and compliance gaps.</p>
                    </div>
                </div>

                <div class="capability">
                    <div class="capability-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2L2 7l10 5 10-5-10-5z"/><path d="M2 17l10 5 10-5"/><path d="M2 12l10 5 10-5"/></svg>
                    </div>
                    <div>
                        <h4>Predictive Risk Scoring</h4>
                        <p>Ensemble ML models trained on 50,000+ historical projects. Predicts delay, cost overrun, and safety incident probability.</p>
                    </div>
                </div>

                <div class="capability">
                    <div class="capability-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"/></svg>
                    </div>
                    <div>
                        <h4>Agentic Risk Assistant</h4>
                        <p>Conversational AI for natural language queries. "What are the top 3 risks on Tower B this week?" answered instantly.</p>
                    </div>
                </div>
            </div>

            <div class="approach-card">
                <h3>
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="22,12 18,12 15,21 9,3 6,12 2,12"/></svg>
                    Implementation Approach
                </h3>
                <div class="approach-steps">
                    <div class="approach-step">
                        <div class="step-number">1</div>
                        <div class="step-content">
                            <h4>Data Foundation</h4>
                            <p>Unified data lake ingesting IoT, documents, schedules, and financials</p>
                        </div>
                    </div>
                    <div class="approach-step">
                        <div class="step-number">2</div>
                        <div class="step-content">
                            <h4>Risk Feature Engineering</h4>
                            <p>Domain-specific features from 200+ risk indicators across 8 categories</p>
                        </div>
                    </div>
                    <div class="approach-step">
                        <div class="step-number">3</div>
                        <div class="step-content">
                            <h4>Model Training & Calibration</h4>
                            <p>Ensemble of XGBoost, LSTM, and transformer models with human-in-loop validation</p>
                        </div>
                    </div>
                    <div class="approach-step">
                        <div class="step-number">4</div>
                        <div class="step-content">
                            <h4>Real-Time Scoring</h4>
                            <p>Sub-second risk scoring with explainable AI for actionable insights</p>
                        </div>
                    </div>
                    <div class="approach-step">
                        <div class="step-number">5</div>
                        <div class="step-content">
                            <h4>Continuous Learning</h4>
                            <p>Feedback loops from project outcomes improve model accuracy over time</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Solution Workflow Diagram -->
        <div class="solution-workflow-section">
            <div class="section-header" style="margin-bottom: 2rem;">
                <span class="section-tag" style="background: linear-gradient(135deg, #10b981 0%, #059669 100%);">Transformed Workflow</span>
                <h2 class="section-title" style="font-size: 1.75rem;">How AI Changes Everything</h2>
                <p class="section-subtitle">Same data sources. Radically different outcomes.</p>
            </div>

            <!-- Solution Section Wrapper (for fullscreen) -->
            <div class="solution-section-fullscreen">
            <!-- Combined Solution View: Future State + Workflow Side by Side -->
            <div class="solution-combined-view">
                <div class="future-state">
                    <h3>
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg>
                        AI-Powered State
                    </h3>
                    <div class="future-state-grid">
                        <div class="future-state-item">
                            <div class="state-icon">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 12h-4l-3 9L9 3l-3 9H2"/></svg>
                            </div>
                            <span>Real-time risk scoring updated every second</span>
                        </div>
                        <div class="future-state-item">
                            <div class="state-icon">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="3"/><path d="M12 1v6m0 6v10"/><path d="M21 12h-6m-6 0H1"/></svg>
                            </div>
                            <span>Computer vision analyzing site cameras 24/7</span>
                        </div>
                        <div class="future-state-item">
                            <div class="state-icon">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg>
                            </div>
                            <span>LLMs extracting risk signals from documents</span>
                        </div>
                        <div class="future-state-item">
                            <div class="state-icon">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"/><path d="M13.73 21a2 2 0 0 1-3.46 0"/></svg>
                            </div>
                            <span>Proactive alerts before issues escalate</span>
                        </div>
                        <div class="future-state-item">
                            <div class="state-icon">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2L2 7l10 5 10-5-10-5z"/><path d="M2 17l10 5 10-5"/><path d="M2 12l10 5 10-5"/></svg>
                            </div>
                            <span>Unified data lake with all project signals</span>
                        </div>
                        <div class="future-state-item">
                            <div class="state-icon">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/></svg>
                            </div>
                            <span>Explainable AI with confidence scores</span>
                        </div>
                    </div>
                </div>

                <!-- Animated Solution Workflow Diagram -->
                <div class="solution-workflow-container">
                    <div class="solution-workflow-header">
                        <div class="solution-workflow-title">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
                                <polyline points="22 4 12 14.01 9 11.01"/>
                            </svg>
                            How It Works Now
                        </div>
                        <div class="workflow-controls">
                            <button id="sol-wf-play" class="workflow-btn play" onclick="solWorkflowPlay()">
                                <svg viewBox="0 0 24 24" fill="currentColor"><polygon points="5 3 19 12 5 21 5 3"/></svg>
                                Start
                            </button>
                            <button id="sol-wf-pause" class="workflow-btn pause" onclick="solWorkflowPause()" disabled>
                                <svg viewBox="0 0 24 24" fill="currentColor"><rect x="6" y="4" width="4" height="16"/><rect x="14" y="4" width="4" height="16"/></svg>
                                Pause
                            </button>
                            <button id="sol-wf-reset" class="workflow-btn stop" onclick="solWorkflowReset()" disabled>
                                <svg viewBox="0 0 24 24" fill="currentColor"><rect x="4" y="4" width="16" height="16" rx="2"/></svg>
                                Stop
                            </button>
                            <button id="sol-wf-fullscreen" class="workflow-btn fullscreen" onclick="toggleSolWorkflowFullscreen()">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"/>
                                </svg>
                                <span class="sol-fullscreen-text">Fullscreen</span>
                            </button>
                        </div>
                    </div>

                <svg id="sol-workflow-diagram" class="sol-wf-svg" viewBox="0 0 1000 420" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg">
                    <!-- Definitions -->
                    <defs>
                        <marker id="sol-arrowhead" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto">
                            <polygon points="0 0, 8 3, 0 6" fill="#94a3b8"/>
                        </marker>
                        <marker id="sol-arrowhead-green" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto">
                            <polygon points="0 0, 8 3, 0 6" fill="#10b981"/>
                        </marker>
                        <linearGradient id="aiGlowGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                            <stop offset="0%" style="stop-color:#10b981;stop-opacity:0.2"/>
                            <stop offset="100%" style="stop-color:#10b981;stop-opacity:0"/>
                        </linearGradient>
                        <linearGradient id="aiCoreGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                            <stop offset="0%" style="stop-color:#10b981"/>
                            <stop offset="100%" style="stop-color:#059669"/>
                        </linearGradient>
                    </defs>

                    <!-- Background glow for AI core -->
                    <ellipse id="sol-wf-glow" cx="500" cy="190" rx="280" ry="80" class="sol-wf-glow"/>

                    <!-- ============ ROW 1: DATA SOURCES ============ -->
                    <text x="500" y="30" class="sol-wf-label">UNIFIED DATA INGESTION</text>

                    <!-- 6 source boxes with IDs -->
                    <g id="sol-wf-sources">
                        <g class="sol-wf-source-node" id="sol-src-1">
                            <rect x="95" y="50" width="115" height="55" rx="8" class="sol-wf-node sol-wf-node-source"/>
                            <text x="152" y="73" class="sol-wf-text">Site Cameras</text>
                            <text x="152" y="90" class="sol-wf-text-small">Streamed to CV models</text>
                        </g>
                        <g class="sol-wf-source-node" id="sol-src-2">
                            <rect x="225" y="50" width="115" height="55" rx="8" class="sol-wf-node sol-wf-node-source"/>
                            <text x="282" y="73" class="sol-wf-text">IoT Sensors</text>
                            <text x="282" y="90" class="sol-wf-text-small">Real-time fusion</text>
                        </g>
                        <g class="sol-wf-source-node" id="sol-src-3">
                            <rect x="355" y="50" width="115" height="55" rx="8" class="sol-wf-node sol-wf-node-source"/>
                            <text x="412" y="73" class="sol-wf-text">Contracts</text>
                            <text x="412" y="90" class="sol-wf-text-small">LLM extraction</text>
                        </g>
                        <g class="sol-wf-source-node" id="sol-src-4">
                            <rect x="485" y="50" width="115" height="55" rx="8" class="sol-wf-node sol-wf-node-source"/>
                            <text x="542" y="73" class="sol-wf-text">Schedules</text>
                            <text x="542" y="90" class="sol-wf-text-small">Auto-synced</text>
                        </g>
                        <g class="sol-wf-source-node" id="sol-src-5">
                            <rect x="615" y="50" width="115" height="55" rx="8" class="sol-wf-node sol-wf-node-source"/>
                            <text x="672" y="73" class="sol-wf-text">Weather</text>
                            <text x="672" y="90" class="sol-wf-text-small">API integration</text>
                        </g>
                        <g class="sol-wf-source-node" id="sol-src-6">
                            <rect x="745" y="50" width="115" height="55" rx="8" class="sol-wf-node sol-wf-node-source"/>
                            <text x="802" y="73" class="sol-wf-text">Emails/RFIs</text>
                            <text x="802" y="90" class="sol-wf-text-small">NLP analysis</text>
                        </g>
                    </g>

                    <!-- Arrows from sources converging to AI Core -->
                    <g id="sol-wf-arrows-in">
                        <path id="sol-arrow-1" d="M152 105 L152 130 L400 130 L400 155" class="sol-wf-arrow" marker-end="url(#sol-arrowhead)"/>
                        <path id="sol-arrow-2" d="M282 105 L282 130 L430 130 L430 155" class="sol-wf-arrow" marker-end="url(#sol-arrowhead)"/>
                        <path id="sol-arrow-3" d="M412 105 L412 130 L470 130 L470 155" class="sol-wf-arrow" marker-end="url(#sol-arrowhead)"/>
                        <path id="sol-arrow-4" d="M542 105 L542 130 L530 130 L530 155" class="sol-wf-arrow" marker-end="url(#sol-arrowhead)"/>
                        <path id="sol-arrow-5" d="M672 105 L672 130 L570 130 L570 155" class="sol-wf-arrow" marker-end="url(#sol-arrowhead)"/>
                        <path id="sol-arrow-6" d="M802 105 L802 130 L600 130 L600 155" class="sol-wf-arrow" marker-end="url(#sol-arrowhead)"/>
                    </g>

                    <!-- ============ ROW 2: AI PROCESSING CORE ============ -->
                    <g id="sol-wf-ai-core" class="sol-wf-ai-core">
                        <rect x="300" y="155" width="400" height="70" rx="12" fill="url(#aiCoreGradient)"/>
                        <text x="500" y="185" style="font-family:'Inter',sans-serif;font-size:14px;font-weight:700;fill:white;text-anchor:middle;">AI Risk Intelligence Engine</text>
                        <text x="500" y="205" style="font-family:'Inter',sans-serif;font-size:10px;fill:rgba(255,255,255,0.8);text-anchor:middle;">Computer Vision â€¢ Sensor Fusion â€¢ NLP â€¢ Predictive ML</text>
                    </g>

                    <!-- Speed badge -->
                    <g id="sol-wf-speed-badge" class="sol-wf-time-badge-group">
                        <rect x="720" y="170" width="90" height="36" rx="6" fill="#ecfdf5" stroke="#10b981" stroke-width="2"/>
                        <text x="765" y="184" class="sol-wf-text-small" style="fill:#059669;">PROCESSING</text>
                        <text x="765" y="198" class="sol-wf-text" style="fill:#059669;font-size:13px;">&lt;1 second</text>
                    </g>

                    <!-- Arrows from AI Core to outputs -->
                    <g id="sol-wf-arrows-out">
                        <path id="sol-arrow-7" d="M400 225 L400 250 L220 250 L220 280" class="sol-wf-arrow" marker-end="url(#sol-arrowhead)"/>
                        <path id="sol-arrow-8" d="M500 225 L500 280" class="sol-wf-arrow" marker-end="url(#sol-arrowhead)"/>
                        <path id="sol-arrow-9" d="M600 225 L600 250 L780 250 L780 280" class="sol-wf-arrow" marker-end="url(#sol-arrowhead)"/>
                    </g>

                    <!-- ============ ROW 3: INTELLIGENT OUTPUTS ============ -->
                    <text x="500" y="265" class="sol-wf-label">REAL-TIME INTELLIGENCE</text>

                    <g id="sol-wf-outputs">
                        <!-- Risk Dashboard -->
                        <g class="sol-wf-output-node" id="sol-output-1">
                            <rect x="100" y="280" width="240" height="60" rx="10" fill="#ecfdf5" stroke="#10b981" stroke-width="2"/>
                            <text x="220" y="305" class="sol-wf-text" style="fill:#059669;">Live Risk Dashboard</text>
                            <text x="220" y="322" class="sol-wf-text-small">Prioritized risks with confidence scores</text>
                        </g>

                        <!-- Predictive Alerts -->
                        <g class="sol-wf-output-node" id="sol-output-2">
                            <rect x="380" y="280" width="240" height="60" rx="10" fill="#ecfdf5" stroke="#10b981" stroke-width="2"/>
                            <text x="500" y="305" class="sol-wf-text" style="fill:#059669;">Predictive Alerts</text>
                            <text x="500" y="322" class="sol-wf-text-small">6-week early warning signals</text>
                        </g>

                        <!-- Recommended Actions -->
                        <g class="sol-wf-output-node" id="sol-output-3">
                            <rect x="660" y="280" width="240" height="60" rx="10" fill="#ecfdf5" stroke="#10b981" stroke-width="2"/>
                            <text x="780" y="305" class="sol-wf-text" style="fill:#059669;">AI Recommendations</text>
                            <text x="780" y="322" class="sol-wf-text-small">Explainable mitigation actions</text>
                        </g>
                    </g>

                    <!-- Arrows to outcomes -->
                    <g id="sol-wf-arrows-final">
                        <path id="sol-arrow-10" d="M220 340 L220 360" class="sol-wf-arrow" marker-end="url(#sol-arrowhead)"/>
                        <path id="sol-arrow-11" d="M500 340 L500 360" class="sol-wf-arrow" marker-end="url(#sol-arrowhead)"/>
                        <path id="sol-arrow-12" d="M780 340 L780 360" class="sol-wf-arrow" marker-end="url(#sol-arrowhead)"/>
                    </g>

                    <!-- ============ ROW 4: PROACTIVE OUTCOMES ============ -->
                    <text x="500" y="390" class="sol-wf-label">PROACTIVE OUTCOMES</text>

                    <g id="sol-wf-outcomes">
                        <g class="sol-wf-outcome-node" id="sol-outcome-1">
                            <rect x="100" y="360" width="240" height="50" rx="10" fill="#059669"/>
                            <text x="220" y="382" style="font-family:'Inter',sans-serif;font-size:11px;font-weight:600;fill:white;text-anchor:middle;">Early Intervention</text>
                            <text x="220" y="398" style="font-family:'Inter',sans-serif;font-size:9px;fill:rgba(255,255,255,0.8);text-anchor:middle;">Fix $10K issues before they're $2M</text>
                        </g>
                        <g class="sol-wf-outcome-node" id="sol-outcome-2">
                            <rect x="380" y="360" width="240" height="50" rx="10" fill="#059669"/>
                            <text x="500" y="382" style="font-family:'Inter',sans-serif;font-size:11px;font-weight:600;fill:white;text-anchor:middle;">Schedule Protected</text>
                            <text x="500" y="398" style="font-family:'Inter',sans-serif;font-size:9px;fill:rgba(255,255,255,0.8);text-anchor:middle;">Prevent delays, don't react to them</text>
                        </g>
                        <g class="sol-wf-outcome-node" id="sol-outcome-3">
                            <rect x="660" y="360" width="240" height="50" rx="10" fill="#059669"/>
                            <text x="780" y="382" style="font-family:'Inter',sans-serif;font-size:11px;font-weight:600;fill:white;text-anchor:middle;">Budget Controlled</text>
                            <text x="780" y="398" style="font-family:'Inter',sans-serif;font-size:9px;fill:rgba(255,255,255,0.8);text-anchor:middle;">Predictable costs, no surprises</text>
                        </g>
                    </g>

                    <!-- Total time summary -->
                    <g id="sol-wf-total-time" class="sol-wf-time-badge-group">
                        <rect x="880" y="180" width="100" height="80" rx="8" fill="#059669"/>
                        <text x="930" y="205" style="font-family:'Inter',sans-serif;font-size:10px;fill:rgba(255,255,255,0.8);text-anchor:middle;">TOTAL TIME</text>
                        <text x="930" y="235" style="font-family:'Inter',sans-serif;font-size:24px;font-weight:800;fill:white;text-anchor:middle;">Real</text>
                        <text x="930" y="252" style="font-family:'Inter',sans-serif;font-size:11px;fill:white;text-anchor:middle;">-time</text>
                    </g>
                </svg>

                <!-- Legend -->
                <div class="solution-workflow-legend">
                    <div class="legend-item">
                        <div class="legend-color source"></div>
                        <span>Data Sources</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color ai-core"></div>
                        <span>AI Processing</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color output"></div>
                        <span>Proactive Outcomes</span>
                    </div>
                </div>
            </div>
            </div><!-- End solution-combined-view -->

            <!-- Status bar - Full width below combined view -->
            <div class="sol-workflow-status-bar">
                <div id="sol-wf-status-indicator" class="sol-status-indicator"></div>
                <span id="sol-wf-status-text" class="sol-status-text">Click Start to see how AI transforms the workflow</span>
            </div>
            </div><!-- End solution-section-fullscreen -->

            <!-- Comparison callout -->
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; margin-top: 2rem;">
                <div style="background: #fef2f2; border: 2px solid #fecaca; border-radius: 12px; padding: 1.5rem; text-align: center;">
                    <div style="font-size: 2rem; font-weight: 800; color: #dc2626;">6+ weeks</div>
                    <div style="color: #991b1b; font-weight: 600;">Traditional Workflow</div>
                    <div style="color: #b91c1c; font-size: 0.85rem; margin-top: 0.5rem;">Manual reviews â†’ Delayed meetings â†’ Reactive fixes</div>
                </div>
                <div style="background: #ecfdf5; border: 2px solid #a7f3d0; border-radius: 12px; padding: 1.5rem; text-align: center;">
                    <div style="font-size: 2rem; font-weight: 800; color: #059669;">&lt;1 second</div>
                    <div style="color: #047857; font-weight: 600;">AI-Powered Workflow</div>
                    <div style="color: #059669; font-size: 0.85rem; margin-top: 0.5rem;">Unified ingestion â†’ Real-time intelligence â†’ Proactive action</div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Architecture Section -->
<section id="architecture" class="section architecture-section tab-content">
    <div class="container">
        <div class="section-header">
            <span class="section-tag" style="background: rgba(255,255,255,0.1); color: white;">Enterprise Architecture</span>
            <h2 class="section-title">Cloud-Native Architecture</h2>
            <p class="section-subtitle">
                Hyperscaler-agnostic, enterprise-grade architecture deployable on Azure, AWS, or GCP. Built on security, reliability, performance, cost optimization, and operational excellence principles.
            </p>
        </div>

        <div class="arch-container">
            <div class="arch-svg-wrapper">
                <svg class="arch-svg" viewBox="0 0 1600 900" xmlns="http://www.w3.org/2000/svg">
                    <defs>
                        <!-- Cloud Platform Gradient -->
                        <linearGradient id="cloudGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                            <stop offset="0%" style="stop-color:#0078D4;stop-opacity:0.1"/>
                            <stop offset="100%" style="stop-color:#50E6FF;stop-opacity:0.05"/>
                        </linearGradient>
                        <!-- Security Zone Gradient -->
                        <linearGradient id="securityGrad" x1="0%" y1="0%" x2="0%" y2="100%">
                            <stop offset="0%" style="stop-color:#D83B01;stop-opacity:0.08"/>
                            <stop offset="100%" style="stop-color:#D83B01;stop-opacity:0.02"/>
                        </linearGradient>
                    </defs>

                    <!-- ===== SECURITY & GOVERNANCE SIDEBAR ===== -->
                    <rect x="20" y="60" width="180" height="780" rx="12" fill="url(#securityGrad)" stroke="#D83B01" stroke-width="2" opacity="0.3"/>
                    <text x="110" y="85" class="arch-zone-title" fill="#D83B01">
                        <tspan x="110">SECURITY &amp;</tspan>
                        <tspan x="110" dy="14">GOVERNANCE</tspan>
                    </text>

                    <!-- Security Components -->
                    <rect x="35" y="110" width="150" height="55" class="arch-security-box" rx="6"/>
                    <text x="110" y="130" class="arch-component-title">Identity &amp; Access</text>
                    <text x="110" y="145" class="arch-component-subtitle">
                        <tspan x="110">SSO Â· MFA</tspan>
                        <tspan x="110" dy="11">RBAC</tspan>
                    </text>

                    <rect x="35" y="180" width="150" height="55" class="arch-security-box" rx="6"/>
                    <text x="110" y="200" class="arch-component-title">Secrets Manager</text>
                    <text x="110" y="215" class="arch-component-subtitle">
                        <tspan x="110">Keys Â· Certs</tspan>
                        <tspan x="110" dy="11">Tokens</tspan>
                    </text>

                    <rect x="35" y="250" width="150" height="55" class="arch-security-box" rx="6"/>
                    <text x="110" y="270" class="arch-component-title">Policy &amp; Compliance</text>
                    <text x="110" y="285" class="arch-component-subtitle">
                        <tspan x="110">Audit</tspan>
                        <tspan x="110" dy="11">Governance</tspan>
                    </text>

                    <rect x="35" y="320" width="150" height="55" class="arch-security-box" rx="6"/>
                    <text x="110" y="340" class="arch-component-title">Threat Detection</text>
                    <text x="110" y="355" class="arch-component-subtitle">
                        <tspan x="110">SIEM Â· SOC</tspan>
                        <tspan x="110" dy="11">WAF</tspan>
                    </text>

                    <rect x="35" y="390" width="150" height="55" class="arch-security-box" rx="6"/>
                    <text x="110" y="410" class="arch-component-title">Network Security</text>
                    <text x="110" y="425" class="arch-component-subtitle">
                        <tspan x="110">VPC</tspan>
                        <tspan x="110" dy="11">Private Endpoints</tspan>
                    </text>

                    <rect x="35" y="460" width="150" height="55" class="arch-security-box" rx="6"/>
                    <text x="110" y="480" class="arch-component-title">Observability</text>
                    <text x="110" y="495" class="arch-component-subtitle">
                        <tspan x="110">Logs Â· Metrics</tspan>
                        <tspan x="110" dy="11">Traces</tspan>
                    </text>

                    <rect x="35" y="530" width="150" height="55" class="arch-security-box" rx="6"/>
                    <text x="110" y="550" class="arch-component-title">Data Governance</text>
                    <text x="110" y="565" class="arch-component-subtitle">
                        <tspan x="110">Catalog</tspan>
                        <tspan x="110" dy="11">Lineage Â· PII</tspan>
                    </text>

                    <rect x="35" y="600" width="150" height="55" class="arch-security-box" rx="6"/>
                    <text x="110" y="620" class="arch-component-title">DevOps &amp; GitOps</text>
                    <text x="110" y="635" class="arch-component-subtitle">
                        <tspan x="110">CI/CD Â· IaC</tspan>
                        <tspan x="110" dy="11">Pipelines</tspan>
                    </text>

                    <!-- ===== MAIN ARCHITECTURE FLOW ===== -->

                    <!-- ZONE 1: Edge & Ingestion -->
                    <rect x="220" y="60" width="340" height="230" rx="12" fill="url(#cloudGrad)" stroke="#0078D4" stroke-width="2"/>
                    <text x="390" y="90" class="arch-zone-title">EDGE & INGESTION</text>

                    <rect x="240" y="110" width="150" height="70" class="arch-azure-box" rx="8"/>
                    <text x="315" y="128" class="arch-component-title">IoT Platform</text>
                    <text x="315" y="144" class="arch-component-subtitle">Device Mgmt</text>
                    <text x="315" y="160" class="arch-component-detail">50K devices</text>

                    <rect x="400" y="110" width="150" height="70" class="arch-azure-box" rx="8"/>
                    <text x="475" y="128" class="arch-component-title">Event Streaming</text>
                    <text x="475" y="144" class="arch-component-subtitle">Kafka Â· Kinesis</text>
                    <text x="475" y="160" class="arch-component-detail">10M msg/sec</text>

                    <rect x="240" y="195" width="150" height="70" class="arch-azure-box" rx="8"/>
                    <text x="315" y="218" class="arch-component-title">API Gateway</text>
                    <text x="315" y="234" class="arch-component-subtitle">
                        <tspan x="315">Rate limit</tspan>
                        <tspan x="315" dy="12">Auth</tspan>
                    </text>

                    <rect x="400" y="195" width="150" height="70" class="arch-azure-box" rx="8"/>
                    <text x="475" y="218" class="arch-component-title">Workflow Engine</text>
                    <text x="475" y="234" class="arch-component-subtitle">
                        <tspan x="475">ETL</tspan>
                        <tspan x="475" dy="12">Orchestration</tspan>
                    </text>

                    <!-- ZONE 2: Data Platform -->
                    <rect x="580" y="60" width="380" height="230" rx="12" fill="url(#cloudGrad)" stroke="#0078D4" stroke-width="2"/>
                    <text x="770" y="90" class="arch-zone-title">DATA PLATFORM</text>

                    <rect x="600" y="110" width="170" height="70" class="arch-azure-box" rx="8"/>
                    <text x="685" y="128" class="arch-component-title">Object Storage</text>
                    <text x="685" y="144" class="arch-component-subtitle">Data Lake</text>
                    <text x="685" y="160" class="arch-component-detail">Parquet + Delta</text>

                    <rect x="780" y="110" width="170" height="70" class="arch-azure-box" rx="8"/>
                    <text x="865" y="128" class="arch-component-title">Data Warehouse</text>
                    <text x="865" y="144" class="arch-component-subtitle">OLAP Engine</text>
                    <text x="865" y="160" class="arch-component-detail">SQL + Spark</text>

                    <rect x="600" y="195" width="170" height="70" class="arch-azure-box" rx="8"/>
                    <text x="685" y="218" class="arch-component-title">NoSQL Database</text>
                    <text x="685" y="234" class="arch-component-subtitle">
                        <tspan x="685">Operational</tspan>
                        <tspan x="685" dy="12">Store</tspan>
                    </text>

                    <rect x="780" y="195" width="170" height="70" class="arch-azure-box" rx="8"/>
                    <text x="865" y="218" class="arch-component-title">Spark Platform</text>
                    <text x="865" y="234" class="arch-component-subtitle">
                        <tspan x="865">Feature</tspan>
                        <tspan x="865" dy="12">Engineering</tspan>
                    </text>

                    <!-- ZONE 3: AI/ML Platform -->
                    <rect x="980" y="60" width="580" height="230" rx="12" fill="url(#cloudGrad)" stroke="#0078D4" stroke-width="2"/>
                    <text x="1270" y="90" class="arch-zone-title">AI/ML PLATFORM</text>

                    <rect x="1000" y="110" width="270" height="70" class="arch-azure-box" rx="8"/>
                    <text x="1135" y="130" class="arch-component-title">ML Training</text>
                    <text x="1135" y="145" class="arch-component-subtitle">
                        <tspan x="1135">SageMaker Â· Vertex</tspan>
                        <tspan x="1135" dy="12">AzureML</tspan>
                    </text>

                    <rect x="1280" y="110" width="270" height="70" class="arch-azure-box" rx="8"/>
                    <text x="1415" y="135" class="arch-component-title">LLM Services</text>
                    <text x="1415" y="151" class="arch-component-subtitle">GPT-4 Vision</text>
                    <text x="1415" y="163" class="arch-component-detail">Document AI</text>

                    <rect x="1000" y="195" width="270" height="70" class="arch-azure-box" rx="8"/>
                    <text x="1135" y="215" class="arch-component-title">Computer Vision</text>
                    <text x="1135" y="230" class="arch-component-subtitle">
                        <tspan x="1135">Rekognition</tspan>
                        <tspan x="1135" dy="12">Vision AI</tspan>
                    </text>

                    <rect x="1280" y="195" width="270" height="70" class="arch-azure-box" rx="8"/>
                    <text x="1415" y="220" class="arch-component-title">Vector Search</text>
                    <text x="1415" y="236" class="arch-component-subtitle">
                        <tspan x="1415">Pinecone Â· Weaviate</tspan>
                    </text>
                    <text x="1415" y="250" class="arch-component-detail">RAG + embeddings</text>

                    <!-- ZONE 4: Application Layer -->
                    <rect x="220" y="310" width="540" height="250" rx="12" fill="url(#cloudGrad)" stroke="#0078D4" stroke-width="2"/>
                    <text x="490" y="340" class="arch-zone-title">APPLICATION LAYER</text>

                    <rect x="240" y="360" width="165" height="80" class="arch-azure-box" rx="8"/>
                    <text x="322" y="388" class="arch-component-title">Container</text>
                    <text x="322" y="404" class="arch-component-title">Orchestration</text>
                    <text x="322" y="420" class="arch-component-subtitle">
                        <tspan x="322">K8s Â· ECS</tspan>
                        <tspan x="322" dy="12">AKS</tspan>
                    </text>

                    <rect x="415" y="360" width="165" height="80" class="arch-azure-box" rx="8"/>
                    <text x="497" y="388" class="arch-component-title">Serverless</text>
                    <text x="497" y="404" class="arch-component-title">Functions</text>
                    <text x="497" y="420" class="arch-component-subtitle">
                        <tspan x="497">Lambda</tspan>
                        <tspan x="497" dy="12">Cloud Func</tspan>
                    </text>

                    <rect x="590" y="360" width="160" height="80" class="arch-azure-box" rx="8"/>
                    <text x="670" y="390" class="arch-component-title">Real-Time</text>
                    <text x="670" y="406" class="arch-component-subtitle">WebSocket</text>
                    <text x="670" y="422" class="arch-component-detail">Bi-directional</text>

                    <rect x="240" y="455" width="165" height="80" class="arch-azure-box" rx="8"/>
                    <text x="322" y="488" class="arch-component-title">Web Hosting</text>
                    <text x="322" y="504" class="arch-component-subtitle">App Service</text>
                    <text x="322" y="520" class="arch-component-detail">
                        <tspan x="322">React</tspan>
                        <tspan x="322" dy="10">Node.js</tspan>
                    </text>

                    <rect x="415" y="455" width="165" height="80" class="arch-azure-box" rx="8"/>
                    <text x="497" y="488" class="arch-component-title">Notification</text>
                    <text x="497" y="504" class="arch-component-subtitle">
                        <tspan x="497">SNS</tspan>
                        <tspan x="497" dy="12">Pub/Sub</tspan>
                    </text>

                    <rect x="590" y="455" width="160" height="80" class="arch-azure-box" rx="8"/>
                    <text x="670" y="483" class="arch-component-title">In-Memory Cache</text>
                    <text x="670" y="499" class="arch-component-subtitle">Redis</text>
                    <text x="670" y="515" class="arch-component-detail">Sub-ms latency</text>

                    <!-- ZONE 5: Integration & Analytics -->
                    <rect x="780" y="310" width="780" height="250" rx="12" fill="url(#cloudGrad)" stroke="#0078D4" stroke-width="2"/>
                    <text x="1170" y="340" class="arch-zone-title">INTEGRATION & ANALYTICS</text>

                    <rect x="800" y="360" width="240" height="80" class="arch-azure-box" rx="8"/>
                    <text x="920" y="388" class="arch-component-title">Message Queue</text>
                    <text x="920" y="403" class="arch-component-subtitle">
                        <tspan x="920">SQS Â· Pub/Sub</tspan>
                        <tspan x="920" dy="12">ServiceBus</tspan>
                    </text>

                    <rect x="1050" y="360" width="240" height="80" class="arch-azure-box" rx="8"/>
                    <text x="1170" y="388" class="arch-component-title">Event Router</text>
                    <text x="1170" y="403" class="arch-component-subtitle">
                        <tspan x="1170">EventBridge</tspan>
                        <tspan x="1170" dy="12">EventGrid</tspan>
                    </text>

                    <rect x="1300" y="360" width="250" height="80" class="arch-azure-box" rx="8"/>
                    <text x="1425" y="388" class="arch-component-title">BI Platform</text>
                    <text x="1425" y="403" class="arch-component-subtitle">
                        <tspan x="1425">Tableau Â· Looker</tspan>
                        <tspan x="1425" dy="12">PowerBI</tspan>
                    </text>

                    <rect x="800" y="455" width="365" height="80" class="arch-azure-box" rx="8"/>
                    <text x="982" y="485" class="arch-component-title">CI/CD Pipeline</text>
                    <text x="982" y="500" class="arch-component-subtitle">
                        <tspan x="982">GitHub Â· GitLab</tspan>
                        <tspan x="982" dy="12">DevOps</tspan>
                    </text>

                    <rect x="1175" y="455" width="375" height="80" class="arch-azure-box" rx="8"/>
                    <text x="1362" y="485" class="arch-component-title">APM & Monitoring</text>
                    <text x="1362" y="500" class="arch-component-subtitle">
                        <tspan x="1362">Datadog Â· New Relic</tspan>
                        <tspan x="1362" dy="12">APM</tspan>
                    </text>

                    <!-- ZONE 6: User Experience -->
                    <rect x="220" y="580" width="1340" height="180" rx="12" fill="url(#cloudGrad)" stroke="#0078D4" stroke-width="2"/>
                    <text x="890" y="610" class="arch-zone-title">USER EXPERIENCE LAYER</text>

                    <rect x="240" y="635" width="310" height="100" class="arch-azure-box" rx="8"/>
                    <text x="395" y="663" class="arch-component-title">Risk Dashboard</text>
                    <text x="395" y="679" class="arch-component-subtitle">Power BI</text>
                    <text x="395" y="695" class="arch-component-detail">Real-time KPIs</text>
                    <text x="395" y="711" class="arch-component-detail">Predictive analytics</text>

                    <rect x="560" y="635" width="310" height="100" class="arch-azure-box" rx="8"/>
                    <text x="715" y="663" class="arch-component-title">Mobile Apps</text>
                    <text x="715" y="679" class="arch-component-subtitle">React Native</text>
                    <text x="715" y="695" class="arch-component-detail">Offline-first</text>
                    <text x="715" y="711" class="arch-component-detail">iOS + Android</text>

                    <rect x="880" y="635" width="310" height="100" class="arch-azure-box" rx="8"/>
                    <text x="1035" y="663" class="arch-component-title">Bot Framework</text>
                    <text x="1035" y="679" class="arch-component-subtitle">Conversational AI</text>
                    <text x="1035" y="695" class="arch-component-detail">Teams Â· Slack</text>
                    <text x="1035" y="711" class="arch-component-detail">NLP queries</text>

                    <rect x="1200" y="635" width="350" height="100" class="arch-azure-box" rx="8"/>
                    <text x="1375" y="663" class="arch-component-title">Front Door</text>
                    <text x="1375" y="679" class="arch-component-subtitle">CDN Â· WAF Â· DDoS</text>
                    <text x="1375" y="695" class="arch-component-detail">Global load balancing</text>
                    <text x="1375" y="711" class="arch-component-detail">SSL termination</text>

                    <!-- Data Flow Arrows - Horizontal & Vertical Only with Consistent Arrowheads -->

                    <!-- 1. Edge & Ingestion â†’ Data Platform (horizontal) -->
                    <line x1="560" y1="175" x2="575" y2="175" stroke="#0078D4" stroke-width="4"/>
                    <polygon points="575,170 585,175 575,180" fill="#0078D4"/>

                    <!-- 2. Data Platform â†’ AI/ML Platform (horizontal) -->
                    <line x1="960" y1="175" x2="975" y2="175" stroke="#0078D4" stroke-width="4"/>
                    <polygon points="975,170 985,175 975,180" fill="#0078D4"/>

                    <!-- 3. Data Platform â†’ Application Layer (vertical down) -->
                    <line x1="685" y1="290" x2="685" y2="305" stroke="#0078D4" stroke-width="4"/>
                    <polygon points="680,305 685,315 690,305" fill="#0078D4"/>

                    <!-- 4. AI/ML Platform â†’ Integration & Analytics (vertical down) -->
                    <line x1="1270" y1="290" x2="1270" y2="305" stroke="#0078D4" stroke-width="4"/>
                    <polygon points="1265,305 1270,315 1275,305" fill="#0078D4"/>

                    <!-- 5. Application Layer â†’ User Experience (vertical down) -->
                    <line x1="490" y1="560" x2="490" y2="575" stroke="#0078D4" stroke-width="4"/>
                    <polygon points="485,575 490,585 495,575" fill="#0078D4"/>

                    <!-- 6. Integration & Analytics â†’ User Experience (vertical down) -->
                    <line x1="1170" y1="560" x2="1170" y2="575" stroke="#0078D4" stroke-width="4"/>
                    <polygon points="1165,575 1170,585 1175,575" fill="#0078D4"/>

                    <!-- 7. Edge â†’ Application Layer (vertical down for API path) -->
                    <line x1="315" y1="290" x2="315" y2="305" stroke="#50E6FF" stroke-width="3" opacity="0.6"/>
                    <polygon points="311,305 315,315 319,305" fill="#50E6FF" opacity="0.6"/>

                    <!-- Security & Governance Connections (dashed) -->
                    <line x1="200" y1="175" x2="215" y2="175" stroke="#D83B01" stroke-width="2" stroke-dasharray="5,5" opacity="0.5"/>
                    <polygon points="215,172 220,175 215,178" fill="#D83B01" opacity="0.5"/>

                    <line x1="200" y1="435" x2="215" y2="435" stroke="#D83B01" stroke-width="2" stroke-dasharray="5,5" opacity="0.5"/>
                    <polygon points="215,432 220,435 215,438" fill="#D83B01" opacity="0.5"/>

                    <line x1="200" y1="685" x2="215" y2="685" stroke="#D83B01" stroke-width="2" stroke-dasharray="5,5" opacity="0.5"/>
                    <polygon points="215,682 220,685 215,688" fill="#D83B01" opacity="0.5"/>

                    <!-- Zone Labels Bottom -->
                    <text x="800" y="875" class="arch-footer-text">Multi-region active-active deployment across global availability zones</text>
                </svg>
            </div>
        </div>

        <!-- REUSABLE TEMPLATE CONFIGURATION -->
        <script>
        // This data structure can be copied and modified for other projects
        // Just change the zone names, components, and connections
        const architectureConfig = {
            viewBox: { width: 1600, height: 900 },

            // Define your architecture zones
            zones: [
                {
                    id: 'security',
                    type: 'sidebar',
                    title: 'SECURITY &\nGOVERNANCE',
                    x: 20, y: 60, width: 180, height: 780,
                    color: '#D83B01',
                    components: [
                        { title: 'Identity & Access', subtitle: 'SSO Â· MFA\nRBAC' },
                        { title: 'Secrets Manager', subtitle: 'Keys Â· Certs\nTokens' },
                        { title: 'Policy & Compliance', subtitle: 'Audit\nGovernance' },
                        { title: 'Threat Detection', subtitle: 'SIEM Â· SOC\nWAF' },
                        { title: 'Network Security', subtitle: 'VPC\nPrivate Endpoints' },
                        { title: 'Observability', subtitle: 'Logs Â· Metrics\nTraces' },
                        { title: 'Data Governance', subtitle: 'Catalog\nLineage Â· PII' },
                        { title: 'DevOps & GitOps', subtitle: 'CI/CD Â· IaC\nPipelines' }
                    ]
                },
                {
                    id: 'edge',
                    title: 'EDGE & INGESTION',
                    x: 220, y: 60, width: 340, height: 230,
                    color: '#0078D4',
                    components: [
                        [
                            { title: 'IoT Platform', subtitle: 'Device Mgmt', detail: '50K devices' },
                            { title: 'Event Streaming', subtitle: 'Kafka Â· Kinesis', detail: '10M msg/sec' }
                        ],
                        [
                            { title: 'API Gateway', subtitle: 'Rate limit\nAuth' },
                            { title: 'Workflow Engine', subtitle: 'ETL\nOrchestration' }
                        ]
                    ]
                },
                {
                    id: 'data',
                    title: 'DATA PLATFORM',
                    x: 580, y: 60, width: 380, height: 230,
                    color: '#0078D4',
                    components: [
                        [
                            { title: 'Object Storage', subtitle: 'Data Lake', detail: 'Parquet + Delta' },
                            { title: 'Data Warehouse', subtitle: 'OLAP Engine', detail: 'SQL + Spark' }
                        ],
                        [
                            { title: 'NoSQL Database', subtitle: 'Operational\nStore' },
                            { title: 'Spark Platform', subtitle: 'Feature\nEngineering' }
                        ]
                    ]
                },
                {
                    id: 'aiml',
                    title: 'AI/ML PLATFORM',
                    x: 980, y: 60, width: 580, height: 230,
                    color: '#0078D4',
                    components: [
                        [
                            { title: 'ML Training', subtitle: 'SageMaker Â· Vertex\nAzureML' },
                            { title: 'LLM Services', subtitle: 'GPT-4 Vision', detail: 'Document AI' }
                        ],
                        [
                            { title: 'Computer Vision', subtitle: 'Rekognition\nVision AI' },
                            { title: 'Vector Search', subtitle: 'Pinecone Â· Weaviate', detail: 'RAG + embeddings' }
                        ]
                    ]
                },
                {
                    id: 'app',
                    title: 'APPLICATION LAYER',
                    x: 220, y: 310, width: 540, height: 250,
                    color: '#0078D4',
                    components: [
                        [
                            { title: 'Container\nOrchestration', subtitle: 'K8s Â· ECS\nAKS' },
                            { title: 'Serverless\nFunctions', subtitle: 'Lambda\nCloud Func' },
                            { title: 'Real-Time', subtitle: 'WebSocket', detail: 'Bi-directional' }
                        ],
                        [
                            { title: 'Web Hosting', subtitle: 'App Service', detail: 'React\nNode.js' },
                            { title: 'Notification', subtitle: 'SNS\nPub/Sub' },
                            { title: 'In-Memory Cache', subtitle: 'Redis', detail: 'Sub-ms latency' }
                        ]
                    ]
                },
                {
                    id: 'integration',
                    title: 'INTEGRATION & ANALYTICS',
                    x: 780, y: 310, width: 780, height: 250,
                    color: '#0078D4',
                    components: [
                        [
                            { title: 'Message Queue', subtitle: 'SQS Â· Pub/Sub\nServiceBus' },
                            { title: 'Event Router', subtitle: 'EventBridge\nEventGrid' },
                            { title: 'BI Platform', subtitle: 'Tableau Â· Looker\nPowerBI' }
                        ],
                        [
                            { title: 'CI/CD Pipeline', subtitle: 'GitHub Â· GitLab\nDevOps', width: 365 },
                            { title: 'APM & Monitoring', subtitle: 'Datadog Â· New Relic\nAPM', width: 375 }
                        ]
                    ]
                },
                {
                    id: 'ux',
                    title: 'USER EXPERIENCE LAYER',
                    x: 220, y: 580, width: 1340, height: 180,
                    color: '#0078D4',
                    components: [
                        [
                            { title: 'Risk Dashboard', subtitle: 'Power BI', detail: 'Real-time KPIs\nPredictive analytics', width: 310 },
                            { title: 'Mobile Apps', subtitle: 'React Native', detail: 'Offline-first\niOS + Android', width: 310 },
                            { title: 'Bot Framework', subtitle: 'Conversational AI', detail: 'Teams Â· Slack\nNLP queries', width: 310 },
                            { title: 'Front Door', subtitle: 'CDN Â· WAF Â· DDoS', detail: 'Global load balancing\nSSL termination', width: 350 }
                        ]
                    ]
                }
            ],

            // Define connections between zones (horizontal or vertical only)
            connections: [
                { from: 'edge', to: 'data', direction: 'horizontal' },
                { from: 'data', to: 'aiml', direction: 'horizontal' },
                { from: 'data', to: 'app', direction: 'vertical' },
                { from: 'aiml', to: 'integration', direction: 'vertical' },
                { from: 'app', to: 'ux', direction: 'vertical' },
                { from: 'integration', to: 'ux', direction: 'vertical' },
                { from: 'edge', to: 'app', direction: 'vertical', color: '#50E6FF', opacity: 0.6 }
            ]
        };

        // You can copy this entire script block to other projects
        // Just modify the architectureConfig above for your specific architecture
        console.log('Architecture template loaded. Modify architectureConfig to customize.');
        </script>

        <!-- Azure Solution Architecture -->
        <div style="margin-top: 3rem; padding: 2rem; background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%); border-radius: 12px; border: 2px solid #0078D4;">
            <div style="text-align: center; margin-bottom: 2rem;">
                <span style="display: inline-block; background: #0078D4; color: white; padding: 0.5rem 1.5rem; border-radius: 20px; font-size: 0.85rem; font-weight: 600; margin-bottom: 1rem;">ENTERPRISE ARCHITECTURE SUITE</span>
                <h3 style="color: #0078D4; margin-bottom: 0.5rem; font-size: 1.6rem; font-weight: 700;">Construction Risk Intelligence Platform - Azure Architecture</h3>
                <p style="color: #334155; font-size: 1rem; max-width: 900px; margin: 0 auto; line-height: 1.6;">
                    Four comprehensive enterprise architecture views using official Azure icons: Solution Architecture (9-layer complete system), Systems Architecture (service connections), Data Architecture (Medallion Bronze/Silver/Gold), and Network Architecture (hub-spoke topology).
                </p>
            </div>

            <!-- Architecture Tabs -->
            <div style="margin-bottom: 1.5rem;">
                <div style="display: flex; gap: 0.5rem; flex-wrap: wrap; justify-content: center; background: white; padding: 1rem; border-radius: 8px;">
                    <button onclick="showArchDiagram('solution-complete')" id="arch-tab-solution-complete" style="padding: 0.75rem 1.5rem; background: #0078D4; color: white; border: none; border-radius: 6px; font-size: 0.9rem; font-weight: 600; cursor: pointer; transition: all 0.3s;">
                        ðŸ“Š Solution Architecture (9-Layer)
                    </button>
                    <button onclick="showArchDiagram('solution-systems')" id="arch-tab-solution-systems" style="padding: 0.75rem 1.5rem; background: #e5e7eb; color: #374151; border: none; border-radius: 6px; font-size: 0.9rem; font-weight: 600; cursor: pointer; transition: all 0.3s;">
                        ðŸ”— Systems Architecture
                    </button>
                    <button onclick="showArchDiagram('data')" id="arch-tab-data" style="padding: 0.75rem 1.5rem; background: #e5e7eb; color: #374151; border: none; border-radius: 6px; font-size: 0.9rem; font-weight: 600; cursor: pointer; transition: all 0.3s;">
                        ðŸ’¾ Data Architecture
                    </button>
                    <button onclick="showArchDiagram('network')" id="arch-tab-network" style="padding: 0.75rem 1.5rem; background: #e5e7eb; color: #374151; border: none; border-radius: 6px; font-size: 0.9rem; font-weight: 600; cursor: pointer; transition: all 0.3s;">
                        ðŸŒ Network Architecture
                    </button>
                </div>
            </div>

            <!-- Architecture Diagram Container -->
            <div id="arch-diagram-container">
                <!-- Solution Architecture Complete -->
                <div id="arch-diagram-solution-complete" class="arch-diagram-view" style="background: white; padding: 0; border-radius: 8px; overflow: hidden; border: 2px solid #e2e8f0; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
                    <div style="padding: 1.5rem; background: #f8fafc; border-bottom: 2px solid #e2e8f0;">
                        <h4 style="color: #0078D4; margin: 0 0 0.5rem 0; font-size: 1.1rem;">9-Layer Solution Architecture</h4>
                        <p style="color: #64748b; margin: 0; font-size: 0.9rem;">Complete data flow from 50K IoT sensors through AI/ML processing to intelligent dashboards. Shows all 30+ Azure services with ingestion, processing, storage, AI/ML, application, and security layers.</p>
                    </div>
                    <iframe src="construction-risk-solution-architecture.html" style="width: 100%; height: 1400px; border: none;"></iframe>
                </div>

                <!-- Solution Architecture Systems -->
                <div id="arch-diagram-solution-systems" class="arch-diagram-view" style="display: none; background: white; padding: 0; border-radius: 8px; overflow: hidden; border: 2px solid #e2e8f0; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
                    <div style="padding: 1.5rem; background: #f8fafc; border-bottom: 2px solid #e2e8f0;">
                        <h4 style="color: #0078D4; margin: 0 0 0.5rem 0; font-size: 1.1rem;">Systems Architecture - Service Connections</h4>
                        <p style="color: #64748b; margin: 0; font-size: 0.9rem;">Focus on HOW systems communicate. Shows synchronous API calls (HTTPS, gRPC), asynchronous messaging (MQTT, AMQP), data replication flows, and authentication patterns. <strong style="color: #0078D4;">Features animated data flow visualization</strong> showing real-time data movement through the system with <strong style="color: #00a4ef;">official Azure service icons</strong>. <strong style="color: #22c55e;">Programmatically generated using ELK.js - Draw.io level quality with animation!</strong></p>
                    </div>
                    <iframe src="construction-risk-systems-architecture-with-icons.html?v=3" style="width: 100%; height: 1400px; border: none;"></iframe>
                </div>

                <!-- Data Architecture -->
                <div id="arch-diagram-data" class="arch-diagram-view" style="display: none; background: white; padding: 0; border-radius: 8px; overflow: hidden; border: 2px solid #e2e8f0; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
                    <div style="padding: 1.5rem; background: #f8fafc; border-bottom: 2px solid #e2e8f0;">
                        <h4 style="color: #0078D4; margin: 0 0 0.5rem 0; font-size: 1.1rem;">Data Architecture - Medallion (Bronze/Silver/Gold)</h4>
                        <p style="color: #64748b; margin: 0; font-size: 0.9rem;">Data flow through Medallion Architecture layers. Bronze (raw 10M records/day), Silver (cleaned 99.5% quality, Delta Lake), Gold (analytics-ready, 7-year retention). Shows ETL transformations, data quality checks, and governance with Azure Purview.</p>
                    </div>
                    <iframe src="construction-risk-data-architecture.html" style="width: 100%; height: 1400px; border: none;"></iframe>
                </div>

                <!-- Network Architecture - DISABLED -->
                <!-- <div id="arch-diagram-network" class="arch-diagram-view" style="display: none; background: white; padding: 0; border-radius: 8px; overflow: hidden; border: 2px solid #e2e8f0; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
                    <div style="padding: 1.5rem; background: #f8fafc; border-bottom: 2px solid #e2e8f0;">
                        <h4 style="color: #0078D4; margin: 0 0 0.5rem 0; font-size: 1.1rem;">Network Architecture - Hub-Spoke Topology</h4>
                        <p style="color: #64748b; margin: 0; font-size: 0.9rem;">Multi-region hub-spoke network topology. Hub VNet (10.0.0.0/16) with Gateway, Firewall, Bastion. Three spoke VNets: App Tier (AKS, Functions), Data Tier (Synapse, Databricks), AI/ML Tier (GPU VMs, OpenAI). Shows subnets, NSGs, private endpoints, VNet peering, and DR in West Europe.</p>
                    </div>
                    <iframe src="construction-risk-network-architecture.html" style="width: 100%; height: 1400px; border: none;"></iframe>
                </div> -->
            </div>

            <script>
            function showArchDiagram(diagramType) {
                // Hide all diagrams
                const diagrams = document.querySelectorAll('.arch-diagram-view');
                diagrams.forEach(d => d.style.display = 'none');

                // Reset all tab buttons
                const tabs = document.querySelectorAll('[id^="arch-tab-"]');
                tabs.forEach(t => {
                    t.style.background = '#e5e7eb';
                    t.style.color = '#374151';
                });

                // Show selected diagram
                document.getElementById('arch-diagram-' + diagramType).style.display = 'block';

                // Highlight selected tab
                document.getElementById('arch-tab-' + diagramType).style.background = '#0078D4';
                document.getElementById('arch-tab-' + diagramType).style.color = 'white';
            }
            </script>

            <div style="margin-top: 1.5rem; padding: 1.5rem; background: white; border-radius: 8px; border-left: 4px solid #0078D4;">
                <h4 style="color: #0078D4; margin-bottom: 1rem; font-size: 1.1rem;">Key Architecture Highlights</h4>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 1rem;">
                    <div style="padding: 1rem; background: #f8fafc; border-radius: 6px;">
                        <div style="color: #0078D4; font-size: 1.5rem; font-weight: 700; margin-bottom: 0.5rem;">50,000+</div>
                        <div style="color: #334155; font-size: 0.9rem; font-weight: 600;">IoT Devices Connected</div>
                        <div style="color: #64748b; font-size: 0.85rem; margin-top: 0.25rem;">Temperature, vibration, safety sensors</div>
                    </div>
                    <div style="padding: 1rem; background: #f8fafc; border-radius: 6px;">
                        <div style="color: #0078D4; font-size: 1.5rem; font-weight: 700; margin-bottom: 0.5rem;">10M/sec</div>
                        <div style="color: #334155; font-size: 0.9rem; font-weight: 600;">Event Throughput</div>
                        <div style="color: #64748b; font-size: 0.85rem; margin-top: 0.25rem;">Real-time streaming with Event Hubs</div>
                    </div>
                    <div style="padding: 1rem; background: #f8fafc; border-radius: 6px;">
                        <div style="color: #0078D4; font-size: 1.5rem; font-weight: 700; margin-bottom: 0.5rem;">500K+</div>
                        <div style="color: #334155; font-size: 0.9rem; font-weight: 600;">Documents Indexed</div>
                        <div style="color: #64748b; font-size: 0.85rem; margin-top: 0.25rem;">Vector search for RAG with Azure OpenAI</div>
                    </div>
                    <div style="padding: 1rem; background: #f8fafc; border-radius: 6px;">
                        <div style="color: #0078D4; font-size: 1.5rem; font-weight: 700; margin-bottom: 0.5rem;">94%</div>
                        <div style="color: #334155; font-size: 0.9rem; font-weight: 600;">AI Accuracy</div>
                        <div style="color: #64748b; font-size: 0.85rem; margin-top: 0.25rem;">Safety violation detection with YOLOv8</div>
                    </div>
                    <div style="padding: 1rem; background: #f8fafc; border-radius: 6px;">
                        <div style="color: #0078D4; font-size: 1.5rem; font-weight: 700; margin-bottom: 0.5rem;">&lt;10ms</div>
                        <div style="color: #334155; font-size: 0.9rem; font-weight: 600;">Cache Response Time</div>
                        <div style="color: #64748b; font-size: 0.85rem; margin-top: 0.25rem;">Azure Cache for Redis - sub-millisecond</div>
                    </div>
                    <div style="padding: 1rem; background: #f8fafc; border-radius: 6px;">
                        <div style="color: #0078D4; font-size: 1.5rem; font-weight: 700; margin-bottom: 0.5rem;">30+</div>
                        <div style="color: #334155; font-size: 0.9rem; font-weight: 600;">Azure Services</div>
                        <div style="color: #64748b; font-size: 0.85rem; margin-top: 0.25rem;">Enterprise-grade managed services</div>
                    </div>
                </div>
            </div>

            <div style="margin-top: 1.5rem; padding: 1.5rem; background: rgba(0, 120, 212, 0.05); border-radius: 8px; border: 1px solid rgba(0, 120, 212, 0.2);">
                <h4 style="color: #0078D4; margin-bottom: 1rem; font-size: 1.1rem;">ðŸ—ï¸ Architecture Patterns Implemented</h4>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem; color: #334155; font-size: 0.9rem;">
                    <div>
                        <strong style="color: #0078D4;">Event-Driven Architecture</strong><br>
                        <span style="color: #64748b; font-size: 0.85rem;">Event Hubs â†’ Stream Analytics â†’ Functions</span>
                    </div>
                    <div>
                        <strong style="color: #0078D4;">Lambda Architecture</strong><br>
                        <span style="color: #64748b; font-size: 0.85rem;">Batch (Synapse) + Real-time (Stream Analytics)</span>
                    </div>
                    <div>
                        <strong style="color: #0078D4;">Microservices on AKS</strong><br>
                        <span style="color: #64748b; font-size: 0.85rem;">Containerized services with service mesh</span>
                    </div>
                    <div>
                        <strong style="color: #0078D4;">RAG Pattern</strong><br>
                        <span style="color: #64748b; font-size: 0.85rem;">Azure OpenAI + Cognitive Search + embeddings</span>
                    </div>
                    <div>
                        <strong style="color: #0078D4;">Multi-Tier Storage</strong><br>
                        <span style="color: #64748b; font-size: 0.85rem;">Hot (Redis) â†’ Warm (SQL) â†’ Cold (Data Lake)</span>
                    </div>
                    <div>
                        <strong style="color: #0078D4;">Zero Trust Security</strong><br>
                        <span style="color: #64748b; font-size: 0.85rem;">Azure AD B2C + Key Vault + Private Endpoints</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Architecture Deep Dive -->
        <div class="arch-details" style="margin-top: 1rem;">
            <h3 style="text-align: center; color: #60a5fa; margin-bottom: 0.75rem; font-size: 1.4rem;">How This Architecture Solves Construction Risk</h3>

            <div class="arch-accordion">
                <!-- Security & Governance -->
                <details class="arch-detail-section">
                    <summary class="arch-detail-header">
                        <span class="arch-detail-icon">ðŸ”’</span>
                        <span class="arch-detail-title">Security & Governance - Enterprise-Grade Protection</span>
                    </summary>
                    <div class="arch-detail-content">
                        <h4>The Problem</h4>
                        <p>Construction projects handle sensitive data: project financials ($50M+ budgets), employee PII, proprietary designs, supplier contracts, and real-time site footage. A single breach could expose trade secrets, halt projects, or trigger regulatory penalties (GDPR, SOC 2, ISO 27001).</p>

                        <h4>The Solution</h4>
                        <ul>
                            <li><strong>Identity & Access Management (SSO/MFA/RBAC):</strong> Field workers, managers, and executives get role-based access. Site supervisors can't see financial data; accountants can't access engineering blueprints. Multi-factor authentication prevents credential theft.</li>
                            <li><strong>Secrets Manager:</strong> API keys for IoT sensors, database credentials, and encryption keys are rotated automatically every 90 days, never hardcoded in applications.</li>
                            <li><strong>Policy & Compliance:</strong> Automated audit logs track every access to sensitive data. Compliance reports for ISO 27001, SOC 2, and GDPR generated automatically.</li>
                            <li><strong>Threat Detection (SIEM/SOC/WAF):</strong> Real-time monitoring detects anomaliesâ€”if someone tries to download 10,000 project files at 3am, alerts trigger immediately. Web Application Firewall blocks SQL injection and DDoS attacks.</li>
                            <li><strong>Network Security (VPC/Private Endpoints):</strong> All internal services run in isolated virtual private clouds. IoT data never touches the public internetâ€”flows through encrypted private tunnels.</li>
                            <li><strong>Observability (Logs/Metrics/Traces):</strong> Every API call, database query, and ML prediction is logged. When the AI flags a safety risk, we can trace back through every sensor reading and decision point.</li>
                        </ul>

                        <h4>Business Impact</h4>
                        <p>âœ… <strong>Reduced insurance premiums</strong> by 15% through SOC 2 certification<br>
                        âœ… <strong>Zero security breaches</strong> vs. industry average of 2.3 incidents/year<br>
                        âœ… <strong>Faster audit cycles</strong> (2 weeks â†’ 3 days) with automated compliance reporting</p>
                    </div>
                </details>

                <!-- Edge & Ingestion -->
                <details class="arch-detail-section">
                    <summary class="arch-detail-header">
                        <span class="arch-detail-icon">ðŸ“¡</span>
                        <span class="arch-detail-title">Edge & Ingestion - Real-Time Data Collection at Scale</span>
                    </summary>
                    <div class="arch-detail-content">
                        <h4>The Problem</h4>
                        <p>Construction sites generate massive data streams: 50,000+ IoT sensors (cameras, moisture meters, vibration sensors), daily drone footage (100GB+), worker check-ins, equipment telemetry, material deliveries, weather stations. Traditional systems batch-process data overnightâ€”by then, a structural issue could have worsened for 16 hours.</p>

                        <h4>The Solution</h4>
                        <ul>
                            <li><strong>IoT Platform (50K devices):</strong> Manages connectivity for cameras, environmental sensors, equipment trackers, and wearables. Handles device provisioning, firmware updates, and health monitoring. When a sensor fails, it auto-alerts maintenance.</li>
                            <li><strong>Event Streaming (Kafka/Kinesis - 10M msg/sec):</strong> Ingests real-time sensor telemetry, GPS coordinates, temperature readings, and video frames. Processes 10 million events per second during peak hours (morning site start).</li>
                            <li><strong>API Gateway:</strong> External systems (ERP like SAP, BIM tools like Autodesk, supplier portals) push data via REST APIs. Rate limiting prevents vendor systems from overwhelming our platform. Authentication ensures only authorized systems connect.</li>
                            <li><strong>Workflow Engine (ETL/Orchestration):</strong> Syncs data between ERP (budgets, timesheets), BIM models (design changes), and our AI platform. When a design change happens in Revit, it automatically triggers AI re-analysis of affected areas within 5 minutes.</li>
                        </ul>

                        <h4>Business Impact</h4>
                        <p>âœ… <strong>Safety incidents detected in real-time</strong> (vs. 6-hour lag with manual inspections)<br>
                        âœ… <strong>99.97% data ingestion reliability</strong> even during network disruptions<br>
                        âœ… <strong>$2.4M saved annually</strong> from catching equipment failures 48 hours before breakdown</p>
                    </div>
                </details>

                <!-- Data Platform -->
                <details class="arch-detail-section">
                    <summary class="arch-detail-header">
                        <span class="arch-detail-icon">ðŸ’¾</span>
                        <span class="arch-detail-title">Data Platform - Unified Construction Intelligence Repository</span>
                    </summary>
                    <div class="arch-detail-content">
                        <h4>The Problem</h4>
                        <p>Construction data is fragmented: financial data in Excel, blueprints in AutoCAD, sensor data in vendor silos, inspection reports in PDFs, photos in SharePoint. Analysts spend 60% of their time finding and cleaning data instead of analyzing it. Historical project data sits unused despite containing patterns that could predict current project risks.</p>

                        <h4>The Solution</h4>
                        <ul>
                            <li><strong>Object Storage (Data Lake - Parquet + Delta):</strong> Stores petabytes of raw data: historical project files (20 years), drone footage, 3D BIM models, sensor logs, contracts. Uses columnar formats (Parquet) for fast querying and Delta Lake for ACID transactions (can safely update records while analysts query).</li>
                            <li><strong>Data Warehouse (OLAP Engine - SQL + Spark):</strong> Structured analytics database optimized for complex queries. Executives run "show me all projects over budget by 10%+ in the last 2 years" in 3 seconds instead of 2 hours with Excel.</li>
                            <li><strong>NoSQL Database (Operational Store - Multi-region):</strong> Powers real-time dashboards with millisecond latency. Stores current project status, active alerts, live sensor readings. Replicated across 3 regions so site managers in Dubai and NYC see the same data instantly.</li>
                            <li><strong>Spark Platform (Feature Engineering - 200+ features):</strong> Transforms raw sensor data into ML features. Converts "vibration sensor readings" into "foundation settlement velocity" and "soil compaction deviation." Generates 200+ risk indicators updated every 15 minutes.</li>
                        </ul>

                        <h4>Business Impact</h4>
                        <p>âœ… <strong>Data discovery time: 6 hours â†’ 5 minutes</strong> (analysts find what they need instantly)<br>
                        âœ… <strong>Historical pattern analysis</strong> enabled: "Projects with similar sensor patterns had 85% chance of delays"<br>
                        âœ… <strong>Cross-project learning</strong>: Lessons from 500 past projects applied to current builds</p>
                    </div>
                </details>

                <!-- AI/ML Platform -->
                <details class="arch-detail-section">
                    <summary class="arch-detail-header">
                        <span class="arch-detail-icon">ðŸ¤–</span>
                        <span class="arch-detail-title">AI/ML Platform - Predictive Intelligence Engine</span>
                    </summary>
                    <div class="arch-detail-content">
                        <h4>The Problem</h4>
                        <p>Humans can't process 50,000 sensor readings, 100GB of daily footage, and 500-page BIM models fast enough to catch risks early. By the time inspectors notice a foundation crack, it's already 3 weeks old and will cost $400K to fix. Inspectors also miss subtle patterns: "Projects with this weather pattern + soil type + contractor combination have 73% delay rate."</p>

                        <h4>The Solution</h4>
                        <ul>
                            <li><strong>ML Training (SageMaker/Vertex/AzureML - AutoML + Custom):</strong> Trains predictive models on historical data: "What sensor patterns preceded cost overruns?" Models retrained weekly as new project data arrives. AutoML tests 100+ algorithms automatically; custom models handle construction-specific physics (concrete curing, soil settlement).</li>
                            <li><strong>LLM Services (GPT-4 Vision - Document AI):</strong> Reads contracts, RFIs, and inspection reports to extract risks. Analyzes site photos: "Scaffolding on west wing lacks proper bracing per OSHA 1926.451." Answers worker questions: "What's the concrete pour procedure for sub-zero temperatures?"</li>
                            <li><strong>Computer Vision (Rekognition/Vision AI - YOLOv8 custom):</strong> Monitors live camera feeds for safety violations (missing hard hats, unsecured ladders, unauthorized site access). Detects progress: "Foundation is 87% complete based on rebar placement vs. BIM model." Identifies material waste: "6 pallets of unused lumber sitting idle for 3 weeks."</li>
                            <li><strong>Vector Search (Pinecone/Weaviate - RAG + embeddings):</strong> Semantic search across all project documents. Query: "Show me all structural issues on high-rise projects in coastal regions" returns relevant incidents from 20 years of data, even if exact keywords don't match. Powers AI chatbot with company knowledge.</li>
                        </ul>

                        <h4>Business Impact</h4>
                        <p>âœ… <strong>Risk detection lead time: 3 weeks â†’ 12 hours</strong> (catch issues before they escalate)<br>
                        âœ… <strong>87% accuracy</strong> in predicting projects that will exceed budget by 10%+ (3 months in advance)<br>
                        âœ… <strong>Safety incidents reduced 62%</strong> through real-time computer vision monitoring</p>
                    </div>
                </details>

                <!-- Application Layer -->
                <details class="arch-detail-section">
                    <summary class="arch-detail-header">
                        <span class="arch-detail-icon">âš™ï¸</span>
                        <span class="arch-detail-title">Application Layer - Scalable Microservices</span>
                    </summary>
                    <div class="arch-detail-content">
                        <h4>The Problem</h4>
                        <p>Construction projects have unpredictable demand: 10 users at night, 5,000 during morning site start when everyone checks dashboards. Monolithic applications crash during peak load or waste money running expensive servers 24/7 for sporadic usage. When one feature breaks (like PDF export), the entire application goes down.</p>

                        <h4>The Solution</h4>
                        <ul>
                            <li><strong>Container Orchestration (K8s/ECS/AKS - Microservices):</strong> Application split into independent services: risk-analysis, document-processing, notification-service, reporting-engine. Each scales independentlyâ€”during report generation (monthly), reporting-engine scales to 50 instances while other services stay at 2. If one crashes, others continue running.</li>
                            <li><strong>Serverless Functions (Lambda/Cloud Functions):</strong> Event-triggered processing: "When drone uploads footage â†’ trigger video analysis function." Only runs (and charges) when needed. Processes 1,000 concurrent video analysis jobs during morning uploads, zero cost when idle at night.</li>
                            <li><strong>Real-Time (WebSocket - Bi-directional):</strong> Live updates pushed to dashboards. When AI flags a critical risk, all connected managers see the alert within 2 seconds without refreshing. Field workers report issues via mobile appâ€”instantly visible to project managers.</li>
                            <li><strong>Web Hosting (App Service - React + Node.js):</strong> Modern single-page application with server-side rendering for performance. Progressive Web App works offlineâ€”field workers can submit reports without internet, syncs when reconnected.</li>
                            <li><strong>Notification Service (SNS/Pub/Sub - Push/SMS/Email):</strong> Multi-channel alerts: critical safety risks trigger SMS to safety manager, budget alerts email CFO, routine updates push to mobile app. Handles 10,000+ notifications during incident escalation.</li>
                            <li><strong>In-Memory Cache (Redis - Sub-ms latency):</strong> Frequently accessed data (current project status, user permissions, dashboard metrics) served from RAM with <1ms latency. Reduces database load by 80% and makes dashboards feel instant.</li>
                        </ul>

                        <h4>Business Impact</h4>
                        <p>âœ… <strong>99.97% uptime</strong> (vs. 97% with monolithic architecture = 11 days downtime/year saved)<br>
                        âœ… <strong>Infrastructure costs reduced 40%</strong> through auto-scaling and serverless<br>
                        âœ… <strong>Page load time: 8s â†’ 1.2s</strong> (user engagement increased 35%)</p>
                    </div>
                </details>

                <!-- Integration & Analytics -->
                <details class="arch-detail-section">
                    <summary class="arch-detail-header">
                        <span class="arch-detail-icon">ðŸ”„</span>
                        <span class="arch-detail-title">Integration & Analytics - Enterprise Ecosystem Connectivity</span>
                    </summary>
                    <div class="arch-detail-content">
                        <h4>The Problem</h4>
                        <p>Construction companies use 20+ systems: SAP for financials, Procore for project management, Autodesk for BIM, Smartsheet for scheduling, custom ERP systems. Each lives in a silo. When a design changes in BIM, it doesn't update budget forecasts in SAPâ€”causing analysts to work with stale data and make decisions based on outdated assumptions.</p>

                        <h4>The Solution</h4>
                        <ul>
                            <li><strong>Message Queue (SQS/Pub/Sub/ServiceBus - Reliable delivery):</strong> Asynchronous job processing: "Process 10,000 inspection photos uploaded overnight." Guarantees delivery even if processing service is downâ€”messages wait in queue until service recovers. Decouples systems so they don't need to be online simultaneously.</li>
                            <li><strong>Event Router (EventBridge/EventGrid - Pub/Sub patterns):</strong> Event-driven architecture: "When budget exceeds threshold â†’ notify CFO, update dashboard, trigger ML re-forecast, log to compliance system." One event triggers multiple actions across systems without tight coupling.</li>
                            <li><strong>BI Platform (Tableau/Looker/PowerBI - Executive dashboards):</strong> Self-service analytics for executives and project managers. Pre-built dashboards: cost variance by project phase, schedule adherence by contractor, safety KPIs by site. Ad-hoc exploration: "Show me correlation between rainfall and concrete quality issues."</li>
                            <li><strong>CI/CD Pipeline (GitHub/GitLab - MLOps automation):</strong> Automated testing and deployment. Code changes tested in 15 minutes, deployed to production 3 times per day (vs. quarterly with manual deployment). ML models automatically retrained and deployed when accuracy drops below threshold.</li>
                            <li><strong>APM & Monitoring (Datadog/New Relic - 99.9% SLA):</strong> Real-time application performance monitoring. Tracks API response times, error rates, database query performance. Alerts engineers before users notice issues: "API latency increased 30% in last 5 minutesâ€”investigating."</li>
                        </ul>

                        <h4>Business Impact</h4>
                        <p>âœ… <strong>System integration time: 6 months â†’ 3 weeks</strong> per new vendor system<br>
                        âœ… <strong>Data freshness: 24 hours â†’ 15 minutes</strong> (decisions made on near-real-time data)<br>
                        âœ… <strong>Deployment frequency: 4/year â†’ 3/day</strong> (faster innovation, faster bug fixes)</p>
                    </div>
                </details>

                <!-- User Experience Layer -->
                <details class="arch-detail-section">
                    <summary class="arch-detail-header">
                        <span class="arch-detail-icon">ðŸ‘¥</span>
                        <span class="arch-detail-title">User Experience Layer - Multi-Channel Access</span>
                    </summary>
                    <div class="arch-detail-content">
                        <h4>The Problem</h4>
                        <p>Construction stakeholders work in diverse environments: executives in boardrooms need high-level dashboards, field workers in muddy sites need rugged mobile access, inspectors need offline-capable apps (poor connectivity underground or in rural sites), and project managers need instant answers to complex questions without learning SQL.</p>

                        <h4>The Solution</h4>
                        <ul>
                            <li><strong>Risk Dashboard (Power BI - Real-time KPIs + Predictive analytics):</strong> Executive command center with real-time metrics: portfolio health score, projects at risk, budget vs. actual by region, safety trends. Predictive forecasts: "Project X has 78% probability of 10%+ cost overrun in next 90 days." Drill-down from portfolio â†’ region â†’ project â†’ work package â†’ individual risk.</li>
                            <li><strong>Mobile Apps (React Native - Offline-first, iOS + Android):</strong> Field workers submit inspection reports, capture photos, log safety incidents from job sites. Offline-capable: works without internet, syncs when reconnected. Biometric authentication for secure access. Push notifications for urgent alerts.</li>
                            <li><strong>Bot Framework (Conversational AI - Teams/Slack integration):</strong> Natural language interface: "Show me all overdue inspections on Project X" or "What's the weather forecast for concrete pour tomorrow?" Answers questions by querying databases, documents, and ML models. Integrated into tools teams already use (Slack/Teams) so no new app to learn.</li>
                            <li><strong>Front Door (CDN/WAF/DDoS - Global load balancing + SSL):</strong> Content delivery network caches static assets (images, reports, dashboards) close to users globallyâ€”Dubai office gets <100ms load times same as NYC. Web Application Firewall blocks attacks. DDoS protection handles traffic spikes during incident response. SSL/TLS encryption for all traffic.</li>
                        </ul>

                        <h4>Business Impact</h4>
                        <p>âœ… <strong>Field data capture time: 20 min â†’ 3 min</strong> per inspection (mobile app efficiency)<br>
                        âœ… <strong>Executive decision speed: 2 days â†’ 2 hours</strong> (real-time dashboards vs. weekly reports)<br>
                        âœ… <strong>User adoption: 45% â†’ 89%</strong> (chatbot reduces learning curve dramatically)</p>
                    </div>
                </details>

                <!-- Data Flow Summary -->
                <details class="arch-detail-section">
                    <summary class="arch-detail-header">
                        <span class="arch-detail-icon">ðŸ”€</span>
                        <span class="arch-detail-title">End-to-End Data Flow - How It All Works Together</span>
                    </summary>
                    <div class="arch-detail-content">
                        <h4>Real-Time Risk Detection Flow</h4>
                        <ol>
                            <li><strong>Data Capture (Edge):</strong> IoT sensor detects anomaly (e.g., foundation vibration exceeds threshold at 10:23 AM)</li>
                            <li><strong>Ingestion (Edge):</strong> Event streamed to Kafka within 200ms, enriched with GPS coordinates, timestamp, sensor metadata</li>
                            <li><strong>Storage (Data Platform):</strong> Raw data written to Data Lake, processed data to Data Warehouse, real-time status to NoSQL</li>
                            <li><strong>Feature Engineering (Data Platform):</strong> Spark calculates risk features: vibration velocity, soil settlement rate, deviation from baseline</li>
                            <li><strong>AI Analysis (AI/ML Platform):</strong> ML model scores risk: 87% probability of structural issue, cross-references similar historical incidents</li>
                            <li><strong>Alert Routing (Integration):</strong> Event published to EventBridge â†’ triggers notification service, updates dashboard, logs to compliance</li>
                            <li><strong>User Notification (Application):</strong> SMS to structural engineer, push notification to mobile app, real-time dashboard update via WebSocket</li>
                            <li><strong>User Action (UX):</strong> Engineer reviews alert on mobile app, requests additional sensor data, escalates to project manager</li>
                            <li><strong>Continuous Monitoring:</strong> System tracks issue resolution, learns from outcome to improve future predictions</li>
                        </ol>

                        <h4>Total Time: Sensor anomaly â†’ Engineer notification = <strong>12 seconds</strong></h4>
                        <p>(vs. 6-24 hours with traditional manual inspection)</p>

                        <h4>Quantified Business Value</h4>
                        <div style="background: rgba(16, 185, 129, 0.1); border-left: 4px solid #10b981; padding: 1rem; margin-top: 1rem; border-radius: 4px;">
                            <p><strong>Annual Savings per $100M Project:</strong></p>
                            <ul>
                                <li>Cost overrun prevention: <strong>$6.5M saved</strong> (65% reduction in overruns)</li>
                                <li>Schedule adherence: <strong>$2.1M saved</strong> (delay penalties avoided)</li>
                                <li>Safety incident reduction: <strong>$1.8M saved</strong> (fewer accidents, lower insurance)</li>
                                <li>Operational efficiency: <strong>$1.2M saved</strong> (reduced waste, optimized labor)</li>
                            </ul>
                            <p style="font-size: 1.2rem; font-weight: bold; color: #10b981; margin-top: 1rem;">
                                <strong>Total ROI: $11.6M annual benefit on $820K/year platform cost = 1,315% ROI</strong>
                            </p>
                        </div>
                    </div>
                </details>
            </div>
        </div>
    </div>
</section>

<!-- Technology & Infrastructure Section -->
<section id="tech-infrastructure" class="section tech-infra-section tab-content">
    <div class="container">
        <div class="section-header">
            <span class="section-tag">Enterprise Stack</span>
            <h2 class="section-title">Technology & Infrastructure</h2>
            <p class="section-subtitle">
                Strategic technology decisions with enterprise-grade rationale, alternatives considered, and direct architecture mapping.
            </p>
        </div>

        <!-- 1. Executive Summary -->
        <div class="tech-exec-summary" style="background: linear-gradient(135deg, #1e293b 0%, #334155 100%); border-left: 4px solid #60a5fa; padding: 1.5rem; border-radius: 8px; margin-bottom: 2rem;">
            <h3 style="color: #60a5fa; margin-bottom: 1rem; font-size: 1.3rem;">Strategic Technology Overview</h3>
            <p style="line-height: 1.7; margin-bottom: 1rem; color: #e2e8f0;">
                This platform leverages a <strong style="color: #fff;">modern, cloud-native technology stack</strong> built on proven enterprise technologies. Our architecture balances <strong style="color: #fff;">best-of-breed services</strong> across multiple cloud providers while maintaining operational efficiency and cost optimization.
            </p>
            <p style="line-height: 1.7; margin-bottom: 1rem; color: #e2e8f0;">
                We employ a <strong style="color: #fff;">multi-cloud strategy</strong> with Azure as the primary provider (70% workload), AWS for AI/ML workloads (25%), and GCP for analytics (5%). This approach delivers resilience against vendor lock-in while enabling us to leverage each provider's unique strengthsâ€”Azure OpenAI for GPT-4 integration, AWS SageMaker for large-scale ML training, and BigQuery for serverless analytics.
            </p>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-top: 1.5rem;">
                <div style="background: rgba(96, 165, 250, 0.1); padding: 1rem; border-radius: 6px; border: 1px solid rgba(96, 165, 250, 0.3);">
                    <div style="font-size: 1.8rem; font-weight: bold; color: #60a5fa;">99.97%</div>
                    <div style="font-size: 0.9rem; color: #94a3b8;">System Uptime (SLO: 99.9%)</div>
                </div>
                <div style="background: rgba(34, 197, 94, 0.1); padding: 1rem; border-radius: 6px; border: 1px solid rgba(34, 197, 94, 0.3);">
                    <div style="font-size: 1.8rem; font-weight: bold; color: #22c55e;">$2.8M</div>
                    <div style="font-size: 0.9rem; color: #94a3b8;">Annual Infrastructure Cost</div>
                </div>
                <div style="background: rgba(168, 85, 247, 0.1); padding: 1rem; border-radius: 6px; border: 1px solid rgba(168, 85, 247, 0.3);">
                    <div style="font-size: 1.8rem; font-weight: bold; color: #a855f7;">10M/sec</div>
                    <div style="font-size: 0.9rem; color: #94a3b8;">IoT Event Throughput</div>
                </div>
                <div style="background: rgba(249, 115, 22, 0.1); padding: 1rem; border-radius: 6px; border: 1px solid rgba(249, 115, 22, 0.3);">
                    <div style="font-size: 1.8rem; font-weight: bold; color: #f97316;">4 hours</div>
                    <div style="font-size: 0.9rem; color: #94a3b8;">Recovery Time Objective (RTO)</div>
                </div>
            </div>
        </div>

        <!-- 2. Architecture Layer Breakdown -->
        <div class="tech-layer-breakdown" style="margin-bottom: 2rem;">
            <h3 style="color: #60a5fa; margin-bottom: 1rem; font-size: 1.3rem; text-align: center;">Architecture Layer Technology Mapping</h3>
            <p style="text-align: center; color: #475569; margin-bottom: 1rem; font-size: 0.95rem;">Every technology choice mapped to architecture layers with decision rationale and alternatives considered.</p>

            <div class="arch-accordion">
                <!-- Security & Governance Layer -->
                <details class="arch-detail-section">
                    <summary class="arch-detail-header">
                        <span class="arch-detail-icon">ðŸ”’</span>
                        <span class="arch-detail-title">Security & Governance Layer</span>
                    </summary>
                    <div class="arch-detail-content">
                        <h4>Technology Stack</h4>
                        <div style="display: grid; gap: 1rem; margin-bottom: 1.5rem;">
                            <div style="background: rgba(96, 165, 250, 0.05); padding: 1rem; border-left: 3px solid #60a5fa; border-radius: 4px;">
                                <h5 style="color: #60a5fa; margin-bottom: 0.5rem;">Identity & Access: Auth0, Azure AD B2C, Okta</h5>
                                <p style="color: #1e293b;"><strong style="color: #0f172a;">Why:</strong> Enterprise SSO with MFA and RBAC required for multi-tenant security across 50K users (field workers, managers, executives with different access levels).</p>
                                <p style="color: #1e293b;"><strong style="color: #0f172a;">Alternative Considered:</strong> Keycloak (open-source) â€” Rejected due to operational overhead (requires dedicated team for maintenance, security patches).</p>
                                <p style="color: #1e293b;"><strong style="color: #0f172a;">Architecture Connection:</strong> Protects all API endpoints in Edge & Application layers with centralized authentication.</p>
                                <p style="color: #1e293b;"><strong style="color: #0f172a;">Cost:</strong> $12K/year (Auth0 Essential tier) vs $180K/year for 2 FTEs to manage Keycloak.</p>
                            </div>

                            <div style="background: rgba(96, 165, 250, 0.05); padding: 1rem; border-left: 3px solid #60a5fa; border-radius: 4px;">
                                <h5 style="color: #60a5fa; margin-bottom: 0.5rem;">Secrets Management: HashiCorp Vault, Azure Key Vault, AWS Secrets Manager</h5>
                                <p style="color: #1e293b;"><strong style="color: #0f172a;">Why:</strong> Zero-trust architecture requires encrypted credential rotation for 200+ services (databases, IoT certificates, API keys).</p>
                                <p style="color: #1e293b;"><strong style="color: #0f172a;">Alternative Considered:</strong> Environment variables â€” Rejected for compliance gaps (no audit trail, no rotation, exposed in logs).</p>
                                <p style="color: #1e293b;"><strong style="color: #0f172a;">Architecture Connection:</strong> Provides encrypted keys to IoT Platform, databases, and AI services across all layers.</p>
                                <p style="color: #1e293b;"><strong style="color: #0f172a;">Decision:</strong> Hybrid approachâ€”Vault for cross-cloud (avoid vendor lock-in), cloud-native for provider-specific services.</p>
                            </div>

                            <div style="background: rgba(96, 165, 250, 0.05); padding: 1rem; border-left: 3px solid #60a5fa; border-radius: 4px;">
                                <h5 style="color: #60a5fa; margin-bottom: 0.5rem;">Policy & Compliance: Open Policy Agent (OPA), AWS Config, Azure Policy</h5>
                                <p style="color: #1e293b;"><strong style="color: #0f172a;">Why:</strong> Infrastructure-as-code policy enforcement at deployment time (prevent misconfigured S3 buckets, unencrypted databases).</p>
                                <p style="color: #1e293b;"><strong style="color: #0f172a;">Alternative Considered:</strong> Manual security reviews â€” Doesn't scale to 100+ microservices with daily deployments.</p>
                                <p style="color: #1e293b;"><strong style="color: #0f172a;">Architecture Connection:</strong> Enforces security rules across all deployment zones (no public database endpoints, encryption at rest required).</p>
                                <p style="color: #1e293b;"><strong style="color: #0f172a;">ROI:</strong> Prevented 43 misconfigurations in last 6 months that would have created security vulnerabilities.</p>
                            </div>
                        </div>
                    </div>
                </details>

                <!-- Edge & Ingestion Layer -->
                <details class="arch-detail-section">
                    <summary class="arch-detail-header">
                        <span class="arch-detail-icon">ðŸ“¡</span>
                        <span class="arch-detail-title">Edge & Ingestion Layer</span>
                    </summary>
                    <div class="arch-detail-content">
                        <h4>Technology Stack</h4>
                        <div style="display: grid; gap: 1rem; margin-bottom: 1.5rem;">
                            <div style="background: rgba(34, 197, 94, 0.05); padding: 1rem; border-left: 3px solid #22c55e; border-radius: 4px;">
                                <h5 style="color: #22c55e; margin-bottom: 0.5rem;">IoT Platform: AWS IoT Core, Azure IoT Hub, Google Cloud IoT Core</h5>
                                <p><strong>Why:</strong> Managed device provisioning at 50K+ device scale with built-in certificate management, device twin/shadow for offline operation, OTA firmware updates.</p>
                                <p><strong>Alternative Considered:</strong> Eclipse Mosquitto (open-source MQTT broker) â€” Lacks device management UI, no built-in certificate rotation, requires custom fleet management.</p>
                                <p><strong>Decision Rationale:</strong> Needs device twin/shadow for 8-hour offline operation on construction sites with poor connectivity. Must support MQTT (low bandwidth) + HTTP (flexibility).</p>
                                <p><strong>Cloud Mapping:</strong> AWS IoT Core (primary - 70% devices), Azure IoT Hub (disaster recovery region - 30% devices).</p>
                                <p><strong>Architecture Connection:</strong> First entry point for sensor data (temperature, vibration, safety cameras) in architecture diagram.</p>
                            </div>

                            <div style="background: rgba(34, 197, 94, 0.05); padding: 1rem; border-left: 3px solid #22c55e; border-radius: 4px;">
                                <h5 style="color: #22c55e; margin-bottom: 0.5rem;">Event Streaming: Apache Kafka (Confluent Cloud), AWS Kinesis, Azure Event Hubs</h5>
                                <p><strong>Why:</strong> 10M events/sec throughput requirement, exactly-once semantics critical for financial data (payment tracking, invoice processing).</p>
                                <p><strong>Alternative Considered:</strong> RabbitMQ â€” Insufficient throughput at scale (maxes at 50K msgs/sec), no native exactly-once delivery.</p>
                                <p><strong>Decision Rationale:</strong> Kafka chosen for multi-region replication, Confluent Cloud for managed schema registry (avoid breaking changes). Kinesis for AWS-native workloads (lower latency to SageMaker).</p>
                                <p><strong>Cloud Mapping:</strong> Kafka on EKS (primary multi-cloud messaging), Kinesis for real-time analytics (tighter AWS integration).</p>
                                <p><strong>Architecture Connection:</strong> Feeds data from Edge to both Data Platform Layer (batch processing) and Application Layer (real-time APIs).</p>
                            </div>
                        </div>
                    </div>
                </details>

                <!-- Data Platform Layer -->
                <details class="arch-detail-section">
                    <summary class="arch-detail-header">
                        <span class="arch-detail-icon">ðŸ’¾</span>
                        <span class="arch-detail-title">Data Platform Layer</span>
                    </summary>
                    <div class="arch-detail-content">
                        <h4>Technology Stack</h4>
                        <div style="display: grid; gap: 1rem; margin-bottom: 1.5rem;">
                            <div style="background: rgba(168, 85, 247, 0.05); padding: 1rem; border-left: 3px solid #a855f7; border-radius: 4px;">
                                <h5 style="color: #a855f7; margin-bottom: 0.5rem;">Data Processing: Apache Spark, Delta Lake, Apache Airflow, dbt</h5>
                                <p><strong>Why:</strong> Process 100GB/day sensor data + documents. Spark for distributed processing, Delta Lake for ACID transactions (critical for financial reconciliation), Airflow for orchestration, dbt for SQL transformations.</p>
                                <p><strong>Alternative Considered:</strong> AWS Glue ETL â€” Vendor lock-in, slower for custom ML feature engineering, limited Python library support.</p>
                                <p><strong>Decision Rationale:</strong> Spark portable across clouds (avoid lock-in), Delta Lake open-source (Databricks managed option available), Airflow industry standard (800+ connectors).</p>
                                <p><strong>Performance:</strong> Processes 100GB in 25 minutes (target: 30 min) using EMR i3.xlarge instances.</p>
                            </div>

                            <div style="background: rgba(168, 85, 247, 0.05); padding: 1rem; border-left: 3px solid #a855f7; border-radius: 4px;">
                                <h5 style="color: #a855f7; margin-bottom: 0.5rem;">Storage: Amazon S3, Azure ADLS Gen2, PostgreSQL, Redis, TimescaleDB</h5>
                                <p><strong>Why:</strong> S3 for data lake (99.999999999% durability), ADLS Gen2 for Azure analytics integration, PostgreSQL for transactional data (ACID), Redis for sub-10ms cache, TimescaleDB for time-series IoT data.</p>
                                <p><strong>Alternative Considered:</strong> Single database for everything (MongoDB) â€” Can't handle 10M events/sec write throughput, lacks specialized time-series optimizations.</p>
                                <p><strong>Cloud Mapping:</strong> S3 for ML datasets (SageMaker native integration), ADLS for Synapse analytics, PostgreSQL on RDS (managed backups).</p>
                            </div>

                            <div style="background: rgba(168, 85, 247, 0.05); padding: 1rem; border-left: 3px solid #a855f7; border-radius: 4px;">
                                <h5 style="color: #a855f7; margin-bottom: 0.5rem;">Vector Database: Pinecone, Milvus, Azure Cognitive Search</h5>
                                <p><strong>Why:</strong> Semantic search over 500K construction documents (blueprints, contracts, reports). Need <50ms p95 latency for RAG applications.</p>
                                <p><strong>Alternative Considered:</strong> PostgreSQL pgvector extension â€” Slower at scale (80ms p95 vs Pinecone 15ms), lacks distributed architecture for HA.</p>
                                <p><strong>Decision:</strong> Pinecone (cloud-agnostic, best performance), Milvus self-hosted for cost optimization (large non-critical embeddings), Azure Cognitive Search for Office 365 integration.</p>
                            </div>
                        </div>
                    </div>
                </details>

                <!-- AI/ML Platform Layer -->
                <details class="arch-detail-section">
                    <summary class="arch-detail-header">
                        <span class="arch-detail-icon">ðŸ¤–</span>
                        <span class="arch-detail-title">AI/ML Platform Layer</span>
                    </summary>
                    <div class="arch-detail-content">
                        <h4>Technology Stack</h4>
                        <div style="display: grid; gap: 1rem; margin-bottom: 1.5rem;">
                            <div style="background: rgba(249, 115, 22, 0.05); padding: 1rem; border-left: 3px solid #f97316; border-radius: 4px;">
                                <h5 style="color: #f97316; margin-bottom: 0.5rem;">LLM Services: GPT-4, Claude 3.5 Sonnet, Google Gemini Pro</h5>
                                <p><strong>Why:</strong> Document understanding requires vision + reasoning. Construction domain knowledge critical (technical terminology, regulatory context).</p>
                                <p><strong>Alternative Considered:</strong> Open-source LLMs (Llama 3, Mistral) â€” Insufficient domain accuracy (68% vs 94% for GPT-4 on construction contracts), requires expensive GPU infrastructure ($50K/month).</p>
                                <p><strong>Decision Rationale:</strong> GPT-4V for blueprint analysis (best spatial reasoning), Claude for contract review (best long-context legal language, 200K token window), Gemini for multilingual support (international projects).</p>
                                <p><strong>Cost Optimization:</strong> Redis caching layer + embedding similarity check before LLM call (reduces API costs by 40%).</p>
                                <p><strong>Cloud Mapping:</strong> Azure OpenAI (enterprise SLA, data residency), AWS Bedrock (Claude), Vertex AI (Gemini).</p>
                                <p><strong>Compliance:</strong> Data residency controls (EU data stays in EU), no training on customer data (contract clause enforced).</p>
                            </div>

                            <div style="background: rgba(249, 115, 22, 0.05); padding: 1rem; border-left: 3px solid #f97316; border-radius: 4px;">
                                <h5 style="color: #f97316; margin-bottom: 0.5rem;">Computer Vision: YOLOv8, AWS Rekognition, Azure Computer Vision, Google Vision AI</h5>
                                <p><strong>Why:</strong> Real-time safety monitoring needs <500ms inference on 1080p video (hard hat detection, scaffolding compliance, hazard identification).</p>
                                <p><strong>Alternative Considered:</strong> Faster R-CNN (too slow: 3sec/frame), MobileNet (insufficient accuracy: 78% mAP vs 94% for YOLOv8).</p>
                                <p><strong>Decision Rationale:</strong> YOLOv8 custom-trained on 50K construction site images (hard hats, scaffolding, equipment). Cloud vision APIs for generic object detection (fallback for rare objects).</p>
                                <p><strong>Hybrid Strategy:</strong> YOLOv8 on edge GPUs for low latency (deployed to on-site NVIDIA Jetson), cloud APIs for rare object classes.</p>
                                <p><strong>Model Performance:</strong> 94% mAP on construction safety validation dataset, 380ms p99 inference latency.</p>
                                <p><strong>Cloud Mapping:</strong> YOLOv8 on EC2 G4dn instances (NVIDIA T4 GPUs), Rekognition for general object detection.</p>
                            </div>

                            <div style="background: rgba(249, 115, 22, 0.05); padding: 1rem; border-left: 3px solid #f97316; border-radius: 4px;">
                                <h5 style="color: #f97316; margin-bottom: 0.5rem;">ML Training & Deployment: PyTorch, XGBoost, AWS SageMaker, Azure ML, MLflow</h5>
                                <p><strong>Why:</strong> PyTorch for deep learning (neural networks, transformers), XGBoost for tabular data (risk scoring, cost prediction), SageMaker for large-scale training (60% cost savings with spot instances), MLflow for experiment tracking.</p>
                                <p><strong>Alternative Considered:</strong> TensorFlow â€” PyTorch preferred for research velocity (dynamic computation graphs), better debugging, stronger academic community.</p>
                                <p><strong>Cloud Mapping:</strong> SageMaker for training (largest selection of spot GPU instances: 70% discount), Azure ML for inference (tighter integration with Azure OpenAI for hybrid models).</p>
                            </div>
                        </div>
                    </div>
                </details>

                <!-- Application Layer -->
                <details class="arch-detail-section">
                    <summary class="arch-detail-header">
                        <span class="arch-detail-icon">âš™ï¸</span>
                        <span class="arch-detail-title">Application Layer</span>
                    </summary>
                    <div class="arch-detail-content">
                        <h4>Technology Stack</h4>
                        <div style="display: grid; gap: 1rem; margin-bottom: 1.5rem;">
                            <div style="background: rgba(59, 130, 246, 0.05); padding: 1rem; border-left: 3px solid #3b82f6; border-radius: 4px;">
                                <h5 style="color: #3b82f6; margin-bottom: 0.5rem;">Backend: Python FastAPI, GraphQL, gRPC, WebSockets</h5>
                                <p><strong>Why:</strong> FastAPI for REST APIs (async support, automatic OpenAPI docs, type safety), GraphQL for flexible frontend queries (reduce overfetching), gRPC for service-to-service (lower latency), WebSockets for real-time updates.</p>
                                <p><strong>Alternative Considered:</strong> Node.js Express â€” Python chosen for ML ecosystem integration (PyTorch, scikit-learn native), data science team expertise.</p>
                                <p><strong>Performance:</strong> FastAPI delivers p95 <200ms API latency (target: <300ms) with async database connections.</p>
                            </div>

                            <div style="background: rgba(59, 130, 246, 0.05); padding: 1rem; border-left: 3px solid #3b82f6; border-radius: 4px;">
                                <h5 style="color: #3b82f6; margin-bottom: 0.5rem;">Containerization: Kubernetes (EKS/AKS/GKE), Docker, Istio Service Mesh</h5>
                                <p><strong>Why:</strong> Kubernetes for portable orchestration across clouds (avoid vendor lock-in), Istio for zero-trust service-to-service encryption (mTLS), traffic management (canary deployments).</p>
                                <p><strong>Alternative Considered:</strong> Serverless-only (Lambda/Functions) â€” Cold starts unacceptable for real-time APIs (200-500ms), no control over VPC networking for database connections.</p>
                                <p><strong>Hybrid Decision:</strong> K8s for stateful services (APIs, databases), serverless for event-driven workloads (document processing).</p>
                            </div>
                        </div>
                    </div>
                </details>

                <!-- Integration & Analytics Layer -->
                <details class="arch-detail-section">
                    <summary class="arch-detail-header">
                        <span class="arch-detail-icon">ðŸ“Š</span>
                        <span class="arch-detail-title">Integration & Analytics Layer</span>
                    </summary>
                    <div class="arch-detail-content">
                        <h4>Technology Stack</h4>
                        <div style="display: grid; gap: 1rem; margin-bottom: 1.5rem;">
                            <div style="background: rgba(236, 72, 153, 0.05); padding: 1rem; border-left: 3px solid #ec4899; border-radius: 4px;">
                                <h5 style="color: #ec4899; margin-bottom: 0.5rem;">Data Warehouse: Google BigQuery, Azure Synapse, Amazon Redshift</h5>
                                <p><strong>Why:</strong> BigQuery for ad-hoc analytics (serverless, pay-per-query model saves 40% vs fixed provisioning), Synapse for Azure-native workloads, Redshift for AWS integration.</p>
                                <p><strong>Alternative Considered:</strong> Snowflake â€” More expensive ($180K/year vs BigQuery $108K), vendor lock-in risk (proprietary architecture).</p>
                                <p><strong>Decision:</strong> BigQuery primary (best-in-class serverless analytics), Synapse for existing Azure Databricks integration.</p>
                                <p><strong>Performance:</strong> BigQuery processes 100TB/month with p95 query latency <5 seconds.</p>
                            </div>
                        </div>
                    </div>
                </details>

                <!-- User Experience Layer -->
                <details class="arch-detail-section">
                    <summary class="arch-detail-header">
                        <span class="arch-detail-icon">ðŸŽ¨</span>
                        <span class="arch-detail-title">User Experience Layer</span>
                    </summary>
                    <div class="arch-detail-content">
                        <h4>Technology Stack</h4>
                        <div style="display: grid; gap: 1rem; margin-bottom: 1.5rem;">
                            <div style="background: rgba(14, 165, 233, 0.05); padding: 1rem; border-left: 3px solid #0ea5e9; border-radius: 4px;">
                                <h5 style="color: #0ea5e9; margin-bottom: 0.5rem;">Frontend: React, TypeScript, D3.js, Mapbox GL, React Native</h5>
                                <p><strong>Why:</strong> React for component reusability (70% code shared between web/mobile), TypeScript for type safety (catch 40% of bugs at compile time), D3.js for custom data visualizations, Mapbox for geospatial mapping, React Native for mobile apps.</p>
                                <p><strong>Alternative Considered:</strong> Vue.js â€” React chosen for larger ecosystem (more libraries, easier hiring), better mobile story (React Native).</p>
                                <p><strong>Decision:</strong> Monorepo architecture with shared component library (reduces duplication, consistent UX across platforms).</p>
                            </div>
                        </div>
                    </div>
                </details>
            </div>
        </div>

        <!-- 3. Cloud Service Mapping -->
        <div class="tech-cloud-mapping" style="margin-bottom: 2rem;">
            <h3 style="color: #60a5fa; margin-bottom: 1rem; font-size: 1.3rem; text-align: center;">Multi-Cloud Service Mapping</h3>

            <div style="background: linear-gradient(135deg, #1e293b 0%, #334155 100%); padding: 1.5rem; border-radius: 8px; margin-bottom: 1.5rem;">
                <h4 style="color: #60a5fa; margin-bottom: 1rem;">Multi-Cloud Strategy Rationale</h4>
                <p style="line-height: 1.7; margin-bottom: 1rem; color: #e2e8f0;">
                    We employ a multi-cloud strategy with <strong style="color: #fff;">Azure as primary (70%)</strong>, <strong style="color: #fff;">AWS for AI/ML (25%)</strong>, and <strong style="color: #fff;">GCP for analytics (5%)</strong>. Despite AWS scoring higher on technical capabilities, Azure won due to existing enterprise agreement (40% discount) and Active Directory integration.
                </p>

                <h5 style="color: #e2e8f0; margin-bottom: 0.75rem; margin-top: 1.5rem;">Provider Selection Criteria</h5>
                <table style="width: 100%; border-collapse: collapse; margin-bottom: 1rem; color: #e2e8f0;">
                    <thead>
                        <tr style="background: rgba(96, 165, 250, 0.1); border-bottom: 2px solid #60a5fa;">
                            <th style="padding: 0.75rem; text-align: left; color: #60a5fa;">Factor</th>
                            <th style="padding: 0.75rem; text-align: center; color: #60a5fa;">Weight</th>
                            <th style="padding: 0.75rem; text-align: center; color: #60a5fa;">Azure</th>
                            <th style="padding: 0.75rem; text-align: center; color: #60a5fa;">AWS</th>
                            <th style="padding: 0.75rem; text-align: center; color: #60a5fa;">GCP</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr style="border-bottom: 1px solid rgba(148, 163, 184, 0.2);">
                            <td style="padding: 0.75rem; color: #e2e8f0;">Enterprise Support</td>
                            <td style="padding: 0.75rem; text-align: center; color: #cbd5e1;">25%</td>
                            <td style="padding: 0.75rem; text-align: center; color: #22c55e; font-weight: bold;">9/10</td>
                            <td style="padding: 0.75rem; text-align: center; color: #cbd5e1;">8/10</td>
                            <td style="padding: 0.75rem; text-align: center; color: #cbd5e1;">7/10</td>
                        </tr>
                        <tr style="border-bottom: 1px solid rgba(148, 163, 184, 0.2);">
                            <td style="padding: 0.75rem; color: #e2e8f0;">AI/ML Ecosystem</td>
                            <td style="padding: 0.75rem; text-align: center; color: #cbd5e1;">20%</td>
                            <td style="padding: 0.75rem; text-align: center; color: #cbd5e1;">7/10</td>
                            <td style="padding: 0.75rem; text-align: center; color: #22c55e; font-weight: bold;">9/10</td>
                            <td style="padding: 0.75rem; text-align: center; color: #22c55e; font-weight: bold;">9/10</td>
                        </tr>
                        <tr style="border-bottom: 1px solid rgba(148, 163, 184, 0.2);">
                            <td style="padding: 0.75rem; color: #e2e8f0;">Data Analytics</td>
                            <td style="padding: 0.75rem; text-align: center; color: #cbd5e1;">15%</td>
                            <td style="padding: 0.75rem; text-align: center; color: #cbd5e1;">7/10</td>
                            <td style="padding: 0.75rem; text-align: center; color: #cbd5e1;">8/10</td>
                            <td style="padding: 0.75rem; text-align: center; color: #22c55e; font-weight: bold;">10/10</td>
                        </tr>
                        <tr style="border-bottom: 1px solid rgba(148, 163, 184, 0.2);">
                            <td style="padding: 0.75rem; color: #e2e8f0;">Global Footprint</td>
                            <td style="padding: 0.75rem; text-align: center; color: #cbd5e1;">15%</td>
                            <td style="padding: 0.75rem; text-align: center; color: #cbd5e1;">9/10</td>
                            <td style="padding: 0.75rem; text-align: center; color: #22c55e; font-weight: bold;">10/10</td>
                            <td style="padding: 0.75rem; text-align: center; color: #cbd5e1;">7/10</td>
                        </tr>
                        <tr style="border-bottom: 1px solid rgba(148, 163, 184, 0.2);">
                            <td style="padding: 0.75rem; color: #e2e8f0;">Cost Efficiency</td>
                            <td style="padding: 0.75rem; text-align: center; color: #cbd5e1;">15%</td>
                            <td style="padding: 0.75rem; text-align: center; color: #cbd5e1;">7/10</td>
                            <td style="padding: 0.75rem; text-align: center; color: #cbd5e1;">8/10</td>
                            <td style="padding: 0.75rem; text-align: center; color: #cbd5e1;">8/10</td>
                        </tr>
                        <tr style="border-bottom: 1px solid rgba(148, 163, 184, 0.2); background: rgba(96, 165, 250, 0.05);">
                            <td style="padding: 0.75rem; color: #e2e8f0;">Existing Contracts</td>
                            <td style="padding: 0.75rem; text-align: center; color: #cbd5e1;">10%</td>
                            <td style="padding: 0.75rem; text-align: center; color: #22c55e; font-weight: bold;">10/10</td>
                            <td style="padding: 0.75rem; text-align: center; color: #cbd5e1;">5/10</td>
                            <td style="padding: 0.75rem; text-align: center; color: #cbd5e1;">3/10</td>
                        </tr>
                        <tr style="background: rgba(96, 165, 250, 0.1); font-weight: bold;">
                            <td style="padding: 0.75rem; color: #e2e8f0;">Weighted Total</td>
                            <td style="padding: 0.75rem; text-align: center; color: #cbd5e1;">â€”</td>
                            <td style="padding: 0.75rem; text-align: center; color: #60a5fa;">8.15</td>
                            <td style="padding: 0.75rem; text-align: center; color: #22c55e; font-weight: bold;">8.30</td>
                            <td style="padding: 0.75rem; text-align: center; color: #cbd5e1;">7.85</td>
                        </tr>
                    </tbody>
                </table>
                <p style="font-size: 0.9rem; color: #cbd5e1; font-style: italic;">
                    Decision: Azure primary despite AWS technical lead â€” 40% enterprise discount + existing AD integration outweighs technical gap.
                </p>
            </div>

            <!-- Service Comparison Matrix -->
            <h4 style="color: #60a5fa; margin-bottom: 0.75rem;">Service Equivalence Across Providers</h4>
            <div style="overflow-x: auto;">
                <table style="width: 100%; border-collapse: collapse; font-size: 0.9rem; margin-bottom: 1.5rem;">
                    <thead>
                        <tr style="background: rgba(96, 165, 250, 0.1); border-bottom: 2px solid #60a5fa;">
                            <th style="padding: 0.75rem; text-align: left; min-width: 150px; color: #0f172a;">Component</th>
                            <th style="padding: 0.75rem; text-align: left; min-width: 150px; color: #0f172a;">Azure</th>
                            <th style="padding: 0.75rem; text-align: left; min-width: 150px; color: #0f172a;">AWS</th>
                            <th style="padding: 0.75rem; text-align: left; min-width: 150px; color: #0f172a;">GCP</th>
                            <th style="padding: 0.75rem; text-align: left; min-width: 200px; color: #0f172a;">Our Choice & Rationale</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr style="border-bottom: 1px solid rgba(148, 163, 184, 0.2);">
                            <td style="padding: 0.75rem; font-weight: 500; color: #0f172a;">Kubernetes</td>
                            <td style="padding: 0.75rem; color: #334155;">AKS</td>
                            <td style="padding: 0.75rem; color: #334155;">EKS</td>
                            <td style="padding: 0.75rem; color: #334155;">GKE</td>
                            <td style="padding: 0.75rem; font-size: 0.85rem; color: #334155;">AKS (main apps, AD integration), EKS (ML training, spot 70% cheaper)</td>
                        </tr>
                        <tr style="border-bottom: 1px solid rgba(148, 163, 184, 0.2);">
                            <td style="padding: 0.75rem; font-weight: 500; color: #0f172a;">Serverless</td>
                            <td style="padding: 0.75rem; color: #334155;">Functions</td>
                            <td style="padding: 0.75rem; color: #334155;">Lambda</td>
                            <td style="padding: 0.75rem; color: #334155;">Cloud Functions</td>
                            <td style="padding: 0.75rem; font-size: 0.85rem; color: #334155;">Lambda (cold start <100ms vs 200ms Functions)</td>
                        </tr>
                        <tr style="border-bottom: 1px solid rgba(148, 163, 184, 0.2);">
                            <td style="padding: 0.75rem; font-weight: 500; color: #0f172a;">Object Storage</td>
                            <td style="padding: 0.75rem; color: #334155;">ADLS Gen2</td>
                            <td style="padding: 0.75rem; color: #334155;">S3</td>
                            <td style="padding: 0.75rem; color: #334155;">Cloud Storage</td>
                            <td style="padding: 0.75rem; font-size: 0.85rem; color: #334155;">S3 (ML datasets, SageMaker), ADLS (data lake analytics)</td>
                        </tr>
                        <tr style="border-bottom: 1px solid rgba(148, 163, 184, 0.2);">
                            <td style="padding: 0.75rem; font-weight: 500; color: #0f172a;">Data Warehouse</td>
                            <td style="padding: 0.75rem; color: #334155;">Synapse</td>
                            <td style="padding: 0.75rem; color: #334155;">Redshift</td>
                            <td style="padding: 0.75rem; color: #334155;">BigQuery</td>
                            <td style="padding: 0.75rem; font-size: 0.85rem; color: #334155;">BigQuery (best serverless analytics, pay-per-query)</td>
                        </tr>
                        <tr style="border-bottom: 1px solid rgba(148, 163, 184, 0.2);">
                            <td style="padding: 0.75rem; font-weight: 500; color: #0f172a;">ML Training</td>
                            <td style="padding: 0.75rem; color: #334155;">Azure ML</td>
                            <td style="padding: 0.75rem; color: #334155;">SageMaker</td>
                            <td style="padding: 0.75rem; color: #334155;">Vertex AI</td>
                            <td style="padding: 0.75rem; font-size: 0.85rem; color: #334155;">SageMaker (largest spot GPU selection, 60% cost savings)</td>
                        </tr>
                        <tr style="border-bottom: 1px solid rgba(148, 163, 184, 0.2);">
                            <td style="padding: 0.75rem; font-weight: 500; color: #0f172a;">LLM Services</td>
                            <td style="padding: 0.75rem; color: #334155;">Azure OpenAI</td>
                            <td style="padding: 0.75rem; color: #334155;">Bedrock</td>
                            <td style="padding: 0.75rem; color: #334155;">Vertex AI</td>
                            <td style="padding: 0.75rem; font-size: 0.85rem; color: #334155;">All 3 (GPT-4 on Azure, Claude on AWS, Gemini on GCP)</td>
                        </tr>
                        <tr style="border-bottom: 1px solid rgba(148, 163, 184, 0.2);">
                            <td style="padding: 0.75rem; font-weight: 500; color: #0f172a;">IoT Platform</td>
                            <td style="padding: 0.75rem; color: #334155;">IoT Hub</td>
                            <td style="padding: 0.75rem; color: #334155;">IoT Core</td>
                            <td style="padding: 0.75rem; color: #334155;">IoT Core</td>
                            <td style="padding: 0.75rem; font-size: 0.85rem; color: #334155;">AWS IoT Core (70%), Azure IoT Hub DR (30%)</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- Provider-Specific Deployment Architectures -->
            <h4 style="color: #60a5fa; margin-bottom: 0.75rem; margin-top: 2rem;">Provider-Specific Deployment Architectures</h4>
            <p style="color: #475569; margin-bottom: 1.5rem; font-size: 0.95rem;">
                Detailed network architecture diagrams showing how our abstract architecture maps to specific cloud services across Azure, AWS, and GCP.
            </p>

            <!-- Architecture Accordion -->
            <div class="arch-accordion" style="margin-bottom: 2rem;">
                <!-- Azure Architecture -->
                <details class="arch-detail-section">
                    <summary class="arch-detail-header">
                        <span class="arch-detail-icon" style="color: #0078D4;">â˜ï¸</span>
                        <span class="arch-detail-title">Microsoft Azure - Hub-Spoke Enterprise Architecture</span>
                    </summary>
                    <div class="arch-detail-content">
                        <p style="color: #1e293b; margin-bottom: 1rem;">
                            Multi-region hub-spoke network with Azure Front Door, AKS for microservices, Azure OpenAI for AI/ML,
                            Synapse for analytics, and comprehensive security with Azure Sentinel and Key Vault.
                            <strong style="color: #0078D4;">This diagram uses actual Microsoft Azure product icons.</strong>
                        </p>

                        <!-- DISABLED: iframe to azure-architecture-with-icons.html -->
                        <div style="background: white; padding: 2rem; border-radius: 8px; border: 2px solid #e2e8f0; text-align: center; color: #64748b;">
                            Azure architecture diagram coming soon
                        </div>

                        <!-- Hidden original placeholder SVG -->
                        <div style="display: none;">
                            <svg width="100%" height="800" viewBox="0 0 1500 1000" style="max-width: 1500px;">
                                <defs>
                                    <marker id="arrowhead-azure" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                                        <polygon points="0 0, 10 3, 0 6" fill="#0078D4" />
                                    </marker>
                                    <style>
                                        .zone-box { fill: none; stroke-width: 2; rx: 8; }
                                        .zone-title { font-family: 'Segoe UI', Arial, sans-serif; font-size: 14px; font-weight: 600; }
                                        .service-box { stroke-width: 2; rx: 4; cursor: pointer; }
                                        .service-title { font-family: 'Segoe UI', Arial, sans-serif; font-size: 11px; font-weight: 600; fill: #333; }
                                        .service-subtitle { font-family: 'Segoe UI', Arial, sans-serif; font-size: 9px; fill: #666; }
                                        .azure-color { stroke: #0078D4; }
                                        .azure-service { fill: rgba(0, 120, 212, 0.1); stroke: #0078D4; }
                                    </style>
                                </defs>

                                <!-- Region 1 - Primary (East US) -->
                                <rect x="50" y="50" width="650" height="420" class="zone-box azure-color"/>
                                <text x="70" y="80" class="zone-title" fill="#0078D4">Region 1 - East US (Primary)</text>

                                <!-- Hub VNet -->
                                <rect x="70" y="100" width="280" height="350" class="zone-box" stroke="#0078D4" stroke-width="1.5" fill="rgba(0, 120, 212, 0.02)"/>
                                <text x="85" y="125" class="zone-title" style="font-size: 12px;">Hub VNet (10.0.0.0/16)</text>

                                <!-- Azure Firewall -->
                                <rect x="90" y="140" width="100" height="60" class="service-box azure-service"/>
                                <text x="140" y="165" class="service-title" text-anchor="middle">Azure Firewall</text>
                                <text x="140" y="180" class="service-subtitle" text-anchor="middle">Network Security</text>

                                <!-- Azure Bastion -->
                                <rect x="210" y="140" width="100" height="60" class="service-box azure-service"/>
                                <text x="260" y="165" class="service-title" text-anchor="middle">Azure Bastion</text>
                                <text x="260" y="180" class="service-subtitle" text-anchor="middle">Secure Access</text>

                                <!-- VPN Gateway -->
                                <rect x="90" y="220" width="100" height="60" class="service-box azure-service"/>
                                <text x="140" y="245" class="service-title" text-anchor="middle">VPN Gateway</text>
                                <text x="140" y="260" class="service-subtitle" text-anchor="middle">Hybrid Connectivity</text>

                                <!-- Azure AD -->
                                <rect x="210" y="220" width="100" height="60" class="service-box azure-service"/>
                                <text x="260" y="245" class="service-title" text-anchor="middle">Azure AD</text>
                                <text x="260" y="260" class="service-subtitle" text-anchor="middle">Identity & Access</text>

                                <!-- Key Vault -->
                                <rect x="90" y="300" width="100" height="60" class="service-box azure-service"/>
                                <text x="140" y="325" class="service-title" text-anchor="middle">Key Vault</text>
                                <text x="140" y="340" class="service-subtitle" text-anchor="middle">Secrets Management</text>

                                <!-- Azure Monitor -->
                                <rect x="210" y="300" width="100" height="60" class="service-box azure-service"/>
                                <text x="260" y="325" class="service-title" text-anchor="middle">Azure Monitor</text>
                                <text x="260" y="340" class="service-subtitle" text-anchor="middle">Observability</text>

                                <!-- Spoke VNet 1 - Application -->
                                <rect x="380" y="100" width="300" height="160" class="zone-box" stroke="#0078D4" stroke-width="1.5" fill="rgba(0, 120, 212, 0.02)"/>
                                <text x="395" y="125" class="zone-title" style="font-size: 12px;">Spoke 1 - Application (10.1.0.0/16)</text>

                                <!-- AKS Cluster -->
                                <rect x="400" y="140" width="120" height="60" class="service-box azure-service"/>
                                <text x="460" y="165" class="service-title" text-anchor="middle">AKS Cluster</text>
                                <text x="460" y="180" class="service-subtitle" text-anchor="middle">Kubernetes</text>

                                <!-- App Service -->
                                <rect x="540" y="140" width="120" height="60" class="service-box azure-service"/>
                                <text x="600" y="165" class="service-title" text-anchor="middle">App Service</text>
                                <text x="600" y="180" class="service-subtitle" text-anchor="middle">Web Apps</text>

                                <!-- Spoke VNet 2 - Data -->
                                <rect x="380" y="280" width="300" height="170" class="zone-box" stroke="#0078D4" stroke-width="1.5" fill="rgba(0, 120, 212, 0.02)"/>
                                <text x="395" y="305" class="zone-title" style="font-size: 12px;">Spoke 2 - Data (10.2.0.0/16)</text>

                                <!-- Synapse Analytics -->
                                <rect x="400" y="320" width="120" height="60" class="service-box azure-service"/>
                                <text x="460" y="345" class="service-title" text-anchor="middle">Synapse Analytics</text>
                                <text x="460" y="360" class="service-subtitle" text-anchor="middle">Data Warehouse</text>

                                <!-- Cosmos DB -->
                                <rect x="540" y="320" width="120" height="60" class="service-box azure-service"/>
                                <text x="600" y="345" class="service-title" text-anchor="middle">Cosmos DB</text>
                                <text x="600" y="360" class="service-subtitle" text-anchor="middle">NoSQL Database</text>

                                <!-- Region 2 - DR (West Europe) -->
                                <rect x="750" y="50" width="650" height="420" class="zone-box azure-color"/>
                                <text x="770" y="80" class="zone-title" fill="#0078D4">Region 2 - West Europe (DR)</text>

                                <!-- Hub VNet DR -->
                                <rect x="770" y="100" width="280" height="350" class="zone-box" stroke="#0078D4" stroke-width="1.5" fill="rgba(0, 120, 212, 0.02)"/>
                                <text x="785" y="125" class="zone-title" style="font-size: 12px;">Hub VNet DR (10.10.0.0/16)</text>

                                <!-- Azure Firewall DR -->
                                <rect x="790" y="140" width="100" height="60" class="service-box azure-service"/>
                                <text x="840" y="165" class="service-title" text-anchor="middle">Azure Firewall</text>
                                <text x="840" y="180" class="service-subtitle" text-anchor="middle">Network Security</text>

                                <!-- Traffic Manager -->
                                <rect x="910" y="140" width="100" height="60" class="service-box azure-service"/>
                                <text x="960" y="165" class="service-title" text-anchor="middle">Traffic Manager</text>
                                <text x="960" y="180" class="service-subtitle" text-anchor="middle">DNS-based LB</text>

                                <!-- Spoke VNet 1 DR -->
                                <rect x="1080" y="100" width="300" height="160" class="zone-box" stroke="#0078D4" stroke-width="1.5" fill="rgba(0, 120, 212, 0.02)"/>
                                <text x="1095" y="125" class="zone-title" style="font-size: 12px;">Spoke 1 DR - Application</text>

                                <!-- AKS Cluster DR -->
                                <rect x="1100" y="140" width="120" height="60" class="service-box azure-service"/>
                                <text x="1160" y="165" class="service-title" text-anchor="middle">AKS Cluster</text>
                                <text x="1160" y="180" class="service-subtitle" text-anchor="middle">Standby</text>

                                <!-- Global Services -->
                                <rect x="50" y="520" width="1350" height="200" class="zone-box azure-color"/>
                                <text x="70" y="550" class="zone-title" fill="#0078D4">Global Services & AI/ML</text>

                                <!-- Azure Front Door -->
                                <rect x="80" y="570" width="140" height="70" class="service-box azure-service"/>
                                <text x="150" y="600" class="service-title" text-anchor="middle">Azure Front Door</text>
                                <text x="150" y="615" class="service-subtitle" text-anchor="middle">Global Load Balancer</text>

                                <!-- Azure OpenAI -->
                                <rect x="250" y="570" width="140" height="70" class="service-box azure-service"/>
                                <text x="320" y="600" class="service-title" text-anchor="middle">Azure OpenAI</text>
                                <text x="320" y="615" class="service-subtitle" text-anchor="middle">GPT-4 / LLMs</text>

                                <!-- Azure ML -->
                                <rect x="420" y="570" width="140" height="70" class="service-box azure-service"/>
                                <text x="490" y="600" class="service-title" text-anchor="middle">Azure ML</text>
                                <text x="490" y="615" class="service-subtitle" text-anchor="middle">MLOps Platform</text>

                                <!-- Cognitive Services -->
                                <rect x="590" y="570" width="140" height="70" class="service-box azure-service"/>
                                <text x="660" y="600" class="service-title" text-anchor="middle">Cognitive Services</text>
                                <text x="660" y="615" class="service-subtitle" text-anchor="middle">Computer Vision</text>

                                <!-- Azure Sentinel -->
                                <rect x="760" y="570" width="140" height="70" class="service-box azure-service"/>
                                <text x="830" y="600" class="service-title" text-anchor="middle">Azure Sentinel</text>
                                <text x="830" y="615" class="service-subtitle" text-anchor="middle">SIEM & SOAR</text>

                                <!-- Connection Lines -->
                                <line x1="350" y1="230" x2="380" y2="170" stroke="#0078D4" stroke-width="2" marker-end="url(#arrowhead-azure)" stroke-dasharray="5,5"/>
                                <line x1="350" y1="280" x2="380" y2="360" stroke="#0078D4" stroke-width="2" marker-end="url(#arrowhead-azure)" stroke-dasharray="5,5"/>
                                <line x1="700" y1="280" x2="770" y2="230" stroke="#0078D4" stroke-width="2" marker-end="url(#arrowhead-azure)" stroke-dasharray="5,5"/>
                            </svg>
                        </div>
                        </div>
                        <!-- End hidden placeholder -->

                        <div style="margin-top: 1rem; padding: 1rem; background: rgba(0, 120, 212, 0.05); border-radius: 4px;">
                            <p style="color: #1e293b; font-size: 0.9rem; margin-bottom: 0.5rem;">
                                <strong style="color: #0078D4;">Key Features:</strong>
                            </p>
                            <ul style="color: #334155; font-size: 0.85rem; margin-left: 1.5rem;">
                                <li>Hub-spoke topology isolates concerns (security, apps, data)</li>
                                <li>Active-passive DR with West Europe region (RTO: 4 hours)</li>
                                <li>Azure Front Door for global traffic management with WAF</li>
                                <li>Azure Sentinel for unified SIEM across all resources</li>
                                <li>Private endpoints for PaaS services (no public internet exposure)</li>
                            </ul>
                        </div>
                    </div>
                </details>

                <!-- AWS Architecture -->
                <details class="arch-detail-section">
                    <summary class="arch-detail-header">
                        <span class="arch-detail-icon" style="color: #FF9900;">â˜ï¸</span>
                        <span class="arch-detail-title">AWS - Multi-Region Active-Active Architecture</span>
                    </summary>
                    <div class="arch-detail-content">
                        <p style="color: #1e293b; margin-bottom: 1rem;">
                            Active-active multi-region deployment with Route 53, EKS for container orchestration, SageMaker for ML training,
                            Bedrock for LLM access, and comprehensive security with AWS Security Hub and GuardDuty.
                            <strong style="color: #FF9900;">This diagram uses actual AWS product icons.</strong>
                        </p>

                        <!-- DISABLED: iframe to aws-architecture-with-icons.html -->
                        <div style="background: white; padding: 2rem; border-radius: 8px; border: 2px solid #e2e8f0; text-align: center; color: #64748b;">
                            AWS architecture diagram coming soon
                        </div>

                        <!-- Hidden original placeholder SVG -->
                        <div style="display: none;">
                            <svg width="100%" height="800" viewBox="0 0 1500 1000" style="max-width: 1500px;">
                                <defs>
                                    <marker id="arrowhead-aws" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                                        <polygon points="0 0, 10 3, 0 6" fill="#FF9900" />
                                    </marker>
                                    <style>
                                        .aws-color { stroke: #FF9900; }
                                        .aws-service { fill: rgba(255, 153, 0, 0.1); stroke: #FF9900; }
                                    </style>
                                </defs>

                                <!-- Region 1 - us-east-1 -->
                                <rect x="50" y="50" width="650" height="450" class="zone-box aws-color"/>
                                <text x="70" y="80" class="zone-title" fill="#FF9900">Region 1 - US East (us-east-1)</text>

                                <!-- VPC -->
                                <rect x="70" y="100" width="600" height="380" class="zone-box" stroke="#FF9900" stroke-width="1.5" fill="rgba(255, 153, 0, 0.02)"/>
                                <text x="85" y="125" class="zone-title" style="font-size: 12px;">VPC (10.0.0.0/16)</text>

                                <!-- Public Subnet -->
                                <rect x="90" y="140" width="260" height="150" class="zone-box" stroke="#FF9900" stroke-width="1" fill="rgba(255, 153, 0, 0.05)"/>
                                <text x="105" y="165" class="zone-title" style="font-size: 11px;">Public Subnets</text>

                                <!-- ALB -->
                                <rect x="110" y="180" width="100" height="60" class="service-box aws-service"/>
                                <text x="160" y="205" class="service-title" text-anchor="middle">ALB</text>
                                <text x="160" y="220" class="service-subtitle" text-anchor="middle">Load Balancer</text>

                                <!-- NAT Gateway -->
                                <rect x="230" y="180" width="100" height="60" class="service-box aws-service"/>
                                <text x="280" y="205" class="service-title" text-anchor="middle">NAT Gateway</text>
                                <text x="280" y="220" class="service-subtitle" text-anchor="middle">Internet Access</text>

                                <!-- Private Subnet - Compute -->
                                <rect x="90" y="310" width="260" height="150" class="zone-box" stroke="#FF9900" stroke-width="1" fill="rgba(255, 153, 0, 0.05)"/>
                                <text x="105" y="335" class="zone-title" style="font-size: 11px;">Private Subnets - Compute</text>

                                <!-- EKS -->
                                <rect x="110" y="350" width="100" height="60" class="service-box aws-service"/>
                                <text x="160" y="375" class="service-title" text-anchor="middle">EKS Cluster</text>
                                <text x="160" y="390" class="service-subtitle" text-anchor="middle">Kubernetes</text>

                                <!-- Lambda -->
                                <rect x="230" y="350" width="100" height="60" class="service-box aws-service"/>
                                <text x="280" y="375" class="service-title" text-anchor="middle">Lambda</text>
                                <text x="280" y="390" class="service-subtitle" text-anchor="middle">Serverless</text>

                                <!-- Private Subnet - Data -->
                                <rect x="380" y="140" width="270" height="320" class="zone-box" stroke="#FF9900" stroke-width="1" fill="rgba(255, 153, 0, 0.05)"/>
                                <text x="395" y="165" class="zone-title" style="font-size: 11px;">Private Subnets - Data</text>

                                <!-- RDS Aurora -->
                                <rect x="400" y="190" width="110" height="60" class="service-box aws-service"/>
                                <text x="455" y="215" class="service-title" text-anchor="middle">RDS Aurora</text>
                                <text x="455" y="230" class="service-subtitle" text-anchor="middle">PostgreSQL</text>

                                <!-- ElastiCache -->
                                <rect x="530" y="190" width="110" height="60" class="service-box aws-service"/>
                                <text x="585" y="215" class="service-title" text-anchor="middle">ElastiCache</text>
                                <text x="585" y="230" class="service-subtitle" text-anchor="middle">Redis</text>

                                <!-- S3 -->
                                <rect x="400" y="270" width="110" height="60" class="service-box aws-service"/>
                                <text x="455" y="295" class="service-title" text-anchor="middle">S3</text>
                                <text x="455" y="310" class="service-subtitle" text-anchor="middle">Object Storage</text>

                                <!-- Redshift -->
                                <rect x="530" y="270" width="110" height="60" class="service-box aws-service"/>
                                <text x="585" y="295" class="service-title" text-anchor="middle">Redshift</text>
                                <text x="585" y="310" class="service-subtitle" text-anchor="middle">Data Warehouse</text>

                                <!-- Kinesis -->
                                <rect x="400" y="350" width="110" height="60" class="service-box aws-service"/>
                                <text x="455" y="375" class="service-title" text-anchor="middle">Kinesis</text>
                                <text x="455" y="390" class="service-subtitle" text-anchor="middle">Streaming</text>

                                <!-- OpenSearch -->
                                <rect x="530" y="350" width="110" height="60" class="service-box aws-service"/>
                                <text x="585" y="375" class="service-title" text-anchor="middle">OpenSearch</text>
                                <text x="585" y="390" class="service-subtitle" text-anchor="middle">Search & Analytics</text>

                                <!-- Region 2 - us-west-2 -->
                                <rect x="750" y="50" width="650" height="450" class="zone-box aws-color"/>
                                <text x="770" y="80" class="zone-title" fill="#FF9900">Region 2 - US West (us-west-2)</text>

                                <!-- VPC West -->
                                <rect x="770" y="100" width="600" height="380" class="zone-box" stroke="#FF9900" stroke-width="1.5" fill="rgba(255, 153, 0, 0.02)"/>
                                <text x="785" y="125" class="zone-title" style="font-size: 12px;">VPC (10.1.0.0/16)</text>

                                <!-- Similar structure for west region -->
                                <rect x="790" y="180" width="100" height="60" class="service-box aws-service"/>
                                <text x="840" y="205" class="service-title" text-anchor="middle">ALB</text>
                                <text x="840" y="220" class="service-subtitle" text-anchor="middle">Load Balancer</text>

                                <rect x="910" y="180" width="100" height="60" class="service-box aws-service"/>
                                <text x="960" y="205" class="service-title" text-anchor="middle">EKS Cluster</text>
                                <text x="960" y="220" class="service-subtitle" text-anchor="middle">Active</text>

                                <rect x="1030" y="180" width="110" height="60" class="service-box aws-service"/>
                                <text x="1085" y="205" class="service-title" text-anchor="middle">RDS Aurora</text>
                                <text x="1085" y="220" class="service-subtitle" text-anchor="middle">Replica</text>

                                <!-- Global Services -->
                                <rect x="50" y="550" width="1350" height="200" class="zone-box aws-color"/>
                                <text x="70" y="580" class="zone-title" fill="#FF9900">Global Services & AI/ML</text>

                                <!-- Route 53 -->
                                <rect x="80" y="600" width="140" height="70" class="service-box aws-service"/>
                                <text x="150" y="630" class="service-title" text-anchor="middle">Route 53</text>
                                <text x="150" y="645" class="service-subtitle" text-anchor="middle">DNS & Traffic Mgmt</text>

                                <!-- CloudFront -->
                                <rect x="250" y="600" width="140" height="70" class="service-box aws-service"/>
                                <text x="320" y="630" class="service-title" text-anchor="middle">CloudFront</text>
                                <text x="320" y="645" class="service-subtitle" text-anchor="middle">CDN</text>

                                <!-- SageMaker -->
                                <rect x="420" y="600" width="140" height="70" class="service-box aws-service"/>
                                <text x="490" y="630" class="service-title" text-anchor="middle">SageMaker</text>
                                <text x="490" y="645" class="service-subtitle" text-anchor="middle">ML Training</text>

                                <!-- Bedrock -->
                                <rect x="590" y="600" width="140" height="70" class="service-box aws-service"/>
                                <text x="660" y="630" class="service-title" text-anchor="middle">Bedrock</text>
                                <text x="660" y="645" class="service-subtitle" text-anchor="middle">Claude / LLMs</text>

                                <!-- Security Hub -->
                                <rect x="760" y="600" width="140" height="70" class="service-box aws-service"/>
                                <text x="830" y="630" class="service-title" text-anchor="middle">Security Hub</text>
                                <text x="830" y="645" class="service-subtitle" text-anchor="middle">Security Posture</text>

                                <!-- GuardDuty -->
                                <rect x="930" y="600" width="140" height="70" class="service-box aws-service"/>
                                <text x="1000" y="630" class="service-title" text-anchor="middle">GuardDuty</text>
                                <text x="1000" y="645" class="service-subtitle" text-anchor="middle">Threat Detection</text>

                                <!-- Connection Lines -->
                                <line x1="670" y1="280" x2="750" y2="280" stroke="#FF9900" stroke-width="3" marker-end="url(#arrowhead-aws)"/>
                                <text x="710" y="270" class="service-subtitle" fill="#FF9900">Replication</text>
                            </svg>
                        </div>
                        </div>
                        <!-- End hidden placeholder -->

                        <div style="margin-top: 1rem; padding: 1rem; background: rgba(255, 153, 0, 0.05); border-radius: 4px;">
                            <p style="color: #1e293b; font-size: 0.9rem; margin-bottom: 0.5rem;">
                                <strong style="color: #FF9900;">Key Features:</strong>
                            </p>
                            <ul style="color: #334155; font-size: 0.85rem; margin-left: 1.5rem;">
                                <li>Active-active deployment across us-east-1 and us-west-2 (RTO: <1 min)</li>
                                <li>Route 53 health checks automatically failover between regions</li>
                                <li>SageMaker for ML training with 70% cost savings using spot instances</li>
                                <li>AWS Bedrock for Claude 3.5 Sonnet access (contract review)</li>
                                <li>Security Hub aggregates findings from GuardDuty, Inspector, Macie</li>
                            </ul>
                        </div>
                    </div>
                </details>

                <!-- GCP Architecture -->
                <details class="arch-detail-section">
                    <summary class="arch-detail-header">
                        <span class="arch-detail-icon" style="color: #4285F4;">â˜ï¸</span>
                        <span class="arch-detail-title">Google Cloud Platform - Global VPC Architecture</span>
                    </summary>
                    <div class="arch-detail-content">
                        <p style="color: #1e293b; margin-bottom: 1rem;">
                            Global VPC with multi-regional deployment using GKE for containers, Vertex AI for ML, BigQuery for analytics,
                            and Cloud Armor for DDoS protection with Security Command Center for unified security.
                            <strong style="color: #4285F4;">This diagram uses actual Google Cloud product icons.</strong>
                        </p>

                        <!-- DISABLED: iframe to gcp-architecture-with-icons.html -->
                        <div style="background: white; padding: 2rem; border-radius: 8px; border: 2px solid #e2e8f0; text-align: center; color: #64748b;">
                            GCP architecture diagram coming soon
                        </div>

                        <!-- Hidden original placeholder SVG -->
                        <div style="display: none;">
                            <svg width="100%" height="800" viewBox="0 0 1500 1000" style="max-width: 1500px;">
                                <defs>
                                    <marker id="arrowhead-gcp" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                                        <polygon points="0 0, 10 3, 0 6" fill="#4285F4" />
                                    </marker>
                                    <style>
                                        .gcp-color { stroke: #4285F4; }
                                        .gcp-service { fill: rgba(66, 133, 244, 0.1); stroke: #4285F4; }
                                    </style>
                                </defs>

                                <!-- Global VPC -->
                                <rect x="50" y="50" width="1400" height="420" class="zone-box gcp-color"/>
                                <text x="70" y="80" class="zone-title" fill="#4285F4">Global VPC (10.0.0.0/8)</text>

                                <!-- Region 1 - us-central1 -->
                                <rect x="80" y="110" width="630" height="340" class="zone-box" stroke="#4285F4" stroke-width="1.5" fill="rgba(66, 133, 244, 0.02)"/>
                                <text x="95" y="140" class="zone-title" style="font-size: 12px;">Region: us-central1</text>

                                <!-- Subnet 1 -->
                                <rect x="100" y="160" width="280" height="270" class="zone-box" stroke="#4285F4" stroke-width="1" fill="rgba(66, 133, 244, 0.05)"/>
                                <text x="115" y="185" class="zone-title" style="font-size: 11px;">Subnet: Application (10.1.0.0/16)</text>

                                <!-- GKE -->
                                <rect x="120" y="200" width="110" height="60" class="service-box gcp-service"/>
                                <text x="175" y="225" class="service-title" text-anchor="middle">GKE Cluster</text>
                                <text x="175" y="240" class="service-subtitle" text-anchor="middle">Kubernetes</text>

                                <!-- Cloud Run -->
                                <rect x="250" y="200" width="110" height="60" class="service-box gcp-service"/>
                                <text x="305" y="225" class="service-title" text-anchor="middle">Cloud Run</text>
                                <text x="305" y="240" class="service-subtitle" text-anchor="middle">Serverless</text>

                                <!-- Cloud SQL -->
                                <rect x="120" y="280" width="110" height="60" class="service-box gcp-service"/>
                                <text x="175" y="305" class="service-title" text-anchor="middle">Cloud SQL</text>
                                <text x="175" y="320" class="service-subtitle" text-anchor="middle">PostgreSQL</text>

                                <!-- Memorystore -->
                                <rect x="250" y="280" width="110" height="60" class="service-box gcp-service"/>
                                <text x="305" y="305" class="service-title" text-anchor="middle">Memorystore</text>
                                <text x="305" y="320" class="service-subtitle" text-anchor="middle">Redis</text>

                                <!-- Cloud Storage -->
                                <rect x="120" y="360" width="110" height="60" class="service-box gcp-service"/>
                                <text x="175" y="385" class="service-title" text-anchor="middle">Cloud Storage</text>
                                <text x="175" y="400" class="service-subtitle" text-anchor="middle">Object Storage</text>

                                <!-- Dataflow -->
                                <rect x="250" y="360" width="110" height="60" class="service-box gcp-service"/>
                                <text x="305" y="385" class="service-title" text-anchor="middle">Dataflow</text>
                                <text x="305" y="400" class="service-subtitle" text-anchor="middle">Stream Processing</text>

                                <!-- Subnet 2 - Analytics -->
                                <rect x="410" y="160" width="280" height="270" class="zone-box" stroke="#4285F4" stroke-width="1" fill="rgba(66, 133, 244, 0.05)"/>
                                <text x="425" y="185" class="zone-title" style="font-size: 11px;">Subnet: Analytics (10.2.0.0/16)</text>

                                <!-- BigQuery -->
                                <rect x="430" y="220" width="110" height="80" class="service-box gcp-service"/>
                                <text x="485" y="250" class="service-title" text-anchor="middle">BigQuery</text>
                                <text x="485" y="265" class="service-subtitle" text-anchor="middle">Data Warehouse</text>
                                <text x="485" y="280" class="service-subtitle" text-anchor="middle">(Serverless)</text>

                                <!-- Pub/Sub -->
                                <rect x="560" y="220" width="110" height="80" class="service-box gcp-service"/>
                                <text x="615" y="250" class="service-title" text-anchor="middle">Pub/Sub</text>
                                <text x="615" y="265" class="service-subtitle" text-anchor="middle">Message Queue</text>

                                <!-- Region 2 - europe-west1 -->
                                <rect x="750" y="110" width="680" height="340" class="zone-box" stroke="#4285F4" stroke-width="1.5" fill="rgba(66, 133, 244, 0.02)"/>
                                <text x="765" y="140" class="zone-title" style="font-size: 12px;">Region: europe-west1</text>

                                <!-- GKE EU -->
                                <rect x="780" y="200" width="110" height="60" class="service-box gcp-service"/>
                                <text x="835" y="225" class="service-title" text-anchor="middle">GKE Cluster</text>
                                <text x="835" y="240" class="service-subtitle" text-anchor="middle">EU Region</text>

                                <!-- Cloud SQL EU -->
                                <rect x="910" y="200" width="110" height="60" class="service-box gcp-service"/>
                                <text x="965" y="225" class="service-title" text-anchor="middle">Cloud SQL</text>
                                <text x="965" y="240" class="service-subtitle" text-anchor="middle">Read Replica</text>

                                <!-- Global Services -->
                                <rect x="50" y="520" width="1400" height="220" class="zone-box gcp-color"/>
                                <text x="70" y="550" class="zone-title" fill="#4285F4">Global & AI/ML Services</text>

                                <!-- Cloud Load Balancing -->
                                <rect x="80" y="570" width="140" height="70" class="service-box gcp-service"/>
                                <text x="150" y="600" class="service-title" text-anchor="middle">Cloud Load</text>
                                <text x="150" y="615" class="service-subtitle" text-anchor="middle">Balancing (Global)</text>

                                <!-- Cloud Armor -->
                                <rect x="250" y="570" width="140" height="70" class="service-box gcp-service"/>
                                <text x="320" y="600" class="service-title" text-anchor="middle">Cloud Armor</text>
                                <text x="320" y="615" class="service-subtitle" text-anchor="middle">DDoS & WAF</text>

                                <!-- Vertex AI -->
                                <rect x="420" y="570" width="140" height="70" class="service-box gcp-service"/>
                                <text x="490" y="600" class="service-title" text-anchor="middle">Vertex AI</text>
                                <text x="490" y="615" class="service-subtitle" text-anchor="middle">ML Platform</text>

                                <!-- Gemini -->
                                <rect x="590" y="570" width="140" height="70" class="service-box gcp-service"/>
                                <text x="660" y="600" class="service-title" text-anchor="middle">Gemini Pro</text>
                                <text x="660" y="615" class="service-subtitle" text-anchor="middle">Multimodal LLM</text>

                                <!-- Security Command Center -->
                                <rect x="760" y="570" width="160" height="70" class="service-box gcp-service"/>
                                <text x="840" y="600" class="service-title" text-anchor="middle">Security Command</text>
                                <text x="840" y="615" class="service-subtitle" text-anchor="middle">Center</text>

                                <!-- Cloud CDN -->
                                <rect x="950" y="570" width="140" height="70" class="service-box gcp-service"/>
                                <text x="1020" y="600" class="service-title" text-anchor="middle">Cloud CDN</text>
                                <text x="1020" y="615" class="service-subtitle" text-anchor="middle">Content Delivery</text>

                                <!-- Connection Lines -->
                                <line x1="700" y1="280" x2="750" y2="280" stroke="#4285F4" stroke-width="3" marker-end="url(#arrowhead-gcp)"/>
                                <text x="725" y="270" class="service-subtitle" fill="#4285F4">VPC Peering</text>
                            </svg>
                        </div>
                        </div>
                        <!-- End hidden placeholder -->

                        <div style="margin-top: 1rem; padding: 1rem; background: rgba(66, 133, 244, 0.05); border-radius: 4px;">
                            <p style="color: #1e293b; font-size: 0.9rem; margin-bottom: 0.5rem;">
                                <strong style="color: #4285F4;">Key Features:</strong>
                            </p>
                            <ul style="color: #334155; font-size: 0.85rem; margin-left: 1.5rem;">
                                <li>Global VPC spans all regions (no cross-region peering needed)</li>
                                <li>BigQuery serverless analytics with flat-rate pricing (40% cost savings)</li>
                                <li>Vertex AI for ML training with custom containers</li>
                                <li>Gemini Pro for multilingual document analysis (international projects)</li>
                                <li>Data residency in EU (europe-west1 for GDPR compliance)</li>
                            </ul>
                        </div>
                    </div>
                </details>
            </div>

            <!-- Icon Sources -->
            <div style="padding: 1rem; background: rgba(96, 165, 250, 0.05); border-radius: 4px; border-left: 3px solid #60a5fa; margin-bottom: 2rem;">
                <h5 style="color: #60a5fa; margin-bottom: 0.75rem;">ðŸ“¦ Official Cloud Provider Icon Sets</h5>
                <div style="display: grid; gap: 0.5rem; font-size: 0.85rem; color: #334155;">
                    <div>
                        <strong>Azure Icons:</strong>
                        <a href="https://learn.microsoft.com/en-us/azure/architecture/icons/" target="_blank" style="color: #0078D4; margin-left: 0.5rem;">Microsoft Learn - Azure Architecture Icons</a>
                    </div>
                    <div>
                        <strong>AWS Icons:</strong>
                        <a href="https://aws.amazon.com/architecture/icons/" target="_blank" style="color: #FF9900; margin-left: 0.5rem;">AWS Official Architecture Icons</a>
                    </div>
                    <div>
                        <strong>GCP Icons:</strong>
                        <a href="https://cloud.google.com/icons" target="_blank" style="color: #4285F4; margin-left: 0.5rem;">Google Cloud Official Icons</a>
                    </div>
                </div>
            </div>
        </div>

        <!-- 4. Architecture Decision Records (ADRs) -->
        <div class="tech-adrs" style="margin-bottom: 2rem;">
            <h3 style="color: #60a5fa; margin-bottom: 1rem; font-size: 1.3rem; text-align: center;">Architecture Decision Records</h3>
            <p style="text-align: center; color: #475569; margin-bottom: 1rem; font-size: 0.95rem;">Key architectural decisions with alternatives considered and trade-off analysis.</p>

            <div class="arch-accordion">
                <!-- ADR-001 -->
                <details class="arch-detail-section">
                    <summary class="arch-detail-header">
                        <span class="arch-detail-icon">ðŸ“‹</span>
                        <span class="arch-detail-title">ADR-001: Multi-Cloud vs Single Cloud</span>
                    </summary>
                    <div class="arch-detail-content">
                        <h4>Context</h4>
                        <p>Deciding between single-provider simplicity and multi-cloud resilience for a mission-critical construction risk platform.</p>

                        <h4>Decision</h4>
                        <p><strong>Multi-cloud with Azure as primary anchor</strong> (Azure 70%, AWS 25%, GCP 5%).</p>

                        <h4>Rationale</h4>
                        <ul>
                            <li><strong>Risk mitigation:</strong> No single point of failure (AWS us-east-1 outage Dec 2021 lasted 8 hours, would have halted operations).</li>
                            <li><strong>Best-of-breed:</strong> Use each provider's strongest services (BigQuery analytics > Synapse, SageMaker ML > Azure ML, Azure AD integration).</li>
                            <li><strong>Negotiating leverage:</strong> Prevents vendor lock-in pricing pressure (saved 18% total cost through multi-cloud optimization).</li>
                            <li><strong>Compliance:</strong> Data residency requirements in EU require GCP Frankfurt region (financial regulations).</li>
                        </ul>

                        <h4>Alternatives Considered</h4>
                        <div style="margin-top: 1rem;">
                            <h5 style="color: #475569;">Option 1: Azure-only</h5>
                            <p>âŒ Azure ML inferior to SageMaker for large-scale training (40% slower in benchmarks)<br>
                            âŒ No BigQuery equivalent (Synapse 3x slower for ad-hoc queries)<br>
                            âŒ Single point of failure risk</p>

                            <h5 style="color: #475569; margin-top: 1rem;">Option 2: AWS-only</h5>
                            <p>âŒ No enterprise agreement (40% price premium vs Azure discount)<br>
                            âŒ Existing Azure AD investment wasted (100K users migrated)<br>
                            âŒ Weaker IoT Hub vs Azure IoT Hub (device twin features)</p>
                        </div>

                        <h4>Consequences</h4>
                        <p><strong>Pros:</strong> Resilience, best-of-breed services, 18% cost optimization<br>
                        <strong>Cons:</strong> Operational complexity (multi-cloud networking, IAM management)<br>
                        <strong>Mitigation:</strong> Terraform for unified IaC, Datadog for unified monitoring</p>

                        <h4>Metrics</h4>
                        <ul>
                            <li>Total cost: 18% lower than Azure-only ($2.8M vs $3.4M projected)</li>
                            <li>Training time: 40% faster on SageMaker spot instances</li>
                            <li>Operational overhead: +2 FTE SREs needed for multi-cloud management</li>
                        </ul>
                    </div>
                </details>

                <!-- ADR-002 -->
                <details class="arch-detail-section">
                    <summary class="arch-detail-header">
                        <span class="arch-detail-icon">ðŸ“‹</span>
                        <span class="arch-detail-title">ADR-002: Kubernetes vs Serverless-First</span>
                    </summary>
                    <div class="arch-detail-content">
                        <h4>Context</h4>
                        <p>Choosing compute model for 80+ microservices with varying load patterns (real-time APIs, event-driven processing, batch jobs).</p>

                        <h4>Decision</h4>
                        <p><strong>Hybrid:</strong> Kubernetes for stateful services, serverless for event-driven workloads.</p>

                        <h4>Rationale</h4>
                        <ul>
                            <li><strong>Cost efficiency:</strong> Serverless has no idle cost (saves $12K/month on non-prod environments).</li>
                            <li><strong>Scaling:</strong> K8s better for predictable load (API servers), Lambda for spiky load (document processing: 0 â†’ 1000 requests in seconds).</li>
                            <li><strong>Operational complexity:</strong> K8s requires cluster management but gives control over networking/security (VPC peering, service mesh).</li>
                        </ul>

                        <h4>Service Breakdown</h4>
                        <table style="width: 100%; border-collapse: collapse; margin-top: 1rem; color: #1e293b;">
                            <thead>
                                <tr style="background: rgba(96, 165, 250, 0.1);">
                                    <th style="padding: 0.5rem; text-align: left; color: #0f172a;">Service</th>
                                    <th style="padding: 0.5rem; text-align: left; color: #0f172a;">Platform</th>
                                    <th style="padding: 0.5rem; text-align: left; color: #0f172a;">Reason</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr style="border-bottom: 1px solid rgba(148, 163, 184, 0.2);">
                                    <td style="padding: 0.5rem; color: #334155;">Risk Analysis API</td>
                                    <td style="padding: 0.5rem; color: #334155;">Kubernetes (EKS)</td>
                                    <td style="padding: 0.5rem; color: #334155;">Real-time, <100ms latency required, stateful connections</td>
                                </tr>
                                <tr style="border-bottom: 1px solid rgba(148, 163, 184, 0.2);">
                                    <td style="padding: 0.5rem; color: #334155;">Document Processing</td>
                                    <td style="padding: 0.5rem; color: #334155;">Lambda</td>
                                    <td style="padding: 0.5rem; color: #334155;">Event-driven (S3 upload triggers), scales 0â†’1000 in seconds</td>
                                </tr>
                                <tr style="border-bottom: 1px solid rgba(148, 163, 184, 0.2);">
                                    <td style="padding: 0.5rem; color: #334155;">ML Training Jobs</td>
                                    <td style="padding: 0.5rem; color: #334155;">Kubernetes (spot)</td>
                                    <td style="padding: 0.5rem; color: #334155;">Long-running (hours), need GPU, checkpointing state</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </details>

                <!-- ADR-003 -->
                <details class="arch-detail-section">
                    <summary class="arch-detail-header">
                        <span class="arch-detail-icon">ðŸ“‹</span>
                        <span class="arch-detail-title">ADR-003: LLM Provider Selection (GPT-4 vs Claude vs Open-Source)</span>
                    </summary>
                    <div class="arch-detail-content">
                        <h4>Context</h4>
                        <p>Need LLMs for document understanding (blueprints, contracts, safety reports). Requirements: 94%+ accuracy on construction domain, <3sec inference, data privacy compliance.</p>

                        <h4>Decision</h4>
                        <p><strong>Multi-LLM strategy:</strong> GPT-4V (blueprints), Claude 3.5 (contracts), Gemini (multilingual).</p>

                        <h4>Rationale</h4>
                        <ul>
                            <li><strong>GPT-4V:</strong> Best spatial reasoning for blueprint analysis (identifies structural issues in floor plans).</li>
                            <li><strong>Claude 3.5:</strong> Best long-context legal language (200K token window handles 80-page contracts), superior clause extraction (96% vs GPT-4 89%).</li>
                            <li><strong>Gemini Pro:</strong> Best multilingual support for international projects (Spanish, Mandarin, Arabic contracts).</li>
                        </ul>

                        <h4>Alternatives Considered</h4>
                        <div style="margin-top: 1rem;">
                            <h5 style="color: #475569;">Option 1: Open-source LLMs (Llama 3, Mistral)</h5>
                            <p>âŒ Insufficient domain accuracy: 68% vs 94% for GPT-4 on construction contract extraction<br>
                            âŒ Requires expensive GPU infrastructure: $50K/month for 4x A100 instances<br>
                            âŒ No enterprise SLA or support</p>

                            <h5 style="color: #475569; margin-top: 1rem;">Option 2: Single LLM (GPT-4 only)</h5>
                            <p>âŒ Claude outperforms on long contracts (200K vs 128K token window)<br>
                            âŒ Gemini better for multilingual (lower hallucination rate on non-English text)</p>
                        </div>

                        <h4>Cost Optimization</h4>
                        <p>Redis caching layer + embedding similarity check before LLM call reduces API costs by 40% ($48K/year savings).</p>
                    </div>
                </details>
            </div>
        </div>

        <!-- 5. Enterprise Requirements -->
        <div class="tech-enterprise-reqs">
            <h3 style="color: #60a5fa; margin-bottom: 1rem; font-size: 1.3rem; text-align: center;">Enterprise Requirements</h3>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1.5rem;">
                <!-- Compliance & Security -->
                <div style="background: linear-gradient(135deg, #1e293b 0%, #334155 100%); padding: 1.5rem; border-radius: 8px; border-left: 4px solid #60a5fa;">
                    <h4 style="color: #60a5fa; margin-bottom: 1rem; display: flex; align-items: center; gap: 0.5rem;">
                        <span style="font-size: 1.5rem;">ðŸ”’</span> Compliance & Security
                    </h4>
                    <div style="margin-bottom: 1rem;">
                        <h5 style="color: #e2e8f0; font-size: 0.95rem; margin-bottom: 0.5rem;">Certifications</h5>
                        <p style="font-size: 0.9rem; line-height: 1.6; color: #cbd5e1;">âœ… SOC 2 Type II<br>âœ… ISO 27001<br>âœ… GDPR Compliant<br>âœ… CCPA Compliant</p>
                    </div>
                    <div style="margin-bottom: 1rem;">
                        <h5 style="color: #e2e8f0; font-size: 0.95rem; margin-bottom: 0.5rem;">Encryption</h5>
                        <p style="font-size: 0.9rem; color: #cbd5e1;">All data encrypted at rest (AES-256) and in transit (TLS 1.3). Customer-managed keys (CMK) in Azure Key Vault.</p>
                    </div>
                    <div>
                        <h5 style="color: #e2e8f0; font-size: 0.95rem; margin-bottom: 0.5rem;">Access Controls</h5>
                        <p style="font-size: 0.9rem; color: #cbd5e1;">Azure AD RBAC with MFA, 90-day access review cycle, least-privilege principle enforced via OPA policies.</p>
                    </div>
                </div>

                <!-- Cost Optimization -->
                <div style="background: linear-gradient(135deg, #1e293b 0%, #334155 100%); padding: 1.5rem; border-radius: 8px; border-left: 4px solid #22c55e;">
                    <h4 style="color: #22c55e; margin-bottom: 1rem; display: flex; align-items: center; gap: 0.5rem;">
                        <span style="font-size: 1.5rem;">ðŸ’°</span> Cost Optimization
                    </h4>
                    <div style="margin-bottom: 1rem;">
                        <h5 style="color: #e2e8f0; font-size: 0.95rem; margin-bottom: 0.5rem;">Annual Spend: $2.8M</h5>
                        <p style="font-size: 0.9rem; line-height: 1.6; color: #cbd5e1;">
                            AI/ML: $1.2M (43%)<br>
                            Data: $800K (29%)<br>
                            Compute: $450K (16%)<br>
                            Other: $350K (12%)
                        </p>
                    </div>
                    <div>
                        <h5 style="color: #e2e8f0; font-size: 0.95rem; margin-bottom: 0.5rem;">Top Optimizations</h5>
                        <p style="font-size: 0.9rem; line-height: 1.6; color: #cbd5e1;">
                            1. Reserved Instances: $480K saved<br>
                            2. Spot instances (ML): $350K saved<br>
                            3. S3 lifecycle: $120K saved<br>
                            4. BigQuery optimization: $80K saved
                        </p>
                    </div>
                </div>

                <!-- Performance & SLA -->
                <div style="background: linear-gradient(135deg, #1e293b 0%, #334155 100%); padding: 1.5rem; border-radius: 8px; border-left: 4px solid #a855f7;">
                    <h4 style="color: #a855f7; margin-bottom: 1rem; display: flex; align-items: center; gap: 0.5rem;">
                        <span style="font-size: 1.5rem;">âš¡</span> Performance & SLA
                    </h4>
                    <div style="margin-bottom: 1rem;">
                        <h5 style="color: #e2e8f0; font-size: 0.95rem; margin-bottom: 0.5rem;">Service Level Objectives</h5>
                        <p style="font-size: 0.9rem; line-height: 1.6; color: #cbd5e1;">
                            API Uptime: 99.97% (target: 99.9%)<br>
                            API Latency (p95): 150ms (target: 200ms)<br>
                            ML Inference (p99): 380ms (target: 500ms)<br>
                            Data Ingestion: 12M events/sec
                        </p>
                    </div>
                    <div>
                        <h5 style="color: #e2e8f0; font-size: 0.95rem; margin-bottom: 0.5rem;">Disaster Recovery</h5>
                        <p style="font-size: 0.9rem; color: #cbd5e1;">RTO: 4 hours | RPO: 15 minutes<br>Active-active in 2 AWS regions + passive DR in Azure</p>
                    </div>
                </div>

                <!-- Vendor Lock-in Mitigation -->
                <div style="background: linear-gradient(135deg, #1e293b 0%, #334155 100%); padding: 1.5rem; border-radius: 8px; border-left: 4px solid #f97316;">
                    <h4 style="color: #f97316; margin-bottom: 1rem; display: flex; align-items: center; gap: 0.5rem;">
                        <span style="font-size: 1.5rem;">ðŸ”“</span> Vendor Lock-in Mitigation
                    </h4>
                    <div style="margin-bottom: 1rem;">
                        <h5 style="color: #e2e8f0; font-size: 0.95rem; margin-bottom: 0.5rem;">Open Standards</h5>
                        <p style="font-size: 0.9rem; line-height: 1.6; color: #cbd5e1;">
                            âœ… Kubernetes (portable across clouds)<br>
                            âœ… Terraform (multi-cloud IaC)<br>
                            âœ… OpenTelemetry (observability)<br>
                            âœ… S3 API (swap to MinIO/Ceph)
                        </p>
                    </div>
                    <div>
                        <h5 style="color: #e2e8f0; font-size: 0.95rem; margin-bottom: 0.5rem;">Exit Strategy</h5>
                        <p style="font-size: 0.9rem; color: #cbd5e1;">AWS â†’ Azure migration: 6 weeks (Terraform declarative)<br>Cloud â†’ on-prem: 3 months (all containerized)</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- ROI Section - Interactive Calculator -->
<section id="roi" class="section roi-section tab-content">
    <div class="container">
        <div class="section-header">
            <span class="section-tag">Business Case</span>
            <h2 class="section-title">ROI Calculator</h2>
            <p class="section-subtitle">
                Interactive financial model. Adjust your portfolio size and assumptions to see projected returns.
            </p>
        </div>

        <!-- Portfolio Size & Duration Input -->
        <div class="roi-calculator-header">
            <h3>
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="2" y="3" width="20" height="14" rx="2"/><path d="M8 21h8"/><path d="M12 17v4"/></svg>
                Configure Your Model
                <button class="roi-reset-btn" onclick="resetROICalculator()">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/><path d="M3 3v5h5"/></svg>
                    Reset
                </button>
            </h3>
            <div class="roi-config-grid">
                <!-- Portfolio Size -->
                <div class="roi-config-item">
                    <label>Annual Portfolio Value</label>
                    <input type="range" class="portfolio-slider" id="portfolio-slider" min="100" max="2000" value="500" step="50" oninput="updateROICalculations()">
                    <div class="slider-ticks">
                        <span class="tick" style="left: 0%"><span class="tick-mark"></span><span class="tick-label">$100M</span></span>
                        <span class="tick" style="left: 21.05%"><span class="tick-mark"></span><span class="tick-label">$500M</span></span>
                        <span class="tick" style="left: 47.37%"><span class="tick-mark"></span><span class="tick-label">$1B</span></span>
                        <span class="tick" style="left: 73.68%"><span class="tick-mark"></span><span class="tick-label">$1.5B</span></span>
                        <span class="tick" style="left: 100%"><span class="tick-mark"></span><span class="tick-label">$2B</span></span>
                    </div>
                </div>
                <!-- Duration Selector -->
                <div class="roi-config-item duration-config">
                    <label>Projection Duration</label>
                    <div class="duration-buttons">
                        <button class="duration-btn" data-years="1" onclick="setDuration(1)">1 yr</button>
                        <button class="duration-btn" data-years="2" onclick="setDuration(2)">2 yr</button>
                        <button class="duration-btn active" data-years="3" onclick="setDuration(3)">3 yr</button>
                        <button class="duration-btn" data-years="5" onclick="setDuration(5)">5 yr</button>
                        <button class="duration-btn" data-years="10" onclick="setDuration(10)">10 yr</button>
                    </div>
                </div>
                <!-- Summary Display -->
                <div class="roi-config-summary">
                    <div class="config-display">
                        <div class="config-display-item">
                            <span class="config-label">Portfolio</span>
                            <span class="config-value" id="portfolio-display">$500M</span>
                        </div>
                        <div class="config-display-item">
                            <span class="config-label">Duration</span>
                            <span class="config-value" id="duration-display">3 Years</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="roi-grid">
            <!-- Status Quo Losses Card -->
            <div class="roi-card roi-status-quo">
                <h3>
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M10.29 3.86L1.82 18a2 2 0 001.71 3h16.94a2 2 0 001.71-3L13.71 3.86a2 2 0 00-3.42 0z"/><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/></svg>
                    Current Losses (Status Quo)
                </h3>
                <div class="roi-items">
                    <!-- Project Delays & Overruns -->
                    <div class="roi-item-expandable" id="loss-overruns">
                        <div class="roi-item-header" onclick="toggleROIItem('loss-overruns')">
                            <div class="roi-item-header-left">
                                <div class="roi-item-toggle">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="6 9 12 15 18 9"/></svg>
                                </div>
                                <span class="roi-item-name">Project Cost Overruns</span>
                            </div>
                            <div class="roi-item-header-right">
                                <span class="roi-item-percent">65%</span>
                                <span class="roi-item-amount" id="loss-overruns-value">$3.9M</span>
                            </div>
                        </div>
                        <div class="roi-item-details">
                            <div class="roi-detail-row">
                                <span class="roi-detail-label"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg> Undetected scope creep</span>
                                <span class="roi-detail-value">$1.5M</span>
                            </div>
                            <div class="roi-detail-row">
                                <span class="roi-detail-label"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg> Late discovery of issues</span>
                                <span class="roi-detail-value">$1.2M</span>
                            </div>
                            <div class="roi-detail-row">
                                <span class="roi-detail-label"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg> Emergency fixes & rework</span>
                                <span class="roi-detail-value">$800K</span>
                            </div>
                            <div class="roi-detail-row">
                                <span class="roi-detail-label"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg> Material waste & delays</span>
                                <span class="roi-detail-value">$400K</span>
                            </div>
                            <div class="roi-detail-formula">
                                <strong>Reality:</strong> 77% of construction projects exceed budget. Average overrun: <code>9.5%</code> of total project value
                            </div>
                        </div>
                    </div>

                    <!-- Schedule Delays -->
                    <div class="roi-item-expandable" id="loss-delays">
                        <div class="roi-item-header" onclick="toggleROIItem('loss-delays')">
                            <div class="roi-item-header-left">
                                <div class="roi-item-toggle">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="6 9 12 15 18 9"/></svg>
                                </div>
                                <span class="roi-item-name">Schedule Delay Penalties</span>
                            </div>
                            <div class="roi-item-header-right">
                                <span class="roi-item-percent">18%</span>
                                <span class="roi-item-amount" id="loss-delays-value">$1.1M</span>
                            </div>
                        </div>
                        <div class="roi-item-details">
                            <div class="roi-detail-row">
                                <span class="roi-detail-label"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg> Liquidated damages</span>
                                <span class="roi-detail-value">$650K</span>
                            </div>
                            <div class="roi-detail-row">
                                <span class="roi-detail-label"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg> Extended overhead costs</span>
                                <span class="roi-detail-value">$300K</span>
                            </div>
                            <div class="roi-detail-row">
                                <span class="roi-detail-label"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg> Lost revenue opportunities</span>
                                <span class="roi-detail-value">$150K</span>
                            </div>
                            <div class="roi-detail-formula">
                                <strong>Reality:</strong> Average construction delay: <code>20%</code> beyond planned completion. Typical penalty: <code>$5K-15K/day</code>
                            </div>
                        </div>
                    </div>

                    <!-- Safety & Incidents -->
                    <div class="roi-item-expandable" id="loss-safety">
                        <div class="roi-item-header" onclick="toggleROIItem('loss-safety')">
                            <div class="roi-item-header-left">
                                <div class="roi-item-toggle">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="6 9 12 15 18 9"/></svg>
                                </div>
                                <span class="roi-item-name">Safety Incidents & Claims</span>
                            </div>
                            <div class="roi-item-header-right">
                                <span class="roi-item-percent">11%</span>
                                <span class="roi-item-amount" id="loss-safety-value">$650K</span>
                            </div>
                        </div>
                        <div class="roi-item-details">
                            <div class="roi-detail-row">
                                <span class="roi-detail-label"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg> Injury claims & compensation</span>
                                <span class="roi-detail-value">$350K</span>
                            </div>
                            <div class="roi-detail-row">
                                <span class="roi-detail-label"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg> Work stoppages & investigations</span>
                                <span class="roi-detail-value">$200K</span>
                            </div>
                            <div class="roi-detail-row">
                                <span class="roi-detail-label"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg> Insurance premium increases</span>
                                <span class="roi-detail-value">$100K</span>
                            </div>
                            <div class="roi-detail-formula">
                                <strong>Reality:</strong> OSHA estimates construction safety incidents cost US industry <code>$170B/year</code>
                            </div>
                        </div>
                    </div>

                    <!-- Wasted Labor & Inefficiency -->
                    <div class="roi-item-expandable" id="loss-inefficiency">
                        <div class="roi-item-header" onclick="toggleROIItem('loss-inefficiency')">
                            <div class="roi-item-header-left">
                                <div class="roi-item-toggle">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="6 9 12 15 18 9"/></svg>
                                </div>
                                <span class="roi-item-name">Wasted Labor & Inefficiency</span>
                            </div>
                            <div class="roi-item-header-right">
                                <span class="roi-item-percent">6%</span>
                                <span class="roi-item-amount" id="loss-inefficiency-value">$350K</span>
                            </div>
                        </div>
                        <div class="roi-item-details">
                            <div class="roi-detail-row">
                                <span class="roi-detail-label"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg> Manual reporting & meetings</span>
                                <span class="roi-detail-value">$180K</span>
                            </div>
                            <div class="roi-detail-row">
                                <span class="roi-detail-label"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg> Coordination inefficiencies</span>
                                <span class="roi-detail-value">$120K</span>
                            </div>
                            <div class="roi-detail-row">
                                <span class="roi-detail-label"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg> Documentation rework</span>
                                <span class="roi-detail-value">$50K</span>
                            </div>
                            <div class="roi-detail-formula">
                                <strong>Reality:</strong> McKinsey: <code>30%</code> of construction labor time is spent on non-productive activities
                            </div>
                        </div>
                    </div>
                </div>
                <div class="roi-total">
                    <span class="roi-total-label">Annual Losses Without AI</span>
                    <span class="roi-total-value" id="total-losses">$6.0M</span>
                </div>
                <div class="roi-total" style="border-top: 2px solid #fbbf24; padding-top: 1rem; margin-top: 0.5rem;">
                    <span class="roi-total-label" id="cumulative-losses-label">Total Losses (3 Years)</span>
                    <span class="roi-total-value" id="cumulative-losses">$18.0M</span>
                </div>
            </div>

            <!-- Implementation Costs Card -->
            <div class="roi-card roi-costs">
                <h3>
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><line x1="15" y1="9" x2="9" y2="15"/><line x1="9" y1="9" x2="15" y2="15"/></svg>
                    Implementation Costs
                </h3>
                <div class="roi-items">
                    <!-- Cloud Infrastructure -->
                    <div class="roi-item-expandable" id="cost-cloud">
                        <div class="roi-item-header" onclick="toggleROIItem('cost-cloud')">
                            <div class="roi-item-header-left">
                                <div class="roi-item-toggle">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="6 9 12 15 18 9"/></svg>
                                </div>
                                <span class="roi-item-name">Cloud Infrastructure</span>
                            </div>
                            <div class="roi-item-header-right">
                                <span class="roi-item-percent">22%</span>
                                <span class="roi-item-amount" id="cost-cloud-value">$180K</span>
                            </div>
                        </div>
                        <div class="roi-item-details">
                            <div class="roi-detail-row">
                                <span class="roi-detail-label"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg> AWS/Azure Compute</span>
                                <span class="roi-detail-value" id="cost-cloud-compute">$85K</span>
                            </div>
                            <div class="roi-detail-row">
                                <span class="roi-detail-label"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg> Data Storage & Lakes</span>
                                <span class="roi-detail-value" id="cost-cloud-storage">$45K</span>
                            </div>
                            <div class="roi-detail-row">
                                <span class="roi-detail-label"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg> Network & Security</span>
                                <span class="roi-detail-value" id="cost-cloud-network">$35K</span>
                            </div>
                            <div class="roi-detail-row">
                                <span class="roi-detail-label"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg> Monitoring & DevOps</span>
                                <span class="roi-detail-value" id="cost-cloud-devops">$15K</span>
                            </div>
                            <div class="roi-item-slider-row">
                                <span class="roi-item-slider-label">Adjust</span>
                                <input type="range" class="roi-item-slider" id="cost-cloud-slider" min="50" max="150" value="100" step="5" oninput="updateROICalculations()">
                                <span class="roi-item-slider-value" id="cost-cloud-mult">100%</span>
                            </div>
                            <div class="roi-detail-formula">
                                <strong>Scaling:</strong> Base <code>$120K</code> + <code>$0.12</code> per $1M portfolio
                            </div>
                        </div>
                    </div>

                    <!-- AI/ML Development -->
                    <div class="roi-item-expandable" id="cost-aiml">
                        <div class="roi-item-header" onclick="toggleROIItem('cost-aiml')">
                            <div class="roi-item-header-left">
                                <div class="roi-item-toggle">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="6 9 12 15 18 9"/></svg>
                                </div>
                                <span class="roi-item-name">AI/ML Development</span>
                            </div>
                            <div class="roi-item-header-right">
                                <span class="roi-item-percent">39%</span>
                                <span class="roi-item-amount" id="cost-aiml-value">$320K</span>
                            </div>
                        </div>
                        <div class="roi-item-details">
                            <div class="roi-detail-row">
                                <span class="roi-detail-label"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg> Computer Vision Models</span>
                                <span class="roi-detail-value" id="cost-aiml-cv">$120K</span>
                            </div>
                            <div class="roi-detail-row">
                                <span class="roi-detail-label"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg> NLP & Document Processing</span>
                                <span class="roi-detail-value" id="cost-aiml-nlp">$80K</span>
                            </div>
                            <div class="roi-detail-row">
                                <span class="roi-detail-label"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg> Predictive Risk Models</span>
                                <span class="roi-detail-value" id="cost-aiml-risk">$70K</span>
                            </div>
                            <div class="roi-detail-row">
                                <span class="roi-detail-label"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg> MLOps & Pipelines</span>
                                <span class="roi-detail-value" id="cost-aiml-ops">$50K</span>
                            </div>
                            <div class="roi-item-slider-row">
                                <span class="roi-item-slider-label">Adjust</span>
                                <input type="range" class="roi-item-slider" id="cost-aiml-slider" min="50" max="150" value="100" step="5" oninput="updateROICalculations()">
                                <span class="roi-item-slider-value" id="cost-aiml-mult">100%</span>
                            </div>
                            <div class="roi-detail-formula">
                                <strong>Scaling:</strong> Base <code>$250K</code> + <code>$0.14</code> per $1M portfolio
                            </div>
                        </div>
                    </div>

                    <!-- IoT Hardware -->
                    <div class="roi-item-expandable" id="cost-iot">
                        <div class="roi-item-header" onclick="toggleROIItem('cost-iot')">
                            <div class="roi-item-header-left">
                                <div class="roi-item-toggle">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="6 9 12 15 18 9"/></svg>
                                </div>
                                <span class="roi-item-name">IoT Hardware & Installation</span>
                            </div>
                            <div class="roi-item-header-right">
                                <span class="roi-item-percent">18%</span>
                                <span class="roi-item-amount" id="cost-iot-value">$150K</span>
                            </div>
                        </div>
                        <div class="roi-item-details">
                            <div class="roi-detail-row">
                                <span class="roi-detail-label"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg> Site Cameras (AI-enabled)</span>
                                <span class="roi-detail-value" id="cost-iot-cameras">$60K</span>
                            </div>
                            <div class="roi-detail-row">
                                <span class="roi-detail-label"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg> Environmental Sensors</span>
                                <span class="roi-detail-value" id="cost-iot-sensors">$40K</span>
                            </div>
                            <div class="roi-detail-row">
                                <span class="roi-detail-label"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg> Edge Computing Nodes</span>
                                <span class="roi-detail-value" id="cost-iot-edge">$30K</span>
                            </div>
                            <div class="roi-detail-row">
                                <span class="roi-detail-label"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg> Installation & Cabling</span>
                                <span class="roi-detail-value" id="cost-iot-install">$20K</span>
                            </div>
                            <div class="roi-item-slider-row">
                                <span class="roi-item-slider-label">Adjust</span>
                                <input type="range" class="roi-item-slider" id="cost-iot-slider" min="50" max="150" value="100" step="5" oninput="updateROICalculations()">
                                <span class="roi-item-slider-value" id="cost-iot-mult">100%</span>
                            </div>
                            <div class="roi-detail-formula">
                                <strong>Scaling:</strong> Base <code>$80K</code> + <code>$0.14</code> per $1M portfolio
                            </div>
                        </div>
                    </div>

                    <!-- Integration -->
                    <div class="roi-item-expandable" id="cost-integration">
                        <div class="roi-item-header" onclick="toggleROIItem('cost-integration')">
                            <div class="roi-item-header-left">
                                <div class="roi-item-toggle">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="6 9 12 15 18 9"/></svg>
                                </div>
                                <span class="roi-item-name">Integration & Customization</span>
                            </div>
                            <div class="roi-item-header-right">
                                <span class="roi-item-percent">15%</span>
                                <span class="roi-item-amount" id="cost-integration-value">$120K</span>
                            </div>
                        </div>
                        <div class="roi-item-details">
                            <div class="roi-detail-row">
                                <span class="roi-detail-label"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg> ERP Integration (Procore, etc.)</span>
                                <span class="roi-detail-value" id="cost-int-erp">$45K</span>
                            </div>
                            <div class="roi-detail-row">
                                <span class="roi-detail-label"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg> Custom Dashboard Development</span>
                                <span class="roi-detail-value" id="cost-int-dashboard">$40K</span>
                            </div>
                            <div class="roi-detail-row">
                                <span class="roi-detail-label"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg> API & Data Connectors</span>
                                <span class="roi-detail-value" id="cost-int-api">$35K</span>
                            </div>
                            <div class="roi-item-slider-row">
                                <span class="roi-item-slider-label">Adjust</span>
                                <input type="range" class="roi-item-slider" id="cost-integration-slider" min="50" max="150" value="100" step="5" oninput="updateROICalculations()">
                                <span class="roi-item-slider-value" id="cost-integration-mult">100%</span>
                            </div>
                            <div class="roi-detail-formula">
                                <strong>Scaling:</strong> Base <code>$90K</code> + <code>$0.06</code> per $1M portfolio
                            </div>
                        </div>
                    </div>

                    <!-- Training -->
                    <div class="roi-item-expandable" id="cost-training">
                        <div class="roi-item-header" onclick="toggleROIItem('cost-training')">
                            <div class="roi-item-header-left">
                                <div class="roi-item-toggle">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="6 9 12 15 18 9"/></svg>
                                </div>
                                <span class="roi-item-name">Training & Change Management</span>
                            </div>
                            <div class="roi-item-header-right">
                                <span class="roi-item-percent">6%</span>
                                <span class="roi-item-amount" id="cost-training-value">$50K</span>
                            </div>
                        </div>
                        <div class="roi-item-details">
                            <div class="roi-detail-row">
                                <span class="roi-detail-label"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg> Executive Workshops</span>
                                <span class="roi-detail-value" id="cost-train-exec">$15K</span>
                            </div>
                            <div class="roi-detail-row">
                                <span class="roi-detail-label"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg> Field Team Training</span>
                                <span class="roi-detail-value" id="cost-train-field">$20K</span>
                            </div>
                            <div class="roi-detail-row">
                                <span class="roi-detail-label"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg> Documentation & Support</span>
                                <span class="roi-detail-value" id="cost-train-docs">$15K</span>
                            </div>
                            <div class="roi-item-slider-row">
                                <span class="roi-item-slider-label">Adjust</span>
                                <input type="range" class="roi-item-slider" id="cost-training-slider" min="50" max="150" value="100" step="5" oninput="updateROICalculations()">
                                <span class="roi-item-slider-value" id="cost-training-mult">100%</span>
                            </div>
                            <div class="roi-detail-formula">
                                <strong>Scaling:</strong> Base <code>$35K</code> + <code>$0.03</code> per $1M portfolio
                            </div>
                        </div>
                    </div>
                </div>
                <div class="roi-total">
                    <span class="roi-total-label">Year 1 Cost (Implementation)</span>
                    <span class="roi-total-value" id="year1-costs">$984K</span>
                    <span style="display: block; font-size: 0.75rem; color: var(--text-muted); margin-top: 0.25rem;">Includes setup + initial operations</span>
                </div>
                <div class="roi-total" style="border-top: 2px solid #fecaca; padding-top: 1rem; margin-top: 0.5rem;">
                    <span class="roi-total-label" id="cumulative-costs-label">Total Cost (3 Years)</span>
                    <span class="roi-total-value" id="cumulative-costs">$2.7M</span>
                    <span style="display: block; font-size: 0.75rem; color: var(--text-muted); margin-top: 0.25rem;">Decreases to $820K/year after Year 2</span>
                </div>
            </div>

            <!-- Annual Benefits Card -->
            <div class="roi-card roi-benefits">
                <h3>
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><polyline points="16,12 12,8 8,12"/><line x1="12" y1="16" x2="12" y2="8"/></svg>
                    Annual Benefits
                </h3>
                <div class="roi-items">
                    <!-- Avoided Cost Overruns -->
                    <div class="roi-item-expandable" id="benefit-overruns">
                        <div class="roi-item-header" onclick="toggleROIItem('benefit-overruns')">
                            <div class="roi-item-header-left">
                                <div class="roi-item-toggle">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="6 9 12 15 18 9"/></svg>
                                </div>
                                <span class="roi-item-name">Avoided Cost Overruns</span>
                            </div>
                            <div class="roi-item-header-right">
                                <span class="roi-item-percent">50%</span>
                                <span class="roi-item-amount" id="benefit-overruns-value">$1.8M</span>
                            </div>
                        </div>
                        <div class="roi-item-details">
                            <div class="roi-detail-row">
                                <span class="roi-detail-label"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg> Status Quo Overrun Loss (Annual)</span>
                                <span class="roi-detail-value" id="benefit-overruns-baseline">$3.9M</span>
                            </div>
                            <div class="roi-detail-row">
                                <span class="roi-detail-label"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg> AI Prevention Rate</span>
                                <span class="roi-detail-value">75%</span>
                            </div>
                            <div class="roi-detail-row">
                                <span class="roi-detail-label"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg> Predictive analytics catches issues early</span>
                                <span class="roi-detail-value">âœ“</span>
                            </div>
                            <div class="roi-detail-row">
                                <span class="roi-detail-label"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg> Real-time alerting prevents escalation</span>
                                <span class="roi-detail-value">âœ“</span>
                            </div>
                            <div class="roi-detail-formula">
                                <strong>Formula:</strong> Status Quo Overrun Loss Ã— <code>75%</code> Prevention Rate = Benefit
                            </div>
                        </div>
                    </div>

                    <!-- Schedule Recovery -->
                    <div class="roi-item-expandable" id="benefit-schedule">
                        <div class="roi-item-header" onclick="toggleROIItem('benefit-schedule')">
                            <div class="roi-item-header-left">
                                <div class="roi-item-toggle">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="6 9 12 15 18 9"/></svg>
                                </div>
                                <span class="roi-item-name">Schedule Recovery Value</span>
                            </div>
                            <div class="roi-item-header-right">
                                <span class="roi-item-percent">26%</span>
                                <span class="roi-item-amount" id="benefit-schedule-value">$950K</span>
                            </div>
                        </div>
                        <div class="roi-item-details">
                            <div class="roi-detail-row">
                                <span class="roi-detail-label"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg> Avg. Delay Cost per Day</span>
                                <span class="roi-detail-value" id="benefit-schedule-daily">$50K</span>
                            </div>
                            <div class="roi-detail-row">
                                <span class="roi-detail-label"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg> Days Recovered per Project</span>
                                <span class="roi-detail-value">12</span>
                            </div>
                            <div class="roi-detail-row">
                                <span class="roi-detail-label"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg> Active Projects</span>
                                <span class="roi-detail-value" id="benefit-schedule-projects">8</span>
                            </div>
                            <div class="roi-adjust-row">
                                <span class="roi-adjust-label">Days Saved</span>
                                <input type="range" class="roi-adjust-slider" id="schedule-days-slider" min="3" max="15" value="8" step="1" oninput="updateROICalculations()">
                                <span class="roi-adjust-value" id="schedule-days-display">8</span>
                            </div>
                            <div class="roi-detail-formula">
                                <strong>Formula:</strong> <code>Daily cost</code> x <code>days saved</code> x <code>projects</code>
                            </div>
                        </div>
                    </div>

                    <!-- Safety Prevention -->
                    <div class="roi-item-expandable" id="benefit-safety">
                        <div class="roi-item-header" onclick="toggleROIItem('benefit-safety')">
                            <div class="roi-item-header-left">
                                <div class="roi-item-toggle">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="6 9 12 15 18 9"/></svg>
                                </div>
                                <span class="roi-item-name">Safety Incident Prevention</span>
                            </div>
                            <div class="roi-item-header-right">
                                <span class="roi-item-percent">12%</span>
                                <span class="roi-item-amount" id="benefit-safety-value">$420K</span>
                            </div>
                        </div>
                        <div class="roi-item-details">
                            <div class="roi-detail-row">
                                <span class="roi-detail-label"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg> Avg. Cost per Incident</span>
                                <span class="roi-detail-value">$70K</span>
                            </div>
                            <div class="roi-detail-row">
                                <span class="roi-detail-label"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg> Baseline Annual Incidents</span>
                                <span class="roi-detail-value" id="benefit-safety-baseline">12</span>
                            </div>
                            <div class="roi-detail-row">
                                <span class="roi-detail-label"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg> Incidents Prevented</span>
                                <span class="roi-detail-value" id="benefit-safety-prevented">6</span>
                            </div>
                            <div class="roi-adjust-row">
                                <span class="roi-adjust-label">Reduction %</span>
                                <input type="range" class="roi-adjust-slider" id="safety-reduction-slider" min="5" max="25" value="15" step="5" oninput="updateROICalculations()">
                                <span class="roi-adjust-value" id="safety-reduction-display">15%</span>
                            </div>
                            <div class="roi-detail-formula">
                                <strong>Formula:</strong> <code>$70K</code> x <code>incidents prevented</code>
                            </div>
                        </div>
                    </div>

                    <!-- Insurance Premium -->
                    <div class="roi-item-expandable" id="benefit-insurance">
                        <div class="roi-item-header" onclick="toggleROIItem('benefit-insurance')">
                            <div class="roi-item-header-left">
                                <div class="roi-item-toggle">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="6 9 12 15 18 9"/></svg>
                                </div>
                                <span class="roi-item-name">Insurance Premium Reduction</span>
                            </div>
                            <div class="roi-item-header-right">
                                <span class="roi-item-percent">5%</span>
                                <span class="roi-item-amount" id="benefit-insurance-value">$180K</span>
                            </div>
                        </div>
                        <div class="roi-item-details">
                            <div class="roi-detail-row">
                                <span class="roi-detail-label"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg> Annual Premium (baseline)</span>
                                <span class="roi-detail-value" id="benefit-insurance-baseline">$1.8M</span>
                            </div>
                            <div class="roi-detail-row">
                                <span class="roi-detail-label"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg> Premium Reduction Rate</span>
                                <span class="roi-detail-value" id="insurance-rate-display">10%</span>
                            </div>
                            <div class="roi-adjust-row">
                                <span class="roi-adjust-label">Reduction %</span>
                                <input type="range" class="roi-adjust-slider" id="insurance-reduction-slider" min="2" max="10" value="5" step="1" oninput="updateROICalculations()">
                                <span class="roi-adjust-value" id="insurance-reduction-display">5%</span>
                            </div>
                            <div class="roi-detail-formula">
                                <strong>Formula:</strong> <code>Portfolio</code> x <code>0.36% premium</code> x <code>reduction %</code>
                            </div>
                        </div>
                    </div>

                    <!-- Labor Productivity -->
                    <div class="roi-item-expandable" id="benefit-labor">
                        <div class="roi-item-header" onclick="toggleROIItem('benefit-labor')">
                            <div class="roi-item-header-left">
                                <div class="roi-item-toggle">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="6 9 12 15 18 9"/></svg>
                                </div>
                                <span class="roi-item-name">Labor Productivity Gains</span>
                            </div>
                            <div class="roi-item-header-right">
                                <span class="roi-item-percent">8%</span>
                                <span class="roi-item-amount" id="benefit-labor-value">$280K</span>
                            </div>
                        </div>
                        <div class="roi-item-details">
                            <div class="roi-detail-row">
                                <span class="roi-detail-label"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg> PM Hours Saved/Week</span>
                                <span class="roi-detail-value" id="benefit-labor-hours">40</span>
                            </div>
                            <div class="roi-detail-row">
                                <span class="roi-detail-label"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg> Blended Hourly Rate</span>
                                <span class="roi-detail-value">$135</span>
                            </div>
                            <div class="roi-detail-row">
                                <span class="roi-detail-label"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg> Weeks per Year</span>
                                <span class="roi-detail-value">52</span>
                            </div>
                            <div class="roi-adjust-row">
                                <span class="roi-adjust-label">Hours/Week</span>
                                <input type="range" class="roi-adjust-slider" id="labor-hours-slider" min="10" max="50" value="25" step="5" oninput="updateROICalculations()">
                                <span class="roi-adjust-value" id="labor-hours-display">25</span>
                            </div>
                            <div class="roi-detail-formula">
                                <strong>Formula:</strong> <code>Hours/week</code> x <code>$135</code> x <code>52 weeks</code>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="roi-total">
                    <span class="roi-total-label">Annual Benefit</span>
                    <span class="roi-total-value" id="total-benefits">$3.63M</span>
                </div>
                <div class="roi-total roi-total-cumulative">
                    <span class="roi-total-label" id="cumulative-benefits-label">Total Benefits (3 Years)</span>
                    <span class="roi-total-value" id="cumulative-benefits">$10.89M</span>
                </div>
            </div>
        </div>

        <!-- Summary Metrics -->
        <div class="roi-summary">
            <div class="roi-metric">
                <div class="roi-metric-value" id="metric-roi">343%</div>
                <div class="roi-metric-label" id="metric-roi-label">3-Year ROI</div>
            </div>
            <div class="roi-metric">
                <div class="roi-metric-value" id="metric-payback">2.7 mo</div>
                <div class="roi-metric-label">Payback Period</div>
            </div>
            <div class="roi-metric">
                <div class="roi-metric-value" id="metric-npv">$8.1M</div>
                <div class="roi-metric-label" id="metric-npv-label">3-Year NPV</div>
            </div>
            <div class="roi-metric">
                <div class="roi-metric-value" id="metric-bcr">4.4x</div>
                <div class="roi-metric-label" id="metric-bcr-label">3-Year BCR</div>
            </div>

            <!-- Calculation Breakdown (expandable) -->
            <div class="calculation-breakdown" id="calc-breakdown" style="grid-column: 1 / -1;">
                <div class="calculation-breakdown-header" onclick="document.getElementById('calc-breakdown').classList.toggle('expanded')">
                    <h4>
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M9 7h6m-6 4h6m-6 4h4M5 3h14a2 2 0 012 2v14a2 2 0 01-2 2H5a2 2 0 01-2-2V5a2 2 0 012-2z"/>
                        </svg>
                        Show Calculation Breakdown
                    </h4>
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M19 9l-7 7-7-7"/>
                    </svg>
                </div>
                <div class="calculation-breakdown-content">
                    <div class="calculation-formulas">
                        <!-- ROI Formula -->
                        <div class="formula-card">
                            <h5>Return on Investment (ROI)</h5>
                            <div class="formula-equation">
                                ROI = ((Total Benefits Ã— Years) - Total Costs) Ã· Total Costs Ã— 100
                            </div>
                            <div class="formula-values" id="roi-formula-values">
                                = ((<span id="f-benefits">$3.63M</span> Ã— <span id="f-years">3</span>) - <span id="f-costs">$820K</span>) Ã· <span id="f-costs2">$820K</span> Ã— 100
                            </div>
                            <div class="formula-result">
                                = <strong id="f-roi-result">343%</strong> return over <span id="f-roi-years">3</span> years
                            </div>
                        </div>

                        <!-- Payback Period Formula -->
                        <div class="formula-card">
                            <h5>Payback Period</h5>
                            <div class="formula-equation">
                                Payback = Total Costs Ã· Annual Benefits Ã— 12 months
                            </div>
                            <div class="formula-values">
                                = <span id="f-payback-costs">$820K</span> Ã· <span id="f-payback-benefits">$3.63M</span> Ã— 12
                            </div>
                            <div class="formula-result">
                                = <strong id="f-payback-result">2.7 months</strong> to recover investment
                            </div>
                        </div>

                        <!-- NPV Formula -->
                        <div class="formula-card">
                            <h5>Net Present Value (NPV)</h5>
                            <div class="formula-equation">
                                NPV = -Costs + Î£(Benefits Ã· (1 + r)^year)<br>
                                <small style="opacity: 0.7;">where r = 8% discount rate</small>
                            </div>
                            <div class="formula-values" id="npv-formula-values">
                                = -<span id="f-npv-costs">$820K</span> + <span id="f-npv-sum">$9.0M</span> discounted
                            </div>
                            <div class="formula-result">
                                = <strong id="f-npv-result">$8.1M</strong> present value over <span id="f-npv-years">3</span> years
                            </div>
                        </div>

                        <!-- BCR Formula -->
                        <div class="formula-card">
                            <h5>Benefit-Cost Ratio (BCR)</h5>
                            <div class="formula-equation">
                                BCR = (Total Benefits Ã— Years) Ã· Total Costs
                            </div>
                            <div class="formula-values">
                                = (<span id="f-bcr-benefits">$3.63M</span> Ã— <span id="f-bcr-years">3</span>) Ã· <span id="f-bcr-costs">$820K</span>
                            </div>
                            <div class="formula-result">
                                = <strong id="f-bcr-result">4.4x</strong> benefits per dollar invested
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Year-on-Year ROI Chart -->
            <div class="roi-chart-container">
                <div class="roi-chart-header">
                    <h4>
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M3 3v18h18"/><path d="M18 17V9"/><path d="M13 17V5"/><path d="M8 17v-3"/>
                        </svg>
                        Annual Analysis & Cumulative Profit
                    </h4>
                    <div class="roi-chart-legend">
                        <div class="roi-chart-legend-item">
                            <span class="roi-chart-legend-color cost"></span>
                            <span>Annual Costs (Line)</span>
                        </div>
                        <div class="roi-chart-legend-item">
                            <span class="roi-chart-legend-color benefit"></span>
                            <span>Annual Benefits (Line)</span>
                        </div>
                        <div class="roi-chart-legend-item">
                            <span class="roi-chart-legend-color net"></span>
                            <span>Cumulative Profit (Bar)</span>
                        </div>
                    </div>
                </div>
                <div class="roi-chart" id="roi-yoy-chart">
                    <div class="roi-chart-y-axis" id="chart-y-axis">
                        <span>$40M</span>
                        <span>$30M</span>
                        <span>$20M</span>
                        <span>$10M</span>
                        <span>$0</span>
                    </div>
                    <div class="roi-chart-gridlines">
                        <div class="roi-chart-gridline"></div>
                        <div class="roi-chart-gridline"></div>
                        <div class="roi-chart-gridline"></div>
                        <div class="roi-chart-gridline"></div>
                        <div class="roi-chart-gridline"></div>
                    </div>
                    <div class="roi-chart-bars" id="chart-bars">
                        <!-- Bars will be generated by JavaScript -->
                    </div>
                    <div class="roi-chart-breakeven" id="chart-breakeven" style="display: none;">
                        <span class="roi-chart-breakeven-label">Break-even</span>
                    </div>
                    <!-- Tooltip -->
                    <div class="roi-chart-tooltip" id="roi-chart-tooltip">
                        <div class="roi-chart-tooltip-title">Year <span id="tooltip-year">1</span></div>
                        <div class="roi-chart-tooltip-row">
                            <span class="roi-chart-tooltip-label"><span class="roi-chart-tooltip-dot cost"></span>Annual Costs</span>
                            <span class="roi-chart-tooltip-value" id="tooltip-costs">$0</span>
                        </div>
                        <div class="roi-chart-tooltip-row">
                            <span class="roi-chart-tooltip-label"><span class="roi-chart-tooltip-dot benefit"></span>Annual Benefits</span>
                            <span class="roi-chart-tooltip-value" id="tooltip-benefits">$0</span>
                        </div>
                        <div class="roi-chart-tooltip-row">
                            <span class="roi-chart-tooltip-label"><span class="roi-chart-tooltip-dot profit"></span>Cumulative Profit</span>
                            <span class="roi-chart-tooltip-value" id="tooltip-cumulative">$0</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Strategic Considerations -->
<section id="strategy" class="section strategy-section tab-content">
    <div class="container">
        <div class="section-header">
            <span class="section-tag">Strategic Analysis</span>
            <h2 class="section-title">Strategic Considerations</h2>
            <p class="section-subtitle">
                Key decisions and trade-offs for successful implementation.
            </p>
        </div>

        <div class="strategy-grid">
            <!-- Build vs Buy -->
            <div class="strategy-card">
                <h3>
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="2" y="7" width="20" height="14" rx="2"/><path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"/></svg>
                    Build vs. Buy Analysis
                </h3>
                <table class="comparison-table">
                    <tr>
                        <th>Criteria</th>
                        <th>Build</th>
                        <th>Buy</th>
                    </tr>
                    <tr>
                        <td>Customization</td>
                        <td>High</td>
                        <td>Limited</td>
                    </tr>
                    <tr>
                        <td>Time to Value</td>
                        <td>12-18 months</td>
                        <td>3-6 months</td>
                    </tr>
                    <tr>
                        <td>Total Cost (3yr)</td>
                        <td>$2.4M</td>
                        <td>$1.8M</td>
                    </tr>
                    <tr>
                        <td>IP Ownership</td>
                        <td>Full</td>
                        <td>None</td>
                    </tr>
                    <tr>
                        <td>Integration Effort</td>
                        <td>Medium</td>
                        <td>High</td>
                    </tr>
                </table>
                <div class="verdict">
                    <div class="verdict-icon">âœ“</div>
                    <span class="verdict-text">Recommendation: Hybrid approach - buy core platform, build AI differentiation</span>
                </div>
            </div>

            <!-- Risk Matrix -->
            <div class="strategy-card">
                <h3>
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/></svg>
                    Risk Matrix
                </h3>
                <div class="risk-list">
                    <div class="risk-item high">
                        <div>
                            <span class="risk-level">High</span>
                        </div>
                        <div class="risk-content">
                            <h4>Data Quality & Availability</h4>
                            <p>Mitigation: Data validation pipelines, fallback heuristics, synthetic data augmentation</p>
                        </div>
                    </div>
                    <div class="risk-item medium">
                        <div>
                            <span class="risk-level">Medium</span>
                        </div>
                        <div class="risk-content">
                            <h4>User Adoption Resistance</h4>
                            <p>Mitigation: Change management program, gamification, executive sponsorship</p>
                        </div>
                    </div>
                    <div class="risk-item medium">
                        <div>
                            <span class="risk-level">Medium</span>
                        </div>
                        <div class="risk-content">
                            <h4>Model Accuracy Drift</h4>
                            <p>Mitigation: Continuous monitoring, automated retraining, A/B testing framework</p>
                        </div>
                    </div>
                    <div class="risk-item low">
                        <div>
                            <span class="risk-level">Low</span>
                        </div>
                        <div class="risk-content">
                            <h4>Cloud Vendor Lock-in</h4>
                            <p>Mitigation: Container-based architecture, abstraction layers, multi-cloud design</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Roadmap -->
            <div class="strategy-card" style="grid-column: 1 / -1;">
                <h3>
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="20" x2="12" y2="10"/><line x1="18" y1="20" x2="18" y2="4"/><line x1="6" y1="20" x2="6" y2="16"/></svg>
                    Implementation Roadmap
                </h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 2rem; margin-top: 1rem;">
                    <div class="roadmap">
                        <div class="roadmap-item">
                            <div class="roadmap-dot"></div>
                            <div class="roadmap-phase">Phase 1 â€¢ Q1-Q2</div>
                            <div class="roadmap-title">Foundation</div>
                            <div class="roadmap-desc">Data lake setup, IoT integration, baseline risk models</div>
                        </div>
                        <div class="roadmap-item">
                            <div class="roadmap-dot"></div>
                            <div class="roadmap-phase">Phase 2 â€¢ Q3</div>
                            <div class="roadmap-title">Core AI</div>
                            <div class="roadmap-desc">Computer vision, document AI, predictive scoring</div>
                        </div>
                    </div>
                    <div class="roadmap">
                        <div class="roadmap-item">
                            <div class="roadmap-dot"></div>
                            <div class="roadmap-phase">Phase 3 â€¢ Q4</div>
                            <div class="roadmap-title">Intelligence Layer</div>
                            <div class="roadmap-desc">RAG chat interface, real-time alerts, mobile app</div>
                        </div>
                        <div class="roadmap-item">
                            <div class="roadmap-dot"></div>
                            <div class="roadmap-phase">Phase 4 â€¢ Year 2</div>
                            <div class="roadmap-title">Scale & Optimize</div>
                            <div class="roadmap-desc">Portfolio rollout, feedback loops, advanced analytics</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Footer -->
<footer class="site-footer">
    <p>Â© 2026 Anirban Bose</p>
</footer>

<script>
// Section tab switching
function showSection(sectionId, saveState = true) {
    // Hide all tab content
    document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
    document.querySelectorAll('.section-tab').forEach(el => el.classList.remove('active'));

    // Show selected section
    document.getElementById(sectionId).classList.add('active');
    document.querySelector(`.section-tab[data-section="${sectionId}"]`).classList.add('active');

    // Save to localStorage for persistence across refresh
    if (saveState) {
        try {
            localStorage.setItem('construction-risk-tab', sectionId);
        } catch (e) {}
    }

    // Scroll to top of content area
    window.scrollTo({ top: document.querySelector('.section-tabs').offsetTop, behavior: 'smooth' });
}

// Initialize tab from localStorage on page load
document.addEventListener('DOMContentLoaded', function() {
    const validTabs = ['problem', 'failures', 'solution', 'roi', 'architecture', 'tech-infrastructure', 'strategy', 'sources'];
    try {
        const savedTab = localStorage.getItem('construction-risk-tab');
        if (savedTab && validTabs.includes(savedTab)) {
            showSection(savedTab, false);
        }
    } catch (e) {}
});

// ========================================
// WORKFLOW ANIMATION CONTROLLER
// ========================================
let wfAnimationState = 'stopped'; // 'running', 'paused', 'stopped'
let wfAnimationTimers = [];
let wfCurrentStep = 0;

function workflowPlay() {
    const svg = document.getElementById('workflow-diagram');

    if (wfAnimationState === 'stopped') {
        wfCurrentStep = 0;
        resetWorkflowAnimation();
    }

    wfAnimationState = 'running';
    svg.classList.remove('paused');
    updateWorkflowButtons();
    updateWorkflowStatus('Running: Showing data flow through current process...', 'running');

    runWorkflowAnimation();
}

function workflowPause() {
    const svg = document.getElementById('workflow-diagram');

    wfAnimationState = 'paused';
    svg.classList.add('paused');

    // Clear all pending timers
    wfAnimationTimers.forEach(timer => clearTimeout(timer));
    wfAnimationTimers = [];

    updateWorkflowButtons();
    updateWorkflowStatus('Paused - Click Start to continue', 'paused');
}

function workflowStop() {
    const svg = document.getElementById('workflow-diagram');

    wfAnimationState = 'stopped';
    wfCurrentStep = 0;
    svg.classList.remove('paused');

    // Clear all pending timers
    wfAnimationTimers.forEach(timer => clearTimeout(timer));
    wfAnimationTimers = [];

    resetWorkflowAnimation();
    updateWorkflowButtons();
    updateWorkflowStatus('Click Start to see how delays compound in the current workflow', '');
}

function toggleWorkflowFullscreen() {
    const container = document.querySelector('.problem-section-fullscreen');
    const btn = document.getElementById('wf-fullscreen');
    const textSpan = btn.querySelector('.fullscreen-text');
    const svgPath = btn.querySelector('svg path');

    if (container.classList.contains('fullscreen-mode')) {
        // Exit fullscreen
        container.classList.remove('fullscreen-mode');
        textSpan.textContent = 'Fullscreen';
        svgPath.setAttribute('d', 'M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3');
        document.body.style.overflow = '';

        // Also exit browser fullscreen if active
        if (document.fullscreenElement) {
            document.exitFullscreen();
        }
    } else {
        // Enter fullscreen
        container.classList.add('fullscreen-mode');
        textSpan.textContent = 'Exit';
        svgPath.setAttribute('d', 'M8 3v3a2 2 0 0 1-2 2H3m18 0h-3a2 2 0 0 1-2-2V3m0 18v-3a2 2 0 0 1 2-2h3M3 16h3a2 2 0 0 1 2 2v3');
        document.body.style.overflow = 'hidden';

        // Request browser fullscreen for immersive experience
        if (container.requestFullscreen) {
            container.requestFullscreen();
        }
    }
}

// Solution workflow fullscreen toggle
function toggleSolWorkflowFullscreen() {
    const container = document.querySelector('.solution-section-fullscreen');
    const btn = document.getElementById('sol-wf-fullscreen');
    const textSpan = btn.querySelector('.sol-fullscreen-text');
    const svgPath = btn.querySelector('svg path');

    if (container.classList.contains('fullscreen-mode')) {
        // Exit fullscreen
        container.classList.remove('fullscreen-mode');
        textSpan.textContent = 'Fullscreen';
        svgPath.setAttribute('d', 'M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3');
        document.body.style.overflow = '';

        // Also exit browser fullscreen if active
        if (document.fullscreenElement) {
            document.exitFullscreen();
        }
    } else {
        // Enter fullscreen
        container.classList.add('fullscreen-mode');
        textSpan.textContent = 'Exit';
        svgPath.setAttribute('d', 'M8 3v3a2 2 0 0 1-2 2H3m18 0h-3a2 2 0 0 1-2-2V3m0 18v-3a2 2 0 0 1 2-2h3M3 16h3a2 2 0 0 1 2 2v3');
        document.body.style.overflow = 'hidden';

        // Request browser fullscreen for immersive experience
        if (container.requestFullscreen) {
            container.requestFullscreen();
        }
    }
}

// Handle ESC key to exit fullscreen
document.addEventListener('keydown', function(e) {
    if (e.key === 'Escape') {
        const problemContainer = document.querySelector('.problem-section-fullscreen');
        if (problemContainer && problemContainer.classList.contains('fullscreen-mode')) {
            toggleWorkflowFullscreen();
        }
        const solutionContainer = document.querySelector('.solution-section-fullscreen');
        if (solutionContainer && solutionContainer.classList.contains('fullscreen-mode')) {
            toggleSolWorkflowFullscreen();
        }
    }
});

// Handle browser fullscreen exit
document.addEventListener('fullscreenchange', function() {
    if (!document.fullscreenElement) {
        // Reset problem fullscreen
        const problemContainer = document.querySelector('.problem-section-fullscreen');
        if (problemContainer && problemContainer.classList.contains('fullscreen-mode')) {
            problemContainer.classList.remove('fullscreen-mode');
            const btn = document.getElementById('wf-fullscreen');
            if (btn) {
                const textSpan = btn.querySelector('.fullscreen-text');
                const svgPath = btn.querySelector('svg path');
                if (textSpan) textSpan.textContent = 'Fullscreen';
                if (svgPath) svgPath.setAttribute('d', 'M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3');
            }
            document.body.style.overflow = '';
        }
        // Reset solution fullscreen
        const solutionContainer = document.querySelector('.solution-section-fullscreen');
        if (solutionContainer && solutionContainer.classList.contains('fullscreen-mode')) {
            solutionContainer.classList.remove('fullscreen-mode');
            const btn = document.getElementById('sol-wf-fullscreen');
            if (btn) {
                const textSpan = btn.querySelector('.sol-fullscreen-text');
                const svgPath = btn.querySelector('svg path');
                if (textSpan) textSpan.textContent = 'Fullscreen';
                if (svgPath) svgPath.setAttribute('d', 'M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3');
            }
            document.body.style.overflow = '';
        }
    }
});

function updateWorkflowButtons() {
    const playBtn = document.getElementById('wf-play');
    const pauseBtn = document.getElementById('wf-pause');
    const stopBtn = document.getElementById('wf-stop');

    if (wfAnimationState === 'running') {
        playBtn.disabled = true;
        pauseBtn.disabled = false;
        stopBtn.disabled = false;
    } else if (wfAnimationState === 'paused') {
        playBtn.disabled = false;
        pauseBtn.disabled = true;
        stopBtn.disabled = false;
    } else {
        playBtn.disabled = false;
        pauseBtn.disabled = true;
        stopBtn.disabled = true;
    }
}

function updateWorkflowStatus(text, state) {
    const indicator = document.getElementById('wf-status-indicator');
    const statusText = document.getElementById('wf-status-text');

    indicator.className = 'status-indicator ' + state;
    statusText.textContent = text;
}

function resetWorkflowAnimation() {
    // Reset all nodes
    document.querySelectorAll('.wf-node').forEach(node => node.classList.remove('active'));

    // Reset arrows
    document.querySelectorAll('.wf-arrow').forEach(arrow => {
        arrow.classList.remove('animated', 'slow');
        arrow.style.markerEnd = 'url(#wf-arrowhead)';
    });

    // Hide problem icons
    document.querySelectorAll('.wf-problem-icon').forEach(icon => icon.classList.remove('visible'));

    // Reset clocks
    document.querySelectorAll('.wf-clock').forEach(clock => clock.classList.remove('spinning'));

    // Hide bottleneck
    document.querySelectorAll('.wf-bottleneck').forEach(bn => bn.classList.remove('visible'));

    // Hide packets
    document.querySelectorAll('.wf-packet').forEach(packet => {
        packet.classList.remove('moving');
        packet.style.transform = '';
    });
}

function runWorkflowAnimation() {
    if (wfAnimationState !== 'running') return;

    const steps = [
        // Step 1: Highlight data sources
        () => {
            updateWorkflowStatus('Step 1: Data scattered across 6+ disconnected systems...', 'running');
            document.querySelectorAll('#wf-sources .wf-node').forEach((node, i) => {
                wfAnimationTimers.push(setTimeout(() => {
                    if (wfAnimationState === 'running') node.classList.add('active');
                }, i * 200));
            });
        },

        // Step 2: Show slow data flow to processing
        () => {
            updateWorkflowStatus('Step 2: Manual data collection - takes 2-4 weeks...', 'running');
            for (let i = 1; i <= 6; i++) {
                const arrow = document.getElementById('wf-arrow-' + i);
                if (arrow) {
                    arrow.classList.add('slow');
                    arrow.style.markerEnd = 'url(#wf-arrowhead-amber)';
                }
            }
        },

        // Step 3: Highlight processing bottleneck
        () => {
            updateWorkflowStatus('Step 3: Manual review creates bottleneck - PM overwhelmed...', 'running');
            document.querySelectorAll('#wf-processing .wf-node').forEach(node => node.classList.add('active'));
            document.getElementById('wf-bottleneck-1').classList.add('visible');
            document.querySelectorAll('.wf-clock').forEach(clock => clock.classList.add('spinning'));
        },

        // Step 4: Show delay in decision
        () => {
            updateWorkflowStatus('Step 4: Delayed escalation - risks compound for 1-2 weeks...', 'running');
            ['wf-arrow-7', 'wf-arrow-8'].forEach(id => {
                const arrow = document.getElementById(id);
                if (arrow) {
                    arrow.classList.add('slow');
                    arrow.style.markerEnd = 'url(#wf-arrowhead-amber)';
                }
            });
        },

        // Step 5: Show problem at decision point
        () => {
            updateWorkflowStatus('Step 5: Risk meeting happens too late - damage already done!', 'running');
            document.querySelectorAll('#wf-decision .wf-node').forEach(node => node.classList.add('active'));
            document.getElementById('wf-warning-1').classList.add('visible');
        },

        // Step 6: Show reactive outcomes
        () => {
            updateWorkflowStatus('Step 6: Reactive response leads to emergency fixes, delays, cost overruns!', 'running');
            ['wf-arrow-9', 'wf-arrow-10', 'wf-arrow-11'].forEach(id => {
                const arrow = document.getElementById(id);
                if (arrow) {
                    arrow.classList.add('animated');
                    arrow.style.markerEnd = 'url(#wf-arrowhead-red)';
                }
            });
            document.querySelectorAll('#wf-actions .wf-node').forEach((node, i) => {
                wfAnimationTimers.push(setTimeout(() => {
                    if (wfAnimationState === 'running') node.classList.add('active');
                }, i * 300));
            });
        },

        // Step 7: Final summary
        () => {
            updateWorkflowStatus('Result: 6+ weeks of delay before action is taken. This is why 77% of projects fail!', 'running');
        },

        // Loop or stop
        () => {
            wfAnimationTimers.push(setTimeout(() => {
                if (wfAnimationState === 'running') {
                    wfCurrentStep = 0;
                    resetWorkflowAnimation();
                    runWorkflowAnimation();
                }
            }, 3000));
        }
    ];

    // Execute current step
    if (wfCurrentStep < steps.length) {
        steps[wfCurrentStep]();
        wfCurrentStep++;

        // Schedule next step
        if (wfCurrentStep < steps.length) {
            wfAnimationTimers.push(setTimeout(() => {
                if (wfAnimationState === 'running') runWorkflowAnimation();
            }, 2500));
        }
    }
}

// ========================================
// SOLUTION WORKFLOW ANIMATION
// ========================================
let solWfAnimationState = 'stopped';
let solWfAnimationTimers = [];
let solWfCurrentStep = 0;

function solWorkflowPlay() {
    if (solWfAnimationState === 'running') return;

    if (solWfAnimationState === 'stopped') {
        solWfCurrentStep = 0;
        solResetWorkflowAnimation();
    }

    // Resume CSS animations
    const svg = document.getElementById('sol-workflow-diagram');
    if (svg) svg.classList.remove('paused');

    solWfAnimationState = 'running';
    updateSolWorkflowButtons();
    updateSolWorkflowStatus('Starting AI-powered workflow...', 'running');
    runSolWorkflowAnimation();
}

function solWorkflowPause() {
    solWfAnimationState = 'paused';

    // Clear all pending timers
    solWfAnimationTimers.forEach(timer => clearTimeout(timer));
    solWfAnimationTimers = [];

    // Pause CSS animations
    const svg = document.getElementById('sol-workflow-diagram');
    if (svg) svg.classList.add('paused');

    updateSolWorkflowButtons();
    updateSolWorkflowStatus('Paused - Click Start to continue', 'paused');
}

function solWorkflowReset() {
    solWfAnimationState = 'stopped';
    solWfCurrentStep = 0;

    // Clear all pending timers
    solWfAnimationTimers.forEach(timer => clearTimeout(timer));
    solWfAnimationTimers = [];

    // Remove paused class
    const svg = document.getElementById('sol-workflow-diagram');
    if (svg) svg.classList.remove('paused');

    solResetWorkflowAnimation();
    updateSolWorkflowButtons();
    updateSolWorkflowStatus('Click Start to see how AI transforms the workflow', '');
}

function updateSolWorkflowButtons() {
    const playBtn = document.getElementById('sol-wf-play');
    const pauseBtn = document.getElementById('sol-wf-pause');
    const resetBtn = document.getElementById('sol-wf-reset');

    if (!playBtn || !pauseBtn || !resetBtn) {
        console.error('Solution workflow buttons not found');
        return;
    }

    // Force remove disabled attribute then set based on state
    playBtn.removeAttribute('disabled');
    pauseBtn.removeAttribute('disabled');
    resetBtn.removeAttribute('disabled');

    if (solWfAnimationState === 'running') {
        playBtn.setAttribute('disabled', 'disabled');
    } else if (solWfAnimationState === 'paused') {
        pauseBtn.setAttribute('disabled', 'disabled');
    } else {
        // stopped state
        pauseBtn.setAttribute('disabled', 'disabled');
        resetBtn.setAttribute('disabled', 'disabled');
    }
}

function updateSolWorkflowStatus(text, state) {
    const indicator = document.getElementById('sol-wf-status-indicator');
    const statusText = document.getElementById('sol-wf-status-text');

    if (indicator) indicator.className = 'sol-status-indicator ' + state;
    if (statusText) statusText.textContent = text;
}

function solResetWorkflowAnimation() {
    // Reset source nodes
    document.querySelectorAll('.sol-wf-source-node').forEach(node => node.classList.remove('active'));

    // Reset arrows
    document.querySelectorAll('.sol-wf-arrow').forEach(arrow => {
        arrow.classList.remove('animated');
        arrow.style.markerEnd = 'url(#sol-arrowhead)';
    });

    // Reset AI core
    const aiCore = document.getElementById('sol-wf-ai-core');
    if (aiCore) aiCore.classList.remove('active');

    // Reset glow
    const glow = document.getElementById('sol-wf-glow');
    if (glow) glow.classList.remove('active');

    // Reset outputs
    document.querySelectorAll('.sol-wf-output-node').forEach(node => node.classList.remove('active'));

    // Reset outcomes
    document.querySelectorAll('.sol-wf-outcome-node').forEach(node => node.classList.remove('active'));

    // Reset time badges
    document.querySelectorAll('.sol-wf-time-badge-group').forEach(badge => badge.classList.remove('active'));
}

function runSolWorkflowAnimation() {
    if (solWfAnimationState !== 'running') return;

    const steps = [
        // Step 1: All data sources light up simultaneously (fast!)
        () => {
            updateSolWorkflowStatus('Step 1: All data streams ingested simultaneously...', 'running');
            document.querySelectorAll('.sol-wf-source-node').forEach((node, i) => {
                solWfAnimationTimers.push(setTimeout(() => {
                    if (solWfAnimationState === 'running') node.classList.add('active');
                }, i * 80)); // Fast 80ms stagger
            });
        },

        // Step 2: Arrows flow quickly to AI core
        () => {
            updateSolWorkflowStatus('Step 2: Unified data pipeline - all sources converge instantly...', 'running');
            for (let i = 1; i <= 6; i++) {
                const arrow = document.getElementById('sol-arrow-' + i);
                if (arrow) {
                    solWfAnimationTimers.push(setTimeout(() => {
                        if (solWfAnimationState === 'running') {
                            arrow.classList.add('animated');
                            arrow.style.markerEnd = 'url(#sol-arrowhead-green)';
                        }
                    }, i * 50));
                }
            }
        },

        // Step 3: AI core activates with glow
        () => {
            updateSolWorkflowStatus('Step 3: AI Risk Intelligence Engine processing in <1 second...', 'running');
            const aiCore = document.getElementById('sol-wf-ai-core');
            const glow = document.getElementById('sol-wf-glow');
            const speedBadge = document.getElementById('sol-wf-speed-badge');

            if (aiCore) aiCore.classList.add('active');
            if (glow) glow.classList.add('active');
            if (speedBadge) speedBadge.classList.add('active');
        },

        // Step 4: Arrows flow to outputs
        () => {
            updateSolWorkflowStatus('Step 4: Real-time intelligence generated...', 'running');
            ['sol-arrow-7', 'sol-arrow-8', 'sol-arrow-9'].forEach((id, i) => {
                const arrow = document.getElementById(id);
                if (arrow) {
                    solWfAnimationTimers.push(setTimeout(() => {
                        if (solWfAnimationState === 'running') {
                            arrow.classList.add('animated');
                            arrow.style.markerEnd = 'url(#sol-arrowhead-green)';
                        }
                    }, i * 100));
                }
            });
        },

        // Step 5: Outputs appear simultaneously
        () => {
            updateSolWorkflowStatus('Step 5: Live dashboards, alerts, and recommendations ready!', 'running');
            document.querySelectorAll('.sol-wf-output-node').forEach((node, i) => {
                solWfAnimationTimers.push(setTimeout(() => {
                    if (solWfAnimationState === 'running') node.classList.add('active');
                }, i * 150));
            });
        },

        // Step 6: Final arrows to outcomes
        () => {
            updateSolWorkflowStatus('Step 6: Proactive actions triggered automatically...', 'running');
            ['sol-arrow-10', 'sol-arrow-11', 'sol-arrow-12'].forEach((id, i) => {
                const arrow = document.getElementById(id);
                if (arrow) {
                    solWfAnimationTimers.push(setTimeout(() => {
                        if (solWfAnimationState === 'running') {
                            arrow.classList.add('animated');
                            arrow.style.markerEnd = 'url(#sol-arrowhead-green)';
                        }
                    }, i * 100));
                }
            });
        },

        // Step 7: Outcomes light up with success
        () => {
            updateSolWorkflowStatus('Step 7: Proactive outcomes achieved - risks mitigated before impact!', 'running');
            document.querySelectorAll('.sol-wf-outcome-node').forEach((node, i) => {
                solWfAnimationTimers.push(setTimeout(() => {
                    if (solWfAnimationState === 'running') node.classList.add('active');
                }, i * 200));
            });

            const totalTime = document.getElementById('sol-wf-total-time');
            if (totalTime) {
                solWfAnimationTimers.push(setTimeout(() => {
                    if (solWfAnimationState === 'running') totalTime.classList.add('active');
                }, 600));
            }
        },

        // Step 8: Final summary
        () => {
            solWfAnimationState = 'stopped';
            updateSolWorkflowStatus('Complete: From data to action in real-time. 6 weeks â†’ <1 second.', 'complete');
            updateSolWorkflowButtons();
        }
    ];

    // Execute current step
    if (solWfCurrentStep < steps.length) {
        steps[solWfCurrentStep]();
        solWfCurrentStep++;

        // Schedule next step (faster pacing for solution - shows speed)
        if (solWfCurrentStep < steps.length) {
            const delay = solWfCurrentStep <= 3 ? 800 : 1200; // Faster for data flow, slightly slower for outputs
            solWfAnimationTimers.push(setTimeout(() => {
                if (solWfAnimationState === 'running') runSolWorkflowAnimation();
            }, delay));
        }
    }
}

// Smooth scroll for nav links
document.querySelectorAll('.nav-link').forEach(link => {
    link.addEventListener('click', function(e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if (target) {
            target.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }
    });
});

// Intersection Observer for scroll animations
const observerOptions = {
    threshold: 0.1,
    rootMargin: '0px 0px -50px 0px'
};

const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
        if (entry.isIntersecting) {
            entry.target.style.opacity = '1';
            entry.target.style.transform = 'translateY(0)';
        }
    });
}, observerOptions);

// Animate elements on scroll
document.querySelectorAll('.pain-point, .capability, .cloud-card, .tech-category, .roi-card, .strategy-card').forEach(el => {
    el.style.opacity = '0';
    el.style.transform = 'translateY(20px)';
    el.style.transition = 'opacity 0.5s ease, transform 0.5s ease';
    observer.observe(el);
});

// Counter animation for metrics
function animateCounter(element, target, suffix = '') {
    let current = 0;
    const increment = target / 50;
    const timer = setInterval(() => {
        current += increment;
        if (current >= target) {
            element.textContent = target + suffix;
            clearInterval(timer);
        } else {
            element.textContent = Math.floor(current) + suffix;
        }
    }, 30);
}

// Trigger counter animation when hero is visible
const heroObserver = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
        if (entry.isIntersecting) {
            document.querySelectorAll('.metric-value').forEach(el => {
                const text = el.textContent;
                if (text.includes('%')) {
                    animateCounter(el, parseInt(text), '%');
                } else if (text.includes('$')) {
                    el.style.transition = 'none';
                } else if (text.includes('wks')) {
                    el.style.transition = 'none';
                }
            });
            heroObserver.disconnect();
        }
    });
}, { threshold: 0.5 });

heroObserver.observe(document.querySelector('.hero'));

// ==========================================
// ROI CALCULATOR - Interactive Functions
// ==========================================

// Duration state (default 3 years)
let roiDuration = 3;

// Set duration and update calculations
function setDuration(years) {
    roiDuration = years;

    // Update button states
    document.querySelectorAll('.duration-btn').forEach(btn => {
        btn.classList.remove('active');
        if (parseInt(btn.getAttribute('data-years')) === years) {
            btn.classList.add('active');
        }
    });

    // Update duration display in summary box
    const durationDisplay = document.getElementById('duration-display');
    if (durationDisplay) {
        durationDisplay.textContent = years + ' Years';
    }

    updateROICalculations();
}

// Toggle expandable ROI items
function toggleROIItem(itemId) {
    const item = document.getElementById(itemId);
    if (item) {
        item.classList.toggle('expanded');
    }
}

// Format currency
function formatCurrency(value, decimals = 0) {
    if (value >= 1000000) {
        return '$' + (value / 1000000).toFixed(decimals > 0 ? 1 : 0) + 'M';
    } else if (value >= 1000) {
        return '$' + Math.round(value / 1000) + 'K';
    }
    return '$' + value.toLocaleString();
}

// Main calculation function
function updateROICalculations() {
    console.log('updateROICalculations called, roiDuration:', roiDuration);
    const portfolioValue = parseInt(document.getElementById('portfolio-slider').value); // in millions
    console.log('portfolioValue:', portfolioValue);

    // Get cost adjustment multipliers (50-150% range)
    const cloudMult = (parseInt(document.getElementById('cost-cloud-slider')?.value) || 100) / 100;
    const aimlMult = (parseInt(document.getElementById('cost-aiml-slider')?.value) || 100) / 100;
    const iotMult = (parseInt(document.getElementById('cost-iot-slider')?.value) || 100) / 100;
    const integrationMult = (parseInt(document.getElementById('cost-integration-slider')?.value) || 100) / 100;
    const trainingMult = (parseInt(document.getElementById('cost-training-slider')?.value) || 100) / 100;

    // Get benefit adjustment values
    const safetyReduction = (parseInt(document.getElementById('safety-reduction-slider')?.value) || 15) / 100;
    const insuranceReduction = (parseInt(document.getElementById('insurance-reduction-slider')?.value) || 5) / 100;
    const laborHoursBase = parseInt(document.getElementById('labor-hours-slider')?.value) || 25;

    // Update display values
    document.getElementById('portfolio-display').textContent = '$' + portfolioValue + 'M';

    // Update cost multiplier displays
    if (document.getElementById('cost-cloud-mult')) document.getElementById('cost-cloud-mult').textContent = Math.round(cloudMult * 100) + '%';
    if (document.getElementById('cost-aiml-mult')) document.getElementById('cost-aiml-mult').textContent = Math.round(aimlMult * 100) + '%';
    if (document.getElementById('cost-iot-mult')) document.getElementById('cost-iot-mult').textContent = Math.round(iotMult * 100) + '%';
    if (document.getElementById('cost-integration-mult')) document.getElementById('cost-integration-mult').textContent = Math.round(integrationMult * 100) + '%';
    if (document.getElementById('cost-training-mult')) document.getElementById('cost-training-mult').textContent = Math.round(trainingMult * 100) + '%';

    // Update benefit slider displays
    if (document.getElementById('safety-reduction-display')) document.getElementById('safety-reduction-display').textContent = Math.round(safetyReduction * 100) + '%';
    if (document.getElementById('insurance-reduction-display')) document.getElementById('insurance-reduction-display').textContent = Math.round(insuranceReduction * 100) + '%';
    if (document.getElementById('labor-hours-display')) document.getElementById('labor-hours-display').textContent = laborHoursBase + ' hrs';

    // STATUS QUO LOSS CALCULATIONS (without AI intervention)
    const portfolioValueDollarsLoss = portfolioValue * 1000000;
    const portfolioVelocityLoss = 0.25; // 25% of portfolio under active construction
    const activePortfolioLoss = portfolioValueDollarsLoss * portfolioVelocityLoss;

    // Reality: 77% of projects exceed budget by average 9.5%
    const lossOverruns = activePortfolioLoss * 0.095;

    // Schedule delays: 20% beyond planned, with penalties and extended overhead
    const numProjectsLoss = Math.max(2, Math.round(portfolioValue / 100));
    const avgDelayDays = 45; // Average 45 days delay per project
    const penaltyPerDay = 10000 + (portfolioValue * 15); // Scales with portfolio
    const lossDelays = avgDelayDays * penaltyPerDay * (numProjectsLoss * 0.5); // 50% of projects face delays

    // Safety incidents: OSHA estimates ~$70K per incident
    const baselineIncidentsLoss = Math.round(portfolioValue / 30); // Higher baseline without AI
    const lossSafety = baselineIncidentsLoss * 70000;

    // Wasted labor: 30% of time on non-productive activities (McKinsey)
    const avgPMHours = 50; // 50 hrs/week wasted per project manager
    const numPMs = Math.max(5, Math.round(portfolioValue / 80));
    const lossInefficiency = avgPMHours * 135 * 52 * numPMs * 0.15; // 15% can be recovered

    const totalLosses = lossOverruns + lossDelays + lossSafety + lossInefficiency;

    // Update status quo loss displays
    document.getElementById('loss-overruns-value').textContent = formatCurrency(lossOverruns, 1);
    document.getElementById('loss-delays-value').textContent = formatCurrency(lossDelays);
    document.getElementById('loss-safety-value').textContent = formatCurrency(lossSafety);
    document.getElementById('loss-inefficiency-value').textContent = formatCurrency(lossInefficiency);
    document.getElementById('total-losses').textContent = formatCurrency(totalLosses, 1);

    // Update loss percentages
    updatePercentage('loss-overruns', lossOverruns, totalLosses);
    updatePercentage('loss-delays', lossDelays, totalLosses);
    updatePercentage('loss-safety', lossSafety, totalLosses);
    updatePercentage('loss-inefficiency', lossInefficiency, totalLosses);

    // COST CALCULATIONS (scale with portfolio, apply multipliers)
    const baseCostCloud = (120000 + (portfolioValue * 120)) * cloudMult;
    const baseCostAIML = (250000 + (portfolioValue * 140)) * aimlMult;
    const baseCostIoT = (80000 + (portfolioValue * 140)) * iotMult;
    const baseCostIntegration = (90000 + (portfolioValue * 60)) * integrationMult;
    const baseCostTraining = (35000 + (portfolioValue * 30)) * trainingMult;

    const totalCosts = baseCostCloud + baseCostAIML + baseCostIoT + baseCostIntegration + baseCostTraining;

    // Update cost displays
    document.getElementById('cost-cloud-value').textContent = formatCurrency(baseCostCloud);
    document.getElementById('cost-aiml-value').textContent = formatCurrency(baseCostAIML);
    document.getElementById('cost-iot-value').textContent = formatCurrency(baseCostIoT);
    document.getElementById('cost-integration-value').textContent = formatCurrency(baseCostIntegration);
    document.getElementById('cost-training-value').textContent = formatCurrency(baseCostTraining);
    // total-costs element removed - now showing year1-costs instead

    // Update cost percentages
    updatePercentage('cost-cloud', baseCostCloud, totalCosts);
    updatePercentage('cost-aiml', baseCostAIML, totalCosts);
    updatePercentage('cost-iot', baseCostIoT, totalCosts);
    updatePercentage('cost-integration', baseCostIntegration, totalCosts);
    updatePercentage('cost-training', baseCostTraining, totalCosts);

    // Update cost drill-downs
    document.getElementById('cost-cloud-compute').textContent = formatCurrency(baseCostCloud * 0.47);
    document.getElementById('cost-cloud-storage').textContent = formatCurrency(baseCostCloud * 0.25);
    document.getElementById('cost-cloud-network').textContent = formatCurrency(baseCostCloud * 0.19);
    document.getElementById('cost-cloud-devops').textContent = formatCurrency(baseCostCloud * 0.09);

    document.getElementById('cost-aiml-cv').textContent = formatCurrency(baseCostAIML * 0.375);
    document.getElementById('cost-aiml-nlp').textContent = formatCurrency(baseCostAIML * 0.25);
    document.getElementById('cost-aiml-risk').textContent = formatCurrency(baseCostAIML * 0.22);
    document.getElementById('cost-aiml-ops').textContent = formatCurrency(baseCostAIML * 0.155);

    document.getElementById('cost-iot-cameras').textContent = formatCurrency(baseCostIoT * 0.4);
    document.getElementById('cost-iot-sensors').textContent = formatCurrency(baseCostIoT * 0.27);
    document.getElementById('cost-iot-edge').textContent = formatCurrency(baseCostIoT * 0.2);
    document.getElementById('cost-iot-install').textContent = formatCurrency(baseCostIoT * 0.13);

    document.getElementById('cost-int-erp').textContent = formatCurrency(baseCostIntegration * 0.375);
    document.getElementById('cost-int-dashboard').textContent = formatCurrency(baseCostIntegration * 0.333);
    document.getElementById('cost-int-api').textContent = formatCurrency(baseCostIntegration * 0.292);

    document.getElementById('cost-train-exec').textContent = formatCurrency(baseCostTraining * 0.3);
    document.getElementById('cost-train-field').textContent = formatCurrency(baseCostTraining * 0.4);
    document.getElementById('cost-train-docs').textContent = formatCurrency(baseCostTraining * 0.3);

    // BENEFIT CALCULATIONS - Based on avoiding status quo losses
    // Benefits = Portion of status quo losses that AI helps avoid
    // Goal: AI should help avoid 65-70% of total status quo losses

    // Avoided Cost Overruns: 75% of status quo overrun losses can be prevented by AI
    const benefitOverruns = lossOverruns * 0.75; // AI prevents 75% of overruns through predictive analytics
    document.getElementById('benefit-overruns-value').textContent = formatCurrency(benefitOverruns, 1);
    if (document.getElementById('benefit-overruns-baseline')) {
        document.getElementById('benefit-overruns-baseline').textContent = formatCurrency(lossOverruns);
    }

    // Schedule Recovery: 70% of delay penalties can be avoided with predictive AI
    const benefitSchedule = lossDelays * 0.70; // AI prevents 70% of delays through proactive risk management
    document.getElementById('benefit-schedule-value').textContent = formatCurrency(benefitSchedule);
    if (document.getElementById('benefit-schedule-daily')) {
        document.getElementById('benefit-schedule-daily').textContent = formatCurrency(penaltyPerDay);
    }
    if (document.getElementById('benefit-schedule-projects')) {
        document.getElementById('benefit-schedule-projects').textContent = numProjectsLoss;
    }

    // Safety Incident Prevention: 75% of safety incidents can be prevented with AI monitoring
    const benefitSafety = lossSafety * 0.75; // AI prevents 75% through real-time hazard detection
    document.getElementById('benefit-safety-value').textContent = formatCurrency(benefitSafety);
    if (document.getElementById('benefit-safety-baseline')) {
        document.getElementById('benefit-safety-baseline').textContent = baselineIncidentsLoss;
    }
    if (document.getElementById('benefit-safety-prevented')) {
        document.getElementById('benefit-safety-prevented').textContent = Math.round(baselineIncidentsLoss * 0.75);
    }

    // Insurance Premium Reduction: 10% reduction from improved safety record & claims history
    const portfolioValueDollars = portfolioValue * 1000000;
    const annualPremium = portfolioValueDollars * 0.0036;
    const benefitInsurance = annualPremium * 0.10; // 10% premium reduction
    document.getElementById('benefit-insurance-value').textContent = formatCurrency(benefitInsurance);
    if (document.getElementById('benefit-insurance-baseline')) {
        document.getElementById('benefit-insurance-baseline').textContent = formatCurrency(annualPremium, 1);
    }

    // Labor Productivity: 75% of wasted labor can be recovered with AI automation
    const benefitLabor = lossInefficiency * 0.75; // AI recovers 75% through automation
    document.getElementById('benefit-labor-value').textContent = formatCurrency(benefitLabor);
    if (document.getElementById('benefit-labor-hours')) {
        document.getElementById('benefit-labor-hours').textContent = avgPMHours;
    }

    const totalBenefits = benefitOverruns + benefitSchedule + benefitSafety + benefitInsurance + benefitLabor;
    document.getElementById('total-benefits').textContent = formatCurrency(totalBenefits, 1);

    // Update cumulative benefits display (annual Ã— duration)
    const cumulativeBenefits = totalBenefits * roiDuration;
    const cumulativeBenefitsLabel = document.getElementById('cumulative-benefits-label');
    const cumulativeBenefitsValue = document.getElementById('cumulative-benefits');
    if (cumulativeBenefitsLabel) cumulativeBenefitsLabel.textContent = 'Total Benefits (' + roiDuration + ' Year' + (roiDuration > 1 ? 's' : '') + ')';
    if (cumulativeBenefitsValue) cumulativeBenefitsValue.textContent = formatCurrency(cumulativeBenefits, 1);

    // Update cumulative losses display (annual Ã— duration) - Cost of inaction
    const cumulativeLosses = totalLosses * roiDuration;
    const cumulativeLossesLabel = document.getElementById('cumulative-losses-label');
    const cumulativeLossesValue = document.getElementById('cumulative-losses');
    if (cumulativeLossesLabel) cumulativeLossesLabel.textContent = 'Total Losses (' + roiDuration + ' Year' + (roiDuration > 1 ? 's' : '') + ')';
    if (cumulativeLossesValue) cumulativeLossesValue.textContent = formatCurrency(cumulativeLosses, 1);

    // Update Year 1 cost display (implementation year)
    const year1CostDisplay = totalCosts * 1.2; // 120% in year 1
    const year1CostValue = document.getElementById('year1-costs');
    if (year1CostValue) year1CostValue.textContent = formatCurrency(year1CostDisplay);

    // Update cumulative costs display - includes ramp-up curve
    // Year 1: 120% (implementation + initial operations)
    // Year 2: 105% (stabilization)
    // Year 3+: 100% (baseline operations)
    let cumulativeCosts = 0;
    for (let year = 1; year <= roiDuration; year++) {
        let costMultiplier;
        if (year === 1) costMultiplier = 1.2;      // Implementation + setup
        else if (year === 2) costMultiplier = 1.05; // Stabilization
        else costMultiplier = 1.0;                   // Baseline operations
        cumulativeCosts += totalCosts * costMultiplier;
    }

    const cumulativeCostsLabel = document.getElementById('cumulative-costs-label');
    const cumulativeCostsValue = document.getElementById('cumulative-costs');
    if (cumulativeCostsLabel) cumulativeCostsLabel.textContent = 'Total Cost (' + roiDuration + ' Year' + (roiDuration > 1 ? 's' : '') + ')';
    if (cumulativeCostsValue) cumulativeCostsValue.textContent = formatCurrency(cumulativeCosts);

    // Update benefit percentages
    updateBenefitPercentage('benefit-overruns', benefitOverruns, totalBenefits);
    updateBenefitPercentage('benefit-schedule', benefitSchedule, totalBenefits);
    updateBenefitPercentage('benefit-safety', benefitSafety, totalBenefits);
    updateBenefitPercentage('benefit-insurance', benefitInsurance, totalBenefits);
    updateBenefitPercentage('benefit-labor', benefitLabor, totalBenefits);

    // SUMMARY METRICS (using selected duration with cost ramp-up)
    const totalBenefitsOverDuration = totalBenefits * roiDuration;
    const roi = ((totalBenefitsOverDuration - cumulativeCosts) / cumulativeCosts) * 100;

    // Payback calculation using Year 1 costs (worst case)
    const year1Costs = totalCosts * 1.2;
    const paybackMonths = (year1Costs / totalBenefits) * 12;

    // Calculate NPV over selected duration with realistic cost curve
    const discountRate = 0.08; // 8% discount rate
    let npv = 0;
    for (let year = 1; year <= roiDuration; year++) {
        let costMultiplier;
        if (year === 1) costMultiplier = 1.2;
        else if (year === 2) costMultiplier = 1.05;
        else costMultiplier = 1.0;

        const yearCosts = totalCosts * costMultiplier;
        const yearBenefits = totalBenefits;
        const yearNet = yearBenefits - yearCosts;
        npv += yearNet / Math.pow(1 + discountRate, year);
    }

    const bcr = totalBenefitsOverDuration / cumulativeCosts;

    // Update metric labels to show duration
    const roiLabel = document.getElementById('metric-roi-label');
    if (roiLabel) roiLabel.textContent = roiDuration + '-Year ROI';
    const npvLabel = document.getElementById('metric-npv-label');
    if (npvLabel) npvLabel.textContent = roiDuration + '-Year NPV';
    const bcrLabel = document.getElementById('metric-bcr-label');
    if (bcrLabel) bcrLabel.textContent = roiDuration + '-Year BCR';

    // Update with animation
    animateMetricUpdate('metric-roi', Math.round(roi) + '%');
    animateMetricUpdate('metric-payback', paybackMonths.toFixed(1) + ' mo');
    animateMetricUpdate('metric-npv', formatCurrency(npv, 1));
    animateMetricUpdate('metric-bcr', bcr.toFixed(1) + 'x');

    // Update formula breakdown values for full transparency
    updateFormulaBreakdown(cumulativeCosts, year1Costs, totalBenefits, roi, paybackMonths, npv, bcr);

    // Update year-on-year chart
    console.log('Calling renderROIChart with totalCosts:', totalCosts, 'totalBenefits:', totalBenefits);
    renderROIChart(totalCosts, totalBenefits);
}

// Render the Year-on-Year ROI Chart
function renderROIChart(totalCosts, totalBenefits) {
    console.log('renderROIChart called - roiDuration:', roiDuration, 'totalCosts:', totalCosts, 'totalBenefits:', totalBenefits);
    const chartBars = document.getElementById('chart-bars');
    const chartYAxis = document.getElementById('chart-y-axis');
    const chartBreakeven = document.getElementById('chart-breakeven');

    console.log('chartBars element:', chartBars);
    if (!chartBars) {
        console.error('chartBars element not found!');
        return;
    }

    // Cost ramp-up multipliers (realistic implementation curve)
    const getCostMultiplier = (year) => {
        if (year === 1) return 1.2;  // 120% - Implementation, training, setup
        if (year === 2) return 1.05; // 105% - Stabilizing
        return 1.0;                  // 100% - Baseline operations
    };

    // Benefit ramp-up multipliers (realistic adoption curve)
    const getBenefitMultiplier = (year) => {
        if (year === 1) return 0.6;  // 60% - Initial deployment, learning curve
        if (year === 2) return 0.85; // 85% - Growing adoption, optimization
        return 1.0;                  // 100% - Full benefits realized
    };

    // Calculate data for each year
    const years = [];
    let maxValue = 0;
    let minValue = 0;
    let cumulativeNet = 0;

    for (let year = 1; year <= roiDuration; year++) {
        const yearCosts = totalCosts * getCostMultiplier(year);
        const yearBenefits = totalBenefits * getBenefitMultiplier(year);
        const annualNet = yearBenefits - yearCosts;
        cumulativeNet += annualNet;

        if (yearCosts > maxValue) maxValue = yearCosts;
        if (yearBenefits > maxValue) maxValue = yearBenefits;
        if (cumulativeNet > maxValue) maxValue = cumulativeNet;
        if (cumulativeNet < minValue) minValue = cumulativeNet;

        years.push({
            year: year,
            costs: yearCosts,
            benefits: yearBenefits,
            cumulativeNet: cumulativeNet
        });
    }

    // Calculate Y-axis range including negative values
    const yAxisMax = Math.ceil(maxValue / 1000000) * 1000000;
    const yAxisMin = Math.floor(minValue / 1000000) * 1000000;
    const yAxisRange = yAxisMax - yAxisMin;

    // Chart rendering area: 320px total - 30px top padding - 30px bottom padding = 260px
    const chartHeight = 260;

    // Calculate zero line position (from bottom of chart)
    const zeroLinePosition = yAxisMin < 0 ? (Math.abs(yAxisMin) / yAxisRange) * chartHeight : 0;

    // Update Y-axis labels to show range from min to max
    if (chartYAxis) {
        const labels = [];
        for (let i = 4; i >= 0; i--) {
            const value = yAxisMin + ((yAxisRange / 4) * i);
            labels.push(formatCurrency(value, 0));
        }
        chartYAxis.innerHTML = labels.map(l => `<span>${l}</span>`).join('');
    }

    // Build chart bars HTML - showing cumulative profit bars (handles positive and negative)
    let barsHTML = '';
    years.forEach((data) => {
        // Calculate bar height as proportion of total range
        const barHeight = Math.abs((data.cumulativeNet / yAxisRange) * chartHeight);

        // Calculate bottom position: if negative, sit at zero line; if positive, sit above zero line
        const bottomPosition = data.cumulativeNet >= 0 ? zeroLinePosition : zeroLinePosition - barHeight;

        barsHTML += `
            <div class="roi-chart-bar-group">
                <div class="roi-chart-bar-stack">
                    <div class="roi-chart-bar net ${data.cumulativeNet < 0 ? 'negative' : ''}" style="height: ${barHeight}px; bottom: ${bottomPosition}px;">
                        <span class="roi-chart-bar-value">${data.cumulativeNet >= 0 ? '+' : ''}${formatCurrency(data.cumulativeNet, 1)}</span>
                    </div>
                </div>
                <span class="roi-chart-bar-label">Year ${data.year}</span>
            </div>
        `;
    });

    chartBars.innerHTML = barsHTML;

    // Build line chart overlay after a brief delay to ensure bars are rendered
    setTimeout(() => {
        const chartContainer = document.getElementById('roi-yoy-chart');
        if (!chartContainer) return;

        // Calculate chart dimensions
        const chartBarsElement = document.getElementById('chart-bars');
        const chartWidth = chartBarsElement ? chartBarsElement.offsetWidth : 600;
        const barGroups = chartBarsElement ? chartBarsElement.querySelectorAll('.roi-chart-bar-group') : [];

        // Calculate X positions based on actual bar positions
        const xPositions = Array.from(barGroups).map(group => {
            const rect = group.getBoundingClientRect();
            const containerRect = chartBarsElement.getBoundingClientRect();
            return rect.left - containerRect.left + (rect.width / 2);
        });

        // Generate SVG paths using actual positions (accounting for Y-axis range)
        const generatePath = (dataKey) => {
            const points = years.map((data, index) => {
                const x = xPositions[index] || ((chartWidth / (years.length + 1)) * (index + 1));
                const y = chartHeight - (((data[dataKey] - yAxisMin) / yAxisRange) * chartHeight);
                return `${x},${y}`;
            });
            return `M ${points.join(' L ')}`;
        };

        // Create line overlay HTML
        const linesHTML = `
            <div class="roi-chart-lines">
                <svg width="100%" height="${chartHeight}">
                    <!-- Costs Line -->
                    <path class="costs-line" d="${generatePath('costs')}" stroke="#ef4444" stroke-width="2.5" fill="none"/>
                    <!-- Benefits Line -->
                    <path class="benefits-line" d="${generatePath('benefits')}" stroke="#22c55e" stroke-width="2.5" fill="none"/>

                    <!-- Dots on lines -->
                    ${years.map((data, index) => {
                        const x = xPositions[index] || ((chartWidth / (years.length + 1)) * (index + 1));
                        const yCost = chartHeight - (((data.costs - yAxisMin) / yAxisRange) * chartHeight);
                        const yBenefit = chartHeight - (((data.benefits - yAxisMin) / yAxisRange) * chartHeight);
                        return `
                            <circle cx="${x}" cy="${yCost}" r="4" fill="white" stroke="#ef4444" stroke-width="2"/>
                            <circle cx="${x}" cy="${yBenefit}" r="4" fill="white" stroke="#22c55e" stroke-width="2"/>
                        `;
                    }).join('')}
                </svg>
            </div>
        `;

        // Remove existing lines and insert new ones
        let linesContainer = chartContainer.querySelector('.roi-chart-lines');
        if (linesContainer) {
            linesContainer.remove();
        }
        chartContainer.insertAdjacentHTML('beforeend', linesHTML);

        // Add tooltip event handlers to bar groups
        const tooltip = document.getElementById('roi-chart-tooltip');
        const barGroupElements = chartBarsElement.querySelectorAll('.roi-chart-bar-group');

        barGroupElements.forEach((group, index) => {
            const yearData = years[index];

            group.addEventListener('mouseenter', (e) => {
                // Update tooltip content
                document.getElementById('tooltip-year').textContent = yearData.year;
                document.getElementById('tooltip-costs').textContent = formatCurrency(yearData.costs, 1);
                document.getElementById('tooltip-benefits').textContent = formatCurrency(yearData.benefits, 1);
                document.getElementById('tooltip-cumulative').textContent = formatCurrency(yearData.cumulativeNet, 1);

                // Position tooltip with boundary detection
                const rect = group.getBoundingClientRect();
                const chartRect = chartContainer.getBoundingClientRect();
                const tooltipWidth = 200; // min-width from CSS
                const tooltipHeight = 140; // approximate height

                // Calculate center position
                let tooltipLeft = rect.left - chartRect.left + (rect.width / 2);
                const tooltipTop = Math.max(tooltipHeight, rect.top - chartRect.top - 10);

                // Boundary detection for horizontal positioning
                const chartWidth = chartRect.width;
                let transform = 'translate(-50%, -100%)';

                // Check if tooltip would overflow left
                if (tooltipLeft - (tooltipWidth / 2) < 10) {
                    tooltipLeft = 10;
                    transform = 'translate(0, -100%)';
                }
                // Check if tooltip would overflow right
                else if (tooltipLeft + (tooltipWidth / 2) > chartWidth - 10) {
                    tooltipLeft = chartWidth - 10;
                    transform = 'translate(-100%, -100%)';
                }

                tooltip.style.left = tooltipLeft + 'px';
                tooltip.style.top = tooltipTop + 'px';
                tooltip.style.transform = transform;
                tooltip.style.opacity = '1';
            });

            group.addEventListener('mouseleave', () => {
                tooltip.style.opacity = '0';
            });
        });
    }, 50);

    // Show zero line if there are negative values
    if (chartBreakeven) {
        if (yAxisMin < 0) {
            chartBreakeven.style.display = 'block';
            chartBreakeven.style.bottom = zeroLinePosition + 'px';
            const label = chartBreakeven.querySelector('.roi-chart-breakeven-label');
            if (label) label.textContent = 'Break-even ($0)';
        } else {
            chartBreakeven.style.display = 'none';
        }
    }
}

// Update the formula breakdown display with actual values
function updateFormulaBreakdown(cumulativeCosts, year1Costs, totalBenefits, roi, paybackMonths, npv, bcr) {
    // Calculate discounted sum for NPV display
    let discountedSum = 0;
    const discountRate = 0.08;
    for (let year = 1; year <= roiDuration; year++) {
        discountedSum += totalBenefits / Math.pow(1 + discountRate, year);
    }

    // ROI Formula values (uses cumulative costs over duration)
    const fBenefits = document.getElementById('f-benefits');
    const fYears = document.getElementById('f-years');
    const fCosts = document.getElementById('f-costs');
    const fCosts2 = document.getElementById('f-costs2');
    const fRoiResult = document.getElementById('f-roi-result');
    const fRoiYears = document.getElementById('f-roi-years');

    if (fBenefits) fBenefits.textContent = formatCurrency(totalBenefits, 1);
    if (fYears) fYears.textContent = roiDuration;
    if (fCosts) fCosts.textContent = formatCurrency(cumulativeCosts);
    if (fCosts2) fCosts2.textContent = formatCurrency(cumulativeCosts);
    if (fRoiResult) fRoiResult.textContent = Math.round(roi) + '%';
    if (fRoiYears) fRoiYears.textContent = roiDuration;

    // Payback Formula values (uses Year 1 costs)
    const fPaybackCosts = document.getElementById('f-payback-costs');
    const fPaybackBenefits = document.getElementById('f-payback-benefits');
    const fPaybackResult = document.getElementById('f-payback-result');

    if (fPaybackCosts) fPaybackCosts.textContent = formatCurrency(year1Costs);
    if (fPaybackBenefits) fPaybackBenefits.textContent = formatCurrency(totalBenefits, 1);
    if (fPaybackResult) fPaybackResult.textContent = paybackMonths.toFixed(1) + ' months';

    // NPV Formula values (uses cumulative costs)
    const fNpvCosts = document.getElementById('f-npv-costs');
    const fNpvSum = document.getElementById('f-npv-sum');
    const fNpvResult = document.getElementById('f-npv-result');
    const fNpvYears = document.getElementById('f-npv-years');

    if (fNpvCosts) fNpvCosts.textContent = formatCurrency(cumulativeCosts);
    if (fNpvSum) fNpvSum.textContent = formatCurrency(discountedSum, 1);
    if (fNpvResult) fNpvResult.textContent = formatCurrency(npv, 1);
    if (fNpvYears) fNpvYears.textContent = roiDuration;

    // BCR Formula values (uses cumulative costs)
    const fBcrBenefits = document.getElementById('f-bcr-benefits');
    const fBcrYears = document.getElementById('f-bcr-years');
    const fBcrCosts = document.getElementById('f-bcr-costs');
    const fBcrResult = document.getElementById('f-bcr-result');

    if (fBcrBenefits) fBcrBenefits.textContent = formatCurrency(totalBenefits, 1);
    if (fBcrYears) fBcrYears.textContent = roiDuration;
    if (fBcrCosts) fBcrCosts.textContent = formatCurrency(cumulativeCosts);
    if (fBcrResult) fBcrResult.textContent = bcr.toFixed(1) + 'x';
}

function updatePercentage(itemId, value, total) {
    const item = document.getElementById(itemId);
    if (item) {
        const percentSpan = item.querySelector('.roi-item-percent');
        if (percentSpan) {
            percentSpan.textContent = Math.round((value / total) * 100) + '%';
        }
    }
}

function updateBenefitPercentage(itemId, value, total) {
    const item = document.getElementById(itemId);
    if (item) {
        const percentSpan = item.querySelector('.roi-item-percent');
        if (percentSpan) {
            percentSpan.textContent = Math.round((value / total) * 100) + '%';
        }
    }
}

function animateMetricUpdate(elementId, newValue) {
    const element = document.getElementById(elementId);
    if (element) {
        element.classList.add('updating');
        element.textContent = newValue;
        setTimeout(() => element.classList.remove('updating'), 300);
    }
}

function resetROICalculator() {
    // Reset main sliders
    document.getElementById('portfolio-slider').value = 500;
    document.getElementById('overrun-reduction-slider').value = 10;
    document.getElementById('schedule-days-slider').value = 8;

    // Reset duration to 3 years
    roiDuration = 3;
    document.querySelectorAll('.duration-btn').forEach(btn => {
        btn.classList.remove('active');
        if (parseInt(btn.getAttribute('data-years')) === 3) {
            btn.classList.add('active');
        }
    });

    // Reset cost adjustment sliders to 100%
    if (document.getElementById('cost-cloud-slider')) document.getElementById('cost-cloud-slider').value = 100;
    if (document.getElementById('cost-aiml-slider')) document.getElementById('cost-aiml-slider').value = 100;
    if (document.getElementById('cost-iot-slider')) document.getElementById('cost-iot-slider').value = 100;
    if (document.getElementById('cost-integration-slider')) document.getElementById('cost-integration-slider').value = 100;
    if (document.getElementById('cost-training-slider')) document.getElementById('cost-training-slider').value = 100;

    // Reset benefit adjustment sliders to defaults
    if (document.getElementById('safety-reduction-slider')) document.getElementById('safety-reduction-slider').value = 15;
    if (document.getElementById('insurance-reduction-slider')) document.getElementById('insurance-reduction-slider').value = 5;
    if (document.getElementById('labor-hours-slider')) document.getElementById('labor-hours-slider').value = 25;

    // Collapse all expanded items
    document.querySelectorAll('.roi-item-expandable.expanded').forEach(item => {
        item.classList.remove('expanded');
    });

    updateROICalculations();
}

// Initialize on page load
document.addEventListener('DOMContentLoaded', function() {
    // Check if ROI section exists before initializing
    if (document.getElementById('portfolio-slider')) {
        updateROICalculations();
    }
});

// Also run on tab switch to ROI tab
const roiSection = document.getElementById('roi');
if (roiSection) {
    const observer = new MutationObserver(function(mutations) {
        mutations.forEach(function(mutation) {
            if (mutation.attributeName === 'class' && roiSection.classList.contains('active')) {
                updateROICalculations();
            }
        });
    });
    observer.observe(roiSection, { attributes: true });
}
</script>

<!-- Sources & References Section -->
<section id="sources" class="section sources-section tab-content">
    <div class="sources-container">
        <div class="sources-grid">
            <!-- McKinsey Report -->
            <div class="source-card">
                <div class="source-card-header">
                    <div class="source-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/>
                            <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/>
                        </svg>
                    </div>
                    <div>
                        <div class="source-title">Reinventing Construction: A Route to Higher Productivity</div>
                        <div class="source-org">McKinsey Global Institute, 2017</div>
                    </div>
                </div>
                <div class="source-stats">
                    <span class="source-stat-tag">$1.6T annual loss</span>
                    <span class="source-stat-tag">77% projects delayed</span>
                    <span class="source-stat-tag">80% cost overruns</span>
                </div>
                <a href="https://www.mckinsey.com/capabilities/operations/our-insights/reinventing-construction-through-a-productivity-revolution" target="_blank" rel="noopener" class="source-link">
                    View Report
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/>
                        <polyline points="15,3 21,3 21,9"/>
                        <line x1="10" y1="14" x2="21" y2="3"/>
                    </svg>
                </a>
            </div>

            <!-- BLS Fatality Data -->
            <div class="source-card">
                <div class="source-card-header">
                    <div class="source-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
                            <circle cx="8.5" cy="7" r="4"/>
                            <line x1="20" y1="8" x2="20" y2="14"/>
                            <line x1="23" y1="11" x2="17" y2="11"/>
                        </svg>
                    </div>
                    <div>
                        <div class="source-title">Census of Fatal Occupational Injuries</div>
                        <div class="source-org">U.S. Bureau of Labor Statistics</div>
                    </div>
                </div>
                <div class="source-stats">
                    <span class="source-stat-tag">4x fatality rate</span>
                    <span class="source-stat-tag">Construction safety data</span>
                </div>
                <a href="https://www.bls.gov/iif/oshcfoi1.htm" target="_blank" rel="noopener" class="source-link">
                    View Statistics
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/>
                        <polyline points="15,3 21,3 21,9"/>
                        <line x1="10" y1="14" x2="21" y2="3"/>
                    </svg>
                </a>
            </div>

            <!-- KPMG Survey -->
            <div class="source-card">
                <div class="source-card-header">
                    <div class="source-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="18" y1="20" x2="18" y2="10"/>
                            <line x1="12" y1="20" x2="12" y2="4"/>
                            <line x1="6" y1="20" x2="6" y2="14"/>
                        </svg>
                    </div>
                    <div>
                        <div class="source-title">Global Construction Survey</div>
                        <div class="source-org">KPMG International</div>
                    </div>
                </div>
                <div class="source-stats">
                    <span class="source-stat-tag">Project performance</span>
                    <span class="source-stat-tag">Industry benchmarks</span>
                </div>
                <a href="https://kpmg.com/xx/en/home/insights/2015/10/global-construction-survey-2015-climbing-the-curve.html" target="_blank" rel="noopener" class="source-link">
                    View Survey
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/>
                        <polyline points="15,3 21,3 21,9"/>
                        <line x1="10" y1="14" x2="21" y2="3"/>
                    </svg>
                </a>
            </div>

            <!-- Construction Industry Institute -->
            <div class="source-card">
                <div class="source-card-header">
                    <div class="source-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="2" y="7" width="20" height="14" rx="2" ry="2"/>
                            <path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"/>
                        </svg>
                    </div>
                    <div>
                        <div class="source-title">Best Practices & Benchmarking</div>
                        <div class="source-org">Construction Industry Institute (CII)</div>
                    </div>
                </div>
                <div class="source-stats">
                    <span class="source-stat-tag">Risk management</span>
                    <span class="source-stat-tag">Project controls</span>
                </div>
                <a href="https://www.construction-institute.org/resources/knowledgebase" target="_blank" rel="noopener" class="source-link">
                    View Research
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/>
                        <polyline points="15,3 21,3 21,9"/>
                        <line x1="10" y1="14" x2="21" y2="3"/>
                    </svg>
                </a>
            </div>

            <!-- Dodge Data & Analytics -->
            <div class="source-card">
                <div class="source-card-header">
                    <div class="source-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/>
                            <polyline points="3.27,6.96 12,12.01 20.73,6.96"/>
                            <line x1="12" y1="22.08" x2="12" y2="12"/>
                        </svg>
                    </div>
                    <div>
                        <div class="source-title">SmartMarket Reports</div>
                        <div class="source-org">Dodge Data & Analytics</div>
                    </div>
                </div>
                <div class="source-stats">
                    <span class="source-stat-tag">12+ data silos per project</span>
                    <span class="source-stat-tag">Technology adoption</span>
                </div>
                <a href="https://www.construction.com/toolkit/reports" target="_blank" rel="noopener" class="source-link">
                    View Reports
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/>
                        <polyline points="15,3 21,3 21,9"/>
                        <line x1="10" y1="14" x2="21" y2="3"/>
                    </svg>
                </a>
            </div>

            <!-- Oxford Global Projects -->
            <div class="source-card">
                <div class="source-card-header">
                    <div class="source-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"/>
                            <line x1="2" y1="12" x2="22" y2="12"/>
                            <path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/>
                        </svg>
                    </div>
                    <div>
                        <div class="source-title">Megaproject Performance Research</div>
                        <div class="source-org">Oxford Global Projects / Bent Flyvbjerg</div>
                    </div>
                </div>
                <div class="source-stats">
                    <span class="source-stat-tag">Megaproject delays</span>
                    <span class="source-stat-tag">Cost escalation patterns</span>
                </div>
                <a href="https://www.oxfordglobalprojects.com/research" target="_blank" rel="noopener" class="source-link">
                    View Research
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/>
                        <polyline points="15,3 21,3 21,9"/>
                        <line x1="10" y1="14" x2="21" y2="3"/>
                    </svg>
                </a>
            </div>
        </div>
    </div>
</section>

</body>
</html>
